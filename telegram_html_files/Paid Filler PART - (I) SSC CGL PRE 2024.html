<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mock Test</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        :root {
            --primary-color: #4f46e5; /* Improved indigo */
            --secondary-color: #4338ca;
            --success-color: #16a34a; /* Brighter green for better contrast */
            --danger-color: #dc2626;
            --warning-color: #0369a1;
            --light-bg: #f8fafc;
            --border-color: #e2e8f0;
            --text-color: #1e293b;
            --bg-color: #ffffff;
            --muted-text: #64748b;
            --shadow-sm: 0 1px 3px rgba(0, 0, 0, 0.08);
            --shadow-md: 0 4px 8px rgba(0, 0, 0, 0.1);
            --shadow-lg: 0 10px 20px rgba(0, 0, 0, 0.12);
            --font-primary: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            --button-hover-brightness: 0.9;
            --transition-speed: 0.3s;
            --chart-color-1: #4f46e5;
            --chart-color-2: #f43f5e;
            --chart-color-3: #8b5cf6;
            --chart-color-4: #10b981;
            --chart-color-5: #f59e0b;
            --animation-bounce: cubic-bezier(0.34, 1.56, 0.64, 1);
        }

        [data-theme="dark"] {
            --primary-color: #6366f1; /* Brighter indigo for dark mode */
            --secondary-color: #818cf8;
            --success-color: #22c55e;
            --danger-color: #ef4444;
            --warning-color: #0ea5e9;
            --light-bg: #0f172a;
            --border-color: #1e293b;
            --text-color: #f1f5f9;
            --bg-color: #1e293b;
            --muted-text: #94a3b8;
            --shadow-sm: 0 1px 3px rgba(0, 0, 0, 0.4);
            --shadow-md: 0 4px 8px rgba(0, 0, 0, 0.5);
            --shadow-lg: 0 10px 20px rgba(0, 0, 0, 0.6);
            --button-hover-brightness: 1.1;
            --chart-color-1: #818cf8;
            --chart-color-2: #fb7185;
            --chart-color-3: #a78bfa;
            --chart-color-4: #34d399;
            --chart-color-5: #fbbf24;
        }
        
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');
        
        body {
            font-family: var(--font-primary);
            max-width: 1200px;
            margin: 0 auto;
            padding: 15px;
            background-color: var(--light-bg);
            line-height: 1.5;
            color: var(--text-color);
            font-size: 14px;
            transition: all 0.5s ease;
        }
        
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, rgba(79, 70, 229, 0.03) 0%, rgba(16, 185, 129, 0.03) 100%);
            z-index: -1;
        }

        [data-theme="dark"] body::before {
            background: linear-gradient(135deg, rgba(99, 102, 241, 0.05) 0%, rgba(34, 197, 94, 0.05) 100%);
        }
        
        .container {
            background-color: var(--bg-color);
            padding: 20px;
            border-radius: 12px;
            box-shadow: var(--shadow-lg);
            margin-bottom: 20px;
            border: 1px solid var(--border-color);
            transition: transform 0.3s var(--animation-bounce), box-shadow 0.3s ease;
        }

        .container:hover {
            transform: translateY(-2px);
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.15);
        }

        .test-layout {
            display: grid;
            grid-template-columns: 3fr 1fr;
            gap: 20px;
        }

        .question-palette {
            background: var(--bg-color);
            padding: 20px;
            border-radius: 16px;
            position: sticky;
            top: 20px;
            max-height: 80vh;
            overflow-y: auto;
            box-shadow: var(--shadow-md);
            border: 1px solid var(--border-color);
            transition: transform 0.4s var(--animation-bounce), box-shadow 0.3s ease;
        }

        /* Add custom scrollbar styling */
        .question-palette::-webkit-scrollbar {
            width: 8px;
        }

        .question-palette::-webkit-scrollbar-track {
            background: var(--light-bg);
            border-radius: 4px;
        }

        .question-palette::-webkit-scrollbar-thumb {
            background: var(--primary-color);
            border-radius: 4px;
        }

        .question-palette::-webkit-scrollbar-thumb:hover {
            background: var(--secondary-color);
        }

        /* Add responsive styles for mobile */
        @media screen and (max-width: 768px) {
            .test-layout {
                grid-template-columns: 1fr;
            }

            .question-palette {
                position: fixed;
                left: 0;
                right: 0;
                bottom: 0;
                top: auto;
                z-index: 1000;
                max-height: 50vh;
                margin: 0;
                border-radius: 16px 16px 0 0;
            }

            .palette-grid {
                grid-template-columns: repeat(6, 1fr);
                gap: 10px;
            }

            .palette-item {
                width: 100%;
                height: 36px;
            }
        }

        .palette-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px solid var(--border-color);
        }

        .palette-filters {
            display: flex;
            gap: 12px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .filter-btn {
            padding: 6px 12px;
            font-size: 12px;
            border-radius: 15px;
            border: 1px solid var(--border-color);
            background: transparent;
            color: var(--text-color);
            cursor: pointer;
            transition: all var(--transition-speed) ease;
            font-weight: 500;
            min-width: unset;
            box-shadow: none;
        }

        .filter-btn:hover {
            border-color: var(--primary-color);
            color: var(--primary-color);
            background-color: rgba(79, 70, 229, 0.05);
        }

        .filter-btn.active {
            background: var(--primary-color);
            color: white;
            border-color: var(--primary-color);
        }

        .filter-btn.active:hover {
            filter: brightness(var(--button-hover-brightness));
        }

        .palette-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 8px;
        }

        .palette-item {
            width: 32px;
            height: 32px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 8px;
            cursor: pointer;
            font-size: 13px;
            font-weight: 600;
            border: 1px solid var(--border-color);
            transition: all 0.3s var(--animation-bounce);
            color: var(--text-color);
            background: var(--bg-color);
            position: relative;
            overflow: hidden;
        }

        .palette-item:hover {
            transform: translateY(-4px) scale(1.05);
            box-shadow: var(--shadow-md);
        }

        .palette-item.not-visited {
            background: var(--bg-color);
            border: 1px solid var(--border-color);
            color: var(--text-color);
        }

        .palette-item.answered {
            background: #16a34a;
            color: white;
            border-color: #15803d;
        }

        .palette-item.marked-review {
            background: #eab308;
            color: #1e293b;
            border-color: #ca8a04;
            font-weight: 700;
        }

        .palette-item.not-answered {
            background: #dc2626;
            color: white;
            border-color: #b91c1c;
        }

        .palette-item.active {
            transform: scale(1.1);
            --shadow-lg: 0 10px 20px rgba(0, 0, 0, 0.12);
            --font-primary: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            --button-hover-brightness: 0.9;
            --transition-speed: 0.3s;
            --chart-color-1: #4f46e5;
            --chart-color-2: #f43f5e;
            --chart-color-3: #8b5cf6;
            --chart-color-4: #10b981;
            --chart-color-5: #f59e0b;
            --animation-bounce: cubic-bezier(0.34, 1.56, 0.64, 1);
        }

        [data-theme="dark"] {
            --primary-color: #6366f1; /* Brighter indigo for dark mode */
            --secondary-color: #818cf8;
            --success-color: #22c55e;
            --danger-color: #ef4444;
            --warning-color: #0ea5e9;
            --light-bg: #0f172a;
            --border-color: #1e293b;
            --text-color: #f1f5f9;
            --bg-color: #1e293b;
            --muted-text: #94a3b8;
            --shadow-sm: 0 1px 3px rgba(0, 0, 0, 0.4);
            --shadow-md: 0 4px 8px rgba(0, 0, 0, 0.5);
            --shadow-lg: 0 10px 20px rgba(0, 0, 0, 0.6);
            --button-hover-brightness: 1.1;
            --chart-color-1: #818cf8;
            --chart-color-2: #fb7185;
            --chart-color-3: #a78bfa;
            --chart-color-4: #34d399;
            --chart-color-5: #fbbf24;
        }
        
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');
        
        body {
            font-family: var(--font-primary);
            max-width: 1200px;
            margin: 0 auto;
            padding: 15px;
            background-color: var(--light-bg);
            line-height: 1.5;
            color: var(--text-color);
            font-size: 14px;
            transition: all 0.5s ease;
        }
        
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, rgba(79, 70, 229, 0.03) 0%, rgba(16, 185, 129, 0.03) 100%);
            z-index: -1;
        }

        [data-theme="dark"] body::before {
            background: linear-gradient(135deg, rgba(99, 102, 241, 0.05) 0%, rgba(34, 197, 94, 0.05) 100%);
        }
        
        .container {
            background-color: var(--bg-color);
            padding: 20px;
            border-radius: 12px;
            box-shadow: var(--shadow-lg);
            margin-bottom: 20px;
            border: 1px solid var(--border-color);
            transition: transform 0.3s var(--animation-bounce), box-shadow 0.3s ease;
        }

        .container:hover {
            transform: translateY(-2px);
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.15);
        }

        .test-layout {
            display: grid;
            grid-template-columns: 3fr 1fr;
            gap: 20px;
        }

        .question-palette {
            background: var(--bg-color);
            padding: 20px;
            border-radius: 16px;
            position: sticky;
            top: 20px;
            max-height: 80vh;
            overflow-y: auto;
            box-shadow: var(--shadow-md);
            border: 1px solid var(--border-color);
            transition: transform 0.4s var(--animation-bounce), box-shadow 0.3s ease;
            scrollbar-width: thin;
            scrollbar-color: var(--primary-color) var(--light-bg);
        }

        /* Custom scrollbar for webkit browsers */
        .question-palette::-webkit-scrollbar {
            width: 8px;
        }

        .question-palette::-webkit-scrollbar-track {
            background: var(--light-bg);
            border-radius: 4px;
        }

        .question-palette::-webkit-scrollbar-thumb {
            background: var(--primary-color);
            border-radius: 4px;
        }

        .question-palette::-webkit-scrollbar-thumb:hover {
            background: var(--secondary-color);
        }

        .question-palette:hover {
            box-shadow: var(--shadow-lg);
        }

        .palette-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px solid var(--border-color);
        }

        .palette-filters {
            display: flex;
            gap: 12px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .filter-btn {
            padding: 6px 12px;
            font-size: 12px;
            border-radius: 15px;
            border: 1px solid var(--border-color);
            background: transparent;
            color: var(--text-color);
            cursor: pointer;
            transition: all var(--transition-speed) ease;
            font-weight: 500;
            min-width: unset;
            box-shadow: none;
        }

        .filter-btn:hover {
            border-color: var(--primary-color);
            color: var(--primary-color);
            background-color: rgba(79, 70, 229, 0.05);
        }

        .filter-btn.active {
            background: var(--primary-color);
            color: white;
            border-color: var(--primary-color);
        }

        .filter-btn.active:hover {
            filter: brightness(var(--button-hover-brightness));
        }

        .palette-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 8px;
        }

        .palette-item {
            width: 32px;
            height: 32px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 8px;
            cursor: pointer;
            font-size: 13px;
            font-weight: 600;
            border: 1px solid var(--border-color);
            transition: all 0.3s var(--animation-bounce);
            color: var(--text-color);
            background: var(--bg-color);
            position: relative;
            overflow: hidden;
        }

        .palette-item:hover {
            transform: translateY(-4px) scale(1.05);
            box-shadow: var(--shadow-md);
        }

        .palette-item.not-visited {
            background: var(--bg-color);
            border: 1px solid var(--border-color);
            color: var(--text-color);
        }

        .palette-item.answered {
            background: #16a34a;
            color: white;
            border-color: #15803d;
        }

        .palette-item.marked-review {
            background: #eab308;
            color: #1e293b;
            border-color: #ca8a04;
            font-weight: 700;
        }

        .palette-item.not-answered {
            background: #dc2626;
            color: white;
            border-color: #b91c1c;
        }

        .palette-item.active {
            transform: scale(1.1);
            box-shadow: 0 0 15px rgba(79, 70, 229, 0.3);
            z-index: 1;
        }

        .palette-item.active::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            border: 2px solid currentColor;
            border-radius: 8px;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% { transform: scale(1); opacity: 1; }
            50% { transform: scale(1.1); opacity: 0.5; }
            100% { transform: scale(1); opacity: 1; }
        }
        
        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px solid var(--border-color);
            position: relative;
            overflow: hidden;
        }

        .header::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 1px;
            background: linear-gradient(to right, transparent, var(--border-color), transparent);
        }

        .header-controls {
            display: flex;
            gap: 20px;
            align-items: center;
        }
        
        h1 {
            color: var(--primary-color);
            margin: 0;
            font-size: 24px;
            font-weight: 700;
            background: linear-gradient(to right, var(--primary-color), var(--chart-color-3));
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
            letter-spacing: -0.5px;
        }
        
        .question-container {
            margin-bottom: 20px;
            padding: 20px;
            border-radius: 12px;
            border: 1px solid var(--border-color);
            transition: all 0.4s var(--animation-bounce);
            background-color: var(--bg-color);
            box-shadow: var(--shadow-md);
            min-height: 500px;
            display: flex;
            flex-direction: column;
        }

        .question-container:hover {
            box-shadow: var(--shadow-lg);
            transform: translateY(-4px);
        }
        
        .question-number {
            font-size: 14px;
            margin-bottom: 15px;
            padding-bottom: 12px;
            border-bottom: 1px solid var(--border-color);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .question {
            font-size: 16px;
            margin-bottom: 20px;
            line-height: 1.6;
            color: var(--text-color);
            font-weight: 500;
            animation: fadeIn 0.5s ease;
        }
        
        .options {
            flex-grow: 1;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .option {
            display: block;
            margin: 12px 0;
            padding: 16px;
            border: 1px solid var(--border-color);
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s var(--animation-bounce);
            position: relative;
            overflow: hidden;
            color: var(--text-color);
            background-color: var(--bg-color);
            font-size: 14px;
            font-weight: 400;
            user-select: none; /* Prevent text selection */
        }
        
        .option::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 0;
            height: 100%;
            background-color: rgba(79, 70, 229, 0.05);
            transition: width 0.3s ease;
            z-index: 0;
        }
        
        .option:hover::before {
            width: 100%;
        }
        
        .option:hover {
            border-color: var(--primary-color);
            transform: translateX(8px);
        }
        
        .option:focus-visible {
            outline: 2px solid var(--primary-color);
            outline-offset: 2px;
        }
        
        .option input[type="radio"] {
            position: absolute;
            opacity: 0;
            cursor: pointer;
            height: 0;
            width: 0;
        }
        
        .option.selected {
            background-color: rgba(79, 70, 229, 0.15);
            border-color: var(--primary-color);
            transform: translateX(10px);
            box-shadow: 0 4px 12px rgba(79, 70, 229, 0.2);
        }

        .option.selected::after {
            content: '';
            position: absolute;
            left: 0;
            top: 0;
            height: 100%;
            width: 4px;
            background-color: var(--primary-color);
            border-radius: 4px 0 0 4px;
        }
        
        .option-content {
            position: relative;
            z-index: 1;
            display: flex;
            align-items: center;
            /* Added flex-wrap for better text handling */
            flex-wrap: wrap;
            width: 100%;
        }
        
        .navigation {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 35px;
            padding-top: 25px;
            border-top: 1px solid var(--border-color);
            position: sticky;
            bottom: 20px;
            background-color: var(--bg-color);
            padding-bottom: 10px;
            z-index: 5;
        }

        .nav-buttons {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
        }
        
        button {
            padding: 12px 22px;
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 600;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            transition: all 0.3s var(--animation-bounce);
            position: relative;
            overflow: hidden;
            box-shadow: var(--shadow-sm);
            min-width: 100px;
            letter-spacing: 0.3px;
            background-color: var(--primary-color);
            outline: none;
        }
        
        button::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 50%;
            transform: translate(-50%, -50%);
            transition: width 0.5s, height 0.5s;
            z-index: 0;
        }

        button:hover::before {
            width: 150%;
            height: 150%;
        }

        button:active::before {
            background: rgba(0, 0, 0, 0.1);
            width: 150%;
            height: 150%;
        }
        
        button:hover {
            transform: translateY(-4px);
            box-shadow: 0 6px 15px rgba(79, 70, 229, 0.25);
            filter: brightness(var(--button-hover-brightness));
        }
        
        button:active {
            transform: translateY(-2px);
            transition: all 0.1s;
        }

        button i {
            font-size: 18px;
            transition: transform 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            position: relative;
            z-index: 1;
        }

        button span {
            position: relative;
            z-index: 1;
        }

        button:hover i {
            transform: scale(1.2);
        }

        button:focus-visible {
            outline: 2px solid var(--primary-color);
            outline-offset: 2px;
        }

        button:disabled {
            background-color: var(--border-color);
            cursor: not-allowed;
            transform: none;
            opacity: 0.6;
            box-shadow: none;
        }

        button:disabled:hover {
            transform: none;
            box-shadow: none;
        }

        button:disabled::before {
            display: none;
        }

        #bookmark-btn {
            background-color: transparent;
            color: var(--text-color);
            border: 1px solid var(--border-color);
            font-weight: 500;
            transition: all 0.3s var(--animation-bounce);
        }

        #bookmark-btn:hover {
            border-color: #eab308;
            color: #eab308;
            background-color: rgba(234, 179, 8, 0.08);
        }

        #bookmark-btn.active {
            background-color: #eab308;
            color: #1e293b;
            border-color: #ca8a04;
            font-weight: 600;
        }

        #bookmark-btn.active:hover {
            background-color: #ca8a04;
            color: #1e293b;
        }

        #bookmark-btn i {
            transition: transform 0.3s var(--animation-bounce);
        }

        #bookmark-btn:hover i {
            transform: translateY(-2px);
        }
        
        #submit-test {
            background-color: var(--success-color);
            font-weight: 600;
            min-width: 140px;
        }
        
        #submit-test:hover {
            box-shadow: 0 6px 15px rgba(22, 163, 74, 0.25);
        }
        
        #prev-btn, #next-btn {
            background-color: var(--primary-color);
            min-width: 130px;
        }
        
        #timer {
            font-size: 14px;
            font-weight: 600;
            color: var(--text-color);
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 10px 16px;
            background: rgba(79, 70, 229, 0.08);
            border-radius: 8px;
            border: 1px solid var(--border-color);
            transition: all 0.3s ease;
        }

        .timer-warning {
            color: var(--danger-color);
            animation: pulse 1.5s infinite;
            background: rgba(220, 38, 38, 0.1);
            border-color: var(--danger-color);
        }

        @keyframes pulse {
            0% { opacity: 1; transform: scale(1); }
            50% { opacity: 0.7; transform: scale(1.05); }
            100% { opacity: 1; transform: scale(1); }
        }
        
        #result {
            display: none;
            color: var(--text-color);
        }
        
        #score {
            font-size: 32px;
            text-align: center;
            margin: 35px 0;
            padding: 30px;
            background: linear-gradient(to right, rgba(79, 70, 229, 0.08), rgba(139, 92, 246, 0.08));
            border-radius: 12px;
            line-height: 1.6;
            border: 1px solid var(--border-color);
            position: relative;
            overflow: hidden;
            animation: slideUp 0.8s var(--animation-bounce);
        }
        
        @keyframes slideUp {
            from { opacity: 0; transform: translateY(30px); }
            to { opacity: 1; transform: translateY(0); }
        }

        #score::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: radial-gradient(circle at top right, rgba(79, 70, 229, 0.1), transparent 60%);
            z-index: 0;
        }

        #score div {
            position: relative;
            z-index: 1;
        }

        .score-details {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
            gap: 25px;
            margin: 35px 0;
        }

        .score-card {
            padding: 24px;
            border-radius: 12px;
            text-align: center;
            background: var(--bg-color);
            box-shadow: var(--shadow-md);
            border: 1px solid var(--border-color);
            transition: all 0.4s var(--animation-bounce);
            position: relative;
            overflow: hidden;
            min-height: 120px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }

        .score-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 4px;
            background: linear-gradient(to right, var(--chart-color-1), var(--chart-color-3));
            transition: height 0.3s ease;
        }

        .score-card:hover::before {
            height: 6px;
        }

        .score-card:nth-child(2)::before {
            background: linear-gradient(to right, var(--chart-color-2), var(--chart-color-4));
        }

        .score-card:nth-child(3)::before {
            background: linear-gradient(to right, var(--chart-color-3), var(--chart-color-5));
        }

        .score-card:nth-child(4)::before {
            background: linear-gradient(to right, var(--chart-color-4), var(--chart-color-1));
        }

        .score-card:hover {
            transform: translateY(-8px) scale(1.02);
            box-shadow: var(--shadow-lg);
        }

        .score-card h3 {
            margin: 0 0 16px 0;
            color: var(--text-color);
            font-size: 14px;
            font-weight: 600;
            line-height: 1.4;
            max-width: 100%;
            overflow-wrap: break-word;
            word-wrap: break-word;
            hyphens: auto;
        }

        .score-card div {
            font-size: 28px;
            font-weight: 700;
            background: linear-gradient(45deg, var(--chart-color-1), var(--chart-color-3));
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
            text-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
            line-height: 1.2;
            margin: 0;
            padding: 0;
        }

        .score-card:hover div {
            transform: scale(1.1);
        }

        .score-card:nth-child(2) div {
            background: linear-gradient(45deg, var(--chart-color-2), var(--chart-color-4));
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .score-card:nth-child(3) div {
            background: linear-gradient(45deg, var(--chart-color-3), var(--chart-color-5));
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .score-card:nth-child(4) div {
            background: linear-gradient(45deg, var(--chart-color-4), var(--chart-color-1));
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .chart-container {
            height: 350px;
            margin: 25px 0;
            background-color: var(--bg-color);
            padding: 25px;
            border-radius: 12px;
            box-shadow: var(--shadow-sm);
            border: 1px solid var(--border-color);
            animation: fadeScale 1s ease;
            position: relative;
        }

        @keyframes fadeScale {
            from { opacity: 0; transform: scale(0.9); }
            to { opacity: 1; transform: scale(1); }
        }

        .chart-container::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: radial-gradient(circle at center, rgba(79, 70, 229, 0.03), transparent 70%);
            z-index: 0;
            border-radius: 12px;
        }

        .shortcut-hint {
            font-size: 12px;
            color: var(--muted-text);
            font-weight: normal;
        }

        .keyboard-shortcuts {
            display: flex;
            gap: 8px;
            align-items: center;
        }

        .keyboard-shortcuts span {
            background: var(--bg-color);
            border: 1px solid var(--border-color);
            padding: 3px 6px;
            border-radius: 6px;
            font-size: 11px;
            color: var(--muted-text);
            cursor: help;
            font-weight: 500;
        }

        .keyboard-shortcuts span:hover {
            background: var(--border-color);
            color: var(--text-color);
        }

        .option-number {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 26px;
            height: 26px;
            background: var(--primary-color);
            color: white;
            border-radius: 50%;
            margin-right: 12px;
            font-size: 12px;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .option:hover .option-number {
            transform: scale(1.1);
        }

        .option.selected .option-number {
            background: var(--success-color);
            box-shadow: 0 0 10px rgba(22, 163, 74, 0.4);
        }

        .palette-toggle-btn {
            background: linear-gradient(145deg, var(--primary-color), var(--secondary-color));
            color: white;
            border: none;
            border-radius: 50%;
            width: 56px;
            height: 56px;
            position: fixed;
            bottom: 24px;
            right: 24px;
            z-index: 100;
            display: none;
            align-items: center;
            justify-content: center;
            box-shadow: 0 4px 20px rgba(79, 70, 229, 0.25);
            font-size: 20px;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
            overflow: hidden;
            padding: 0;
            min-width: unset;
        }

        .palette-toggle-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: radial-gradient(circle at center, rgba(255, 255, 255, 0.2), transparent 70%);
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .palette-toggle-btn:hover::before {
            opacity: 1;
        }

        .palette-toggle-btn:hover {
            transform: scale(1.1);
            box-shadow: 0 6px 25px rgba(79, 70, 229, 0.4);
        }

        .palette-toggle-btn:active {
            transform: scale(0.95);
        }

        .palette-toggle-btn.active {
            transform: rotate(45deg);
        }

        .palette-toggle-btn i {
            position: relative;
            z-index: 1;
            transition: transform 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
        }

        .palette-toggle-btn:hover i {
            transform: rotate(-15deg);
        }

        @media (max-width: 768px) {
            body {
                padding: 10px;
                font-size: 13px;
            }

            .container {
                padding: 15px;
                border-radius: 10px;
            }

            .test-layout {
                grid-template-columns: 1fr;
            }

            .question-palette {
                position: fixed;
                top: 0;
                left: 0;
                right: 0;
                bottom: 0;
                margin: 0;
                z-index: 1000;
                border-radius: 0;
                overflow-y: auto;
                transform: translateX(100%);
                transition: transform 0.3s var(--animation-bounce);
                padding: 20px;
            }

            .question-palette.visible {
                transform: translateX(0);
            }

            .palette-toggle-btn {
                width: 48px;
                height: 48px;
                bottom: 16px;
                right: 16px;
                font-size: 18px;
            }

            .palette-header {
                display: flex;
                justify-content: space-between;
                align-items: center;
            }

            .palette-close-btn {
                background: transparent;
                border: none;
                color: var(--text-color);
                font-size: 20px;
                cursor: pointer;
                min-width: auto;
                padding: 10px;
                box-shadow: none;
                border-radius: 50%;
                width: 40px;
                height: 40px;
                display: flex;
                align-items: center;
                justify-content: center;
                transition: all 0.3s ease;
            }

            .palette-close-btn:hover {
                color: var(--primary-color);
                background: rgba(79, 70, 229, 0.1);
            }

            .score-details {
                grid-template-columns: 1fr;
            }

            .nav-buttons {
                flex-direction: column;
                width: 100%;
                gap: 12px;
            }

            .navigation {
                flex-direction: column;
                gap: 15px;
                position: sticky;
                bottom: 10px;
                padding-bottom: 5px;
            }
            
            .question-container {
                min-height: 400px;
            }

            .bookmark-btn {
                width: 100%;
                justify-content: center;
            }

            button {
                width: 100%;
                justify-content: center;
                padding: 14px 20px;
            }

            .header {
                flex-direction: column;
                gap: 15px;
                text-align: center;
                padding-bottom: 12px;
            }

            .header-controls {
                width: 100%;
                justify-content: center;
            }

            .theme-toggle {
                width: 40px;
                height: 40px;
                padding: 10px;
            }

            .keyboard-shortcuts {
                display: none;
            }

            #timer {
                padding: 8px 14px;
                font-size: 13px;
                width: 100%;
                justify-content: center;
            }

            .question {
                font-size: 15px;
            }

            .option {
                padding: 14px;
                margin: 10px 0;
                word-break: break-word; /* Added to prevent text overflow */
            }

            .option:hover {
                transform: translateX(4px);
            }

            .option.selected {
                transform: translateX(8px);
            }

            /* Fix for mobile devices where hover states persist */
            @media (hover: none) {
                button:hover, .option:hover, .score-card:hover, .answer-review:hover {
                    transform: none;
                }

                button:active, .option:active {
                    transform: scale(0.98);
                }
            }

            /* Enhance readability on mobile */
            #score {
                font-size: 24px;
                padding: 20px;
            }

            .chart-container {
                height: 300px;
            }

            .custom-chart-legend {
                flex-direction: column;
                align-items: flex-start;
                padding-left: 20px;
            }

            /* Prevent mobile zoom when tapping buttons/options */
            button, .option, input, select {
                font-size: 16px;
            }

            .palette-filters {
                flex-direction: row;
                overflow-x: auto;
                padding-bottom: 10px;
                justify-content: center;
                -webkit-overflow-scrolling: touch;
                gap: 8px;
            }
            
            .filter-btn {
                font-size: 11px;
                padding: 5px 10px;
                white-space: nowrap;
                flex-shrink: 0; /* Prevent filters from shrinking */
            }
            
            /* Fix download button on mobile */
            .download-btn {
                width: 100%;
                min-width: 100%;
                margin-top: 15px;
                padding: 14px 10px;
                white-space: normal; /* Allow text to wrap */
            }
            
            /* Option text can wrap now */
            .option-content {
                flex-wrap: wrap;
                width: 100%;
            }
            
            /* Ensure option number doesn't shrink */
            .option-number {
                flex-shrink: 0;
                margin-bottom: 5px;
            }
        }

        .answer-review {
            padding: 20px;
            border: 1px solid var(--border-color);
            border-radius: 12px;
            margin-bottom: 15px;
            background: var(--bg-color);
            transition: all 0.3s var(--animation-bounce);
        }

        .answer-review:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-md);
        }

        .explanation {
            margin-top: 15px;
            padding: 15px;
            background: rgba(79, 70, 229, 0.1);
            border-radius: 8px;
            border-left: 4px solid var(--primary-color);
        }

        .explanation strong {
            color: var(--primary-color);
            font-weight: 600;
        }

        .explanation p {
            margin: 8px 0;
            line-height: 1.6;
            color: var(--text-color);
        }

        [data-theme="dark"] .explanation {
            background: rgba(99, 102, 241, 0.1);
        }

        .correct {
            color: var(--success-color);
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 8px;
            margin-top: 12px;
            padding: 8px 12px;
            border-radius: 8px;
            background-color: rgba(22, 163, 74, 0.1);
            transition: all 0.3s ease;
        }

        .correct:hover {
            background-color: rgba(22, 163, 74, 0.15);
        }

        .incorrect {
            color: var(--danger-color);
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 8px;
            margin-top: 12px;
            padding: 8px 12px;
            border-radius: 8px;
            background-color: rgba(220, 38, 38, 0.1);
            transition: all 0.3s ease;
        }

        .incorrect:hover {
            background-color: rgba(220, 38, 38, 0.15);
        }

        .marks-info {
                font-size: 12px;
            color: var(--muted-text);
            font-style: normal;
            margin-top: 10px;
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 6px 10px;
            background-color: rgba(100, 116, 139, 0.08);
            border-radius: 6px;
            transition: all 0.3s ease;
        }

        .marks-info:hover {
            background-color: rgba(100, 116, 139, 0.12);
        }

        .question-number {
            font-weight: 600;
            color: var(--text-color);
            font-size: 16px;
            margin-bottom: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding-bottom: 15px;
            border-bottom: 1px solid var(--border-color);
        }

        .theme-toggle {
            background: transparent;
            border: 1px solid var(--border-color);
            padding: 10px;
            border-radius: 50%;
            cursor: pointer;
            color: var(--text-color);
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.5s cubic-bezier(0.68, -0.6, 0.32, 1.6);
            min-width: unset;
            width: 38px;
            height: 38px;
        }

        .theme-toggle:hover {
            border-color: var(--primary-color);
            color: var(--primary-color);
            background-color: rgba(79, 70, 229, 0.08);
            transform: rotate(180deg);
        }

        .review-warning {
            background-color: rgba(220, 38, 38, 0.08);
            border: 1px solid var(--danger-color);
            padding: 24px;
            border-radius: 12px;
            margin-bottom: 25px;
            display: flex;
            align-items: center;
            gap: 15px;
            color: var(--text-color);
            box-shadow: var(--shadow-md);
            animation: slideDown 0.5s var(--animation-bounce);
        }

        @keyframes slideDown {
            from { transform: translateY(-20px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        .review-warning i {
            color: var(--danger-color);
            font-size: 28px;
            animation: shake 1s cubic-bezier(.36,.07,.19,.97) both;
        }

        @keyframes shake {
            10%, 90% { transform: translate3d(-1px, 0, 0); }
            20%, 80% { transform: translate3d(2px, 0, 0); }
            30%, 50%, 70% { transform: translate3d(-4px, 0, 0); }
            40%, 60% { transform: translate3d(4px, 0, 0); }
        }

        #review-list {
            margin-top: 25px;
        }

        .review-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px;
            border-bottom: 1px solid var(--border-color);
            color: var(--text-color);
            transition: all 0.3s ease;
        }

        .review-item:hover {
            background: rgba(79, 70, 229, 0.05);
            transform: translateX(5px);
        }

        .review-item:last-child {
            border-bottom: none;
        }

        .analytics-container {
            margin-top: 35px;
            padding: 25px;
            border-radius: 12px;
            background: var(--bg-color);
            box-shadow: var(--shadow-md);
            border: 1px solid var(--border-color);
            transition: all 0.3s var(--animation-bounce);
        }

        .analytics-container:hover {
            box-shadow: var(--shadow-lg);
            transform: translateY(-5px);
        }

        .analytics-container h3 {
            color: var(--primary-color);
            margin-bottom: 20px;
            font-weight: 600;
            font-size: 18px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .analytics-container h3 i {
            font-size: 20px;
            color: var(--chart-color-1);
        }

        .palette-item.active {
            transform: scale(1.1);
            box-shadow: 0 0 10px rgba(79, 70, 229, 0.3);
            z-index: 1;
        }

        .keyboard-pressed {
            transform: scale(0.95) translateY(0) !important;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1) !important;
            opacity: 0.9;
            transition: all 0.1s ease !important;
        }
        
        .keyboard-selected {
            background-color: rgba(79, 70, 229, 0.15);
            transform: translateX(5px);
            transition: all 0.1s ease;
        }
        
        @keyframes buttonPulse {
            0% { transform: scale(1); }
            50% { transform: scale(0.95); }
            100% { transform: scale(1); }
        }

        .review-warning {
            animation: none;
            transition: all 0.3s var(--animation-bounce);
        }
        
        .fade-out {
            opacity: 0 !important;
            transform: translateY(-10px) !important;
        }
        
        .review-warning button {
            flex: 1;
            min-width: 120px;
        }
        
        @media (max-width: 768px) {
            .review-warning {
                flex-direction: column;
                padding: 20px;
            }
            
            .review-warning i {
                margin-bottom: 10px;
                align-self: center;
            }
        }

        .custom-chart-legend {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 24px;
            flex-wrap: wrap;
            padding: 0 16px;
        }

        .chart-legend-item {
            display: flex;
            align-items: center;
            margin: 4px 0;
            font-weight: 600;
            font-size: 13px;
            white-space: nowrap;
        }

        .legend-color {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            margin-right: 8px;
            display: inline-block;
            flex-shrink: 0;
        }

        .legend-text {
            color: var(--text-color);
            opacity: 0.9;
        }

        @media (max-width: 768px) {
            .score-card {
                padding: 20px;
                min-height: 100px;
            }

            .score-card h3 {
                font-size: 13px;
                margin-bottom: 12px;
            }

            .score-card div {
                font-size: 24px;
            }

            .custom-chart-legend {
                gap: 12px;
                margin-top: 20px;
                padding: 0 12px;
            }

            .chart-legend-item {
                font-size: 12px;
            }

            .legend-color {
                width: 10px;
                height: 10px;
                margin-right: 6px;
            }
        }

        /* Add new styles for creator info */
        .creator-info {
            display: flex;
            align-items: center;
            justify-content: flex-end;
            padding: 10px 20px;
            background: linear-gradient(135deg, rgba(79, 70, 229, 0.1) 0%, rgba(16, 185, 129, 0.1) 100%);
            border-radius: 12px;
            margin-bottom: 20px;
            gap: 15px;
            border: 1px solid var(--border-color);
        }

        .creator-logo {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            object-fit: cover;
            border: 2px solid var(--primary-color);
            transition: transform 0.3s ease;
        }

        .creator-logo:hover {
            transform: scale(1.1);
        }

        .creator-tg {
            color: var(--text-color);
            text-decoration: none;
            font-weight: 500;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: all 0.3s ease;
        }

        .creator-tg:hover {
            color: var(--primary-color);
            transform: translateY(-2px);
        }

        .creator-tg i {
            color: #229ED9;
            font-size: 20px;
        }

        [data-theme="dark"] .creator-info {
            background: linear-gradient(135deg, rgba(99, 102, 241, 0.1) 0%, rgba(34, 197, 94, 0.1) 100%);
        }

        .download-btn {
            background: linear-gradient(145deg, var(--chart-color-1), var(--chart-color-3));
            margin-top: 20px;
            width: auto;
            padding: 12px 24px;
            transition: all 0.3s var(--animation-bounce);
            box-shadow: var(--shadow-md);
            font-weight: 600;
            letter-spacing: 0.5px;
            min-width: 200px;
            color: white;
            /* Ensure text doesn't overflow */
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }

        .download-btn:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-lg);
        }
        
        .download-btn i {
            margin-right: 8px;
        }
    </style>
</head>
<body>
    <div class="creator-info">
        <a href="https://t.me/finallygotnirvana" target="_blank" class="creator-tg">
            <i class="fab fa-telegram"></i>
            Created by @finallygotnirvana
        </a>
        <img src="https://i.ibb.co/0ysnvFZS/0x1900-000000-80-0-0.jpg" alt="Creator Logo" class="creator-logo">
    </div>

    <div class="test-layout">
        <div id="test-container" class="container">
            <div class="header">
                <h1 id="test-title">Mock Test</h1>
                <div class="header-controls">
                    <div id="timer"><i class="fas fa-clock"></i> Time Remaining: 00:00</div>
                    <button class="theme-toggle" id="theme-toggle">
                        <i class="fas fa-moon"></i>
                    </button>
                </div>
            </div>
            
            <div id="current-question"></div>
            
            <div class="navigation">
                <div class="nav-buttons">
                    <button id="prev-btn" disabled><i class="fas fa-arrow-left"></i> Previous</button>
                    <button id="next-btn">Next <i class="fas fa-arrow-right"></i></button>
                    <button id="submit-test" style="display: none;"><i class="fas fa-check"></i> Submit Test</button>
                </div>
                <button id="bookmark-btn">
                    <i class="far fa-flag"></i> Mark for Review <span class="shortcut-hint">(B)</span>
                </button>
            </div>
        </div>

        <div class="question-palette container">
            <div class="palette-header">
                <h3>Question Palette</h3>
            </div>
            <div class="palette-filters">
                <button class="filter-btn active" data-filter="all">All</button>
                <button class="filter-btn" data-filter="answered">Answered</button>
                <button class="filter-btn" data-filter="not-answered">Not Answered</button>
                <button class="filter-btn" data-filter="marked-review">Marked for Review</button>
            </div>
            <div class="palette-grid" id="question-palette"></div>
        </div>
    </div>

    <button class="palette-toggle-btn" id="palette-toggle">
        <i class="fas fa-th"></i>
    </button>

            <div id="result" class="container">
            <div id="score"></div>
            <div class="score-details">
                <div class="score-card">
                    <h3>Total Questions</h3>
                    <div id="total-questions">0</div>
                </div>
                <div class="score-card">
                    <h3>Attempted</h3>
                    <div id="attempted-questions">0</div>
                </div>
                <div class="score-card">
                    <h3>Correct</h3>
                    <div id="correct-answers">0</div>
                </div>
                <div class="score-card">
                    <h3>Accuracy</h3>
                    <div id="accuracy">0%</div>
                </div>
            </div>
            <div class="analytics-container">
                <h3>Performance Analysis</h3>
                <div class="chart-container" id="performance-chart"></div>
                <button id="download-analysis" class="download-btn"><i class="fas fa-download"></i> Download Analysis</button>
            </div>
            <div id="answers"></div>
            <div style="text-align: center; margin-top: 30px; padding-top: 20px; border-top: 1px solid var(--border-color);">
                <button id="bottom-download-analysis" class="download-btn"><i class="fas fa-download"></i> Download Analysis</button>
            </div>
        </div>

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script>
        // Test data
        const testData = {"test_info": {"title": "Paid Filler PART - (I) SSC CGL PRE 2024", "duration": "10", "total_questions": 20, "max_marks": 40, "marks_per_question": 2.0, "negative_marks": 0.5}, "questions": [{"question_number": 1, "question_text": "<strong>Select the most appropriate option to fill in the blank.</strong> <br /> Vinod had a ________ escape in the car accident.", "options": ["1) comfortable\n                                                    <input class=\"question_options0\" name=\"selected_option_0\" type=\"radio\" value=\"495061_120337\"/>\n<span class=\"checkmark radio_check0\"></span>", "2) full\n                                                    <input class=\"question_options1\" name=\"selected_option_0\" type=\"radio\" value=\"495062_120337\"/>\n<span class=\"checkmark radio_check1\"></span>", "3) narrow\n                                                    <input checked=\"checked\" class=\"question_options2\" name=\"selected_option_0\" type=\"radio\" value=\"495063_120337\"/>\n<span class=\"checkmark radio_check2\"></span>", "4) Wide\n                                                    <input class=\"question_options3\" name=\"selected_option_0\" type=\"radio\" value=\"495064_120337\"/>\n<span class=\"checkmark radio_check3\"></span>"], "correct_answer": 3, "correct_option": "3) narrow\n                                                    <input checked=\"checked\" class=\"question_options2\" name=\"selected_option_0\" type=\"radio\" value=\"495063_120337\"/>\n<span class=\"checkmark radio_check2\"></span>", "explanation": "C)Narrow'का use होगा क्योंकि\"narrow escape\" का अर्थ होता है किसी खतरे या दुर्घटना से बहुत मुश्किल से बचना। sentence में बताया गया है कि Vinod कार दुर्घटना में मुश्किल से बच पाया, इसलिए 'narrow' यहाँ सही है। जबकि 'comfortable' का अर्थ है आरामदायक, 'full' का अर्थ है पूर्ण, और 'wide' का अर्थ है चौड़ा, जो इस context में सही नहीं हैं। <br /> Narrow'will be used because \"narrow escape\" means a close or barely avoided danger or accident. The sentence indicates that Vinod barely escaped the car accident, making 'narrow' the correct choice here. Whereas, 'comfortable' means relaxing, 'full' means complete, and 'wide' means broad, which do not fit in this context.", "marks": {"positive": 2.0, "negative": 0.5}}, {"question_number": 2, "question_text": "<strong>Select the most appropriate option to fill in the blank.</strong> <br /> The group of travellers were wonderstruck by the ___________ of the coin.", "options": ["1) white\n                                                    <input class=\"question_options0\" name=\"selected_option_1\" type=\"radio\" value=\"495173_120365\"/>\n<span class=\"checkmark radio_check0\"></span>", "2) wait\n                                                    <input class=\"question_options1\" name=\"selected_option_1\" type=\"radio\" value=\"495174_120365\"/>\n<span class=\"checkmark radio_check1\"></span>", "3) weight\n                                                    <input checked=\"checked\" class=\"question_options2\" name=\"selected_option_1\" type=\"radio\" value=\"495175_120365\"/>\n<span class=\"checkmark radio_check2\"></span>", "4) wide\n                                                    <input class=\"question_options3\" name=\"selected_option_1\" type=\"radio\" value=\"495176_120365\"/>\n<span class=\"checkmark radio_check3\"></span>"], "correct_answer": 3, "correct_option": "3) weight\n                                                    <input checked=\"checked\" class=\"question_options2\" name=\"selected_option_1\" type=\"radio\" value=\"495175_120365\"/>\n<span class=\"checkmark radio_check2\"></span>", "explanation": "C)Weight'का use होगा क्योंकि \"weight\" का अर्थ होता है किसी वस्तु का भार। वाक्य में कहा गया है कि यात्रियों का समूह सिक्के के 'weight' से हैरान था, जिससे पता चलता है कि वे सिक्के के भारीपन से आश्चर्यचकित थे। जबकि 'White' का अर्थ है सफेद, 'Wait' का अर्थ है प्रतीक्षा करना, और 'Wide' का अर्थ है चौड़ा होना, जो इस संदर्भ में उपयुक्त नहीं हैं। <br /> 'Weight'will be used because it means the heaviness of an object. The sentence states that the group of travelers was wonderstruck by the 'weight' of the coin, indicating that they were surprised by its heaviness. Whereas, 'White' means the color white, 'Wait' means to remain in expectation, and 'Wide' means broad, which are not suitable in this context.", "marks": {"positive": 2.0, "negative": 0.5}}, {"question_number": 3, "question_text": "<strong>Select the most appropriate option to fill in the blank.</strong> <br /> Two of the fugitives managed to remain free by adeptly avoiding the____________ of the police.", "options": ["1) discovery\n                                                    <input class=\"question_options0\" name=\"selected_option_2\" type=\"radio\" value=\"495217_120376\"/>\n<span class=\"checkmark radio_check0\"></span>", "2) pursuit\n                                                    <input checked=\"checked\" class=\"question_options1\" name=\"selected_option_2\" type=\"radio\" value=\"495218_120376\"/>\n<span class=\"checkmark radio_check1\"></span>", "3) repression\n                                                    <input class=\"question_options2\" name=\"selected_option_2\" type=\"radio\" value=\"495219_120376\"/>\n<span class=\"checkmark radio_check2\"></span>", "4) following\n                                                    <input class=\"question_options3\" name=\"selected_option_2\" type=\"radio\" value=\"495220_120376\"/>\n<span class=\"checkmark radio_check3\"></span>"], "correct_answer": 2, "correct_option": "2) pursuit\n                                                    <input checked=\"checked\" class=\"question_options1\" name=\"selected_option_2\" type=\"radio\" value=\"495218_120376\"/>\n<span class=\"checkmark radio_check1\"></span>", "explanation": "B)Pursuit'का use होगा क्योंकि \"pursuit\" का अर्थ होता है किसी को पकड़ने का प्रयास करना या पीछे आना। sentence में बताया गया है कि दोनों भगोड़े पुलिस के प्रयासों से बचने में सक्षम रहे, इसलिए 'pursuit' यहाँ सही है। जबकि 'discovery' का अर्थ है खोज या पता लगाना, 'repression' का अर्थ है दमन या दबाना, और 'following' का अर्थ है अनुसरण करना, जो इस संदर्भ में सही नहीं है। <br /> 'Pursuit'will be used because it means the act of trying to catch someone or follow closely. The sentence indicates that the fugitives managed to stay free by avoiding the police's attempts to capture them, making 'pursuit' the fitting choice here. Whereas, 'discovery' means to find or detect, 'repression' means to suppress or control, and 'following' means to trail or come after, which do not fit in this context.", "marks": {"positive": 2.0, "negative": 0.5}}, {"question_number": 4, "question_text": "<strong>Select the most appropriate option to fill in the blank.</strong> <br /> Kamal is not willing to purchase a house on the 12th floor of a sea-side apartment, as she is fearful of heights. She is suffering from ___________.", "options": ["1) heliophobia\n                                                    <input class=\"question_options0\" name=\"selected_option_3\" type=\"radio\" value=\"495261_120387\"/>\n<span class=\"checkmark radio_check0\"></span>", "2) sociophobia\n                                                    <input class=\"question_options1\" name=\"selected_option_3\" type=\"radio\" value=\"495262_120387\"/>\n<span class=\"checkmark radio_check1\"></span>", "3) claustrophobia\n                                                    <input class=\"question_options2\" name=\"selected_option_3\" type=\"radio\" value=\"495263_120387\"/>\n<span class=\"checkmark radio_check2\"></span>", "4) acrophobia\n                                                    <input checked=\"checked\" class=\"question_options3\" name=\"selected_option_3\" type=\"radio\" value=\"495264_120387\"/>\n<span class=\"checkmark radio_check3\"></span>"], "correct_answer": 4, "correct_option": "4) acrophobia\n                                                    <input checked=\"checked\" class=\"question_options3\" name=\"selected_option_3\" type=\"radio\" value=\"495264_120387\"/>\n<span class=\"checkmark radio_check3\"></span>", "explanation": "D)Acrophobia'का use होगा क्योंकि \"acrophobia\" का अर्थ है ऊँचाई का डर। sentence में mentions है कि कमल 12वीं मंजिल पर घर नहीं खरीदना चाहती क्योंकि उसे ऊँचाई से डर लगता है, इसलिए 'acrophobia' यहाँ सही विकल्प है। जबकि 'Heliophobia' का अर्थ है सूर्य का डर, 'Sociophobia' का अर्थ है सामाजिक स्थितियों का डर, और 'Claustrophobia' का अर्थ है बंद जगहों का डर, जो इस context में सही नहीं हैं। <br /> 'Acrophobia'will be used because it means the fear of heights. The sentence mentions that Kamal is not willing to purchase a house on the 12th floor because she is fearful of heights, making 'acrophobia' the correct option here. Whereas, 'Heliophobia' means fear of the sun, 'Sociophobia' means fear of social situations, and 'Claustrophobia' means fear of enclosed spaces, which don't fit in this context.", "marks": {"positive": 2.0, "negative": 0.5}}, {"question_number": 5, "question_text": "<strong>Select the most appropriate option to fill in the blank.</strong> <br /> The homophone for the word ‘there’ is _________.", "options": ["1) those\n                                                    <input class=\"question_options0\" name=\"selected_option_4\" type=\"radio\" value=\"495265_120388\"/>\n<span class=\"checkmark radio_check0\"></span>", "2) their\n                                                    <input checked=\"checked\" class=\"question_options1\" name=\"selected_option_4\" type=\"radio\" value=\"495266_120388\"/>\n<span class=\"checkmark radio_check1\"></span>", "3) that\n                                                    <input class=\"question_options2\" name=\"selected_option_4\" type=\"radio\" value=\"495267_120388\"/>\n<span class=\"checkmark radio_check2\"></span>", "4) clear\n                                                    <input class=\"question_options3\" name=\"selected_option_4\" type=\"radio\" value=\"495268_120388\"/>\n<span class=\"checkmark radio_check3\"></span>"], "correct_answer": 2, "correct_option": "2) their\n                                                    <input checked=\"checked\" class=\"question_options1\" name=\"selected_option_4\" type=\"radio\" value=\"495266_120388\"/>\n<span class=\"checkmark radio_check1\"></span>", "explanation": "B)'their'का use होगा क्योंकि 'there' का उपयोग किसी स्थान को इंगित करने के लिए किया जाता है, जबकि 'their' का use स्वामित्व (ownership) को दर्शाने के लिए होता है। इस sentence में \"homophone\" का मतलब होता है एक जैसा उच्चारण पर अलग अर्थ रखने वाले शब्द। इसलिए, 'their' सही answer है। 'Those' का अर्थ है 'वे' और इसका उच्चारण 'there' से अलग है, इसलिए यह सही answer नहीं है। 'That' का अर्थ है 'वह' और यह भी 'there' का homophone नहीं है। 'Clear' का अर्थ है 'स्पष्ट' और इसका भी 'there' से कोई संबंध नहीं है। <br /> 'Their'will be used because it is a homophone of 'there,' meaning both have the same pronunciation but different meanings and usage. 'There' is used to indicate a place, while 'their' indicates possession. The sentence asks for a homophone, so 'their' is the correct answer. Those' means 'these' and is pronounced differently from 'there,' so it’s not the right option. <br /> 'That' means 'that' and is also not a homophone of 'there.' 'Clear' means 'obvious' and has no relation to 'there.'", "marks": {"positive": 2.0, "negative": 0.5}}, {"question_number": 6, "question_text": "<strong>Select the most appropriate option to fill in the blanks.</strong> <br /> He had ________ the ________ into smaller clips.", "options": ["1) clipping, clips\n                                                    <input class=\"question_options0\" name=\"selected_option_5\" type=\"radio\" value=\"495349_120409\"/>\n<span class=\"checkmark radio_check0\"></span>", "2) clips, clipping\n                                                    <input class=\"question_options1\" name=\"selected_option_5\" type=\"radio\" value=\"495350_120409\"/>\n<span class=\"checkmark radio_check1\"></span>", "3) clipped, clipping\n                                                    <input checked=\"checked\" class=\"question_options2\" name=\"selected_option_5\" type=\"radio\" value=\"495351_120409\"/>\n<span class=\"checkmark radio_check2\"></span>", "4) clipping, clipped\n                                                    <input class=\"question_options3\" name=\"selected_option_5\" type=\"radio\" value=\"495352_120409\"/>\n<span class=\"checkmark radio_check3\"></span>"], "correct_answer": 3, "correct_option": "3) clipped, clipping\n                                                    <input checked=\"checked\" class=\"question_options2\" name=\"selected_option_5\" type=\"radio\" value=\"495351_120409\"/>\n<span class=\"checkmark radio_check2\"></span>", "explanation": "'C)Clipped'का उपयोग होगा क्योंकि \"clipped\" का अर्थ है किसी वस्तु को छोटे हिस्सों में काटना या विभाजित करना। वाक्य में कहा गया है कि उसने किसी 'clipping' को छोटे-छोटे क्लिप्स में विभाजित किया है, जिससे स्पष्ट होता है कि 'clipped' का उपयोग करना सही है। दूसरे शब्दों में, वाक्य का अर्थ है कि उसने पहले से ही 'clipping' (जिसका अर्थ है कटा हुआ हिस्सा या क्लिप किया गया) को छोटे-छोटे क्लिप्स में विभाजित किया है। इसलिए, पहले भाग में 'clipped' का उपयोग सही है और दूसरे भाग में 'clipping' का उपयोग, क्योंकि यह उस मुख्य वस्तु का उल्लेख कर रहा है जिसे विभाजित किया गया है। Clipping' या 'clips' का पहला स्थान पर उपयोग गलत है क्योंकि वाक्य का संदर्भ उस प्रक्रिया (clipped) की ओर है, जिसमें उसने किसी मुख्य वस्तु को छोटे हिस्सों में बांटा। इसलिए, पहले स्थान पर 'clipping' का उपयोग नहीं किया जा सकता। 'Clipping, clips' और 'clipped, clipped' भी गलत हैं क्योंकि इनमें शब्दों का प्रयोग वाक्य की सामान्य संरचना और संदर्भ को सही से व्यक्त नहीं करता। <br /> Clipped' will be usedbecause \"clipped\" means to cut or divide something into smaller parts. The sentence indicates that he divided the'clipping' into smaller clips, so using \"clipped\" here is grammatically correct. In other words, the sentence implies that he has already cut or divided the'clipping'(which means a cut portion or something that has been clipped) into smaller clips. Hence, the first part should use 'clipped,' and the second part should use 'clipping,' as it refers to the main item that is being divided Using 'Clipping' or 'clips' in the first position is incorrect because the sentence is referring to the process of cutting or dividing (clipped), and so 'clipping' cannot be used at the beginning. Similarly, 'Clipping, clips' and 'clipped, clipped' are incorrect as they do not convey the sentence's meaning in a clear and structured manner.", "marks": {"positive": 2.0, "negative": 0.5}}, {"question_number": 7, "question_text": "<strong>Select the most appropriate option to fill in the blank.</strong> <br /> We have postponed this movie outing too many times, so we are going tomorrow, come _____ or shine.", "options": ["1) hail\n                                                    <input class=\"question_options0\" name=\"selected_option_6\" type=\"radio\" value=\"495353_120410\"/>\n<span class=\"checkmark radio_check0\"></span>", "2) rain\n                                                    <input checked=\"checked\" class=\"question_options1\" name=\"selected_option_6\" type=\"radio\" value=\"495354_120410\"/>\n<span class=\"checkmark radio_check1\"></span>", "3) mountain\n                                                    <input class=\"question_options2\" name=\"selected_option_6\" type=\"radio\" value=\"495355_120410\"/>\n<span class=\"checkmark radio_check2\"></span>", "4) thunder\n                                                    <input class=\"question_options3\" name=\"selected_option_6\" type=\"radio\" value=\"495356_120410\"/>\n<span class=\"checkmark radio_check3\"></span>"], "correct_answer": 2, "correct_option": "2) rain\n                                                    <input checked=\"checked\" class=\"question_options1\" name=\"selected_option_6\" type=\"radio\" value=\"495354_120410\"/>\n<span class=\"checkmark radio_check1\"></span>", "explanation": "B)Rain or shine(phrase) – regardless of the weather or circumstances; in any event चाहे जैसा मौसम हो", "marks": {"positive": 2.0, "negative": 0.5}}, {"question_number": 8, "question_text": "<strong>Select the most appropriate option to fill in the blank.</strong> <br /> After years of fights with his neighbour Ram, Shekhar decided to hold out the _______ and invited Ram for tea.", "options": ["1) poker face\n                                                    <input class=\"question_options0\" name=\"selected_option_7\" type=\"radio\" value=\"495377_120416\"/>\n<span class=\"checkmark radio_check0\"></span>", "2) comparing apples to oranges\n                                                    <input class=\"question_options1\" name=\"selected_option_7\" type=\"radio\" value=\"495378_120416\"/>\n<span class=\"checkmark radio_check1\"></span>", "3) chip on shoulder\n                                                    <input class=\"question_options2\" name=\"selected_option_7\" type=\"radio\" value=\"495379_120416\"/>\n<span class=\"checkmark radio_check2\"></span>", "4) olive branch\n                                                    <input checked=\"checked\" class=\"question_options3\" name=\"selected_option_7\" type=\"radio\" value=\"495380_120416\"/>\n<span class=\"checkmark radio_check3\"></span>"], "correct_answer": 4, "correct_option": "4) olive branch\n                                                    <input checked=\"checked\" class=\"question_options3\" name=\"selected_option_7\" type=\"radio\" value=\"495380_120416\"/>\n<span class=\"checkmark radio_check3\"></span>", "explanation": "D)Olive branch(idiom) – A symbol or gesture of peace or reconciliation शांति या मेल-मिलाप का संकेत <br /> Poker face(idiom) – An expressionless face that hides one’s emotions भावहीन चेहरा <br /> Comparing apples to oranges(idiom) – To compare two things that are not comparable तुलनीय चीजों की तुलना न करना <br /> Chip on shoulder(idiom) – Holding a grudge or feeling resentment नाराजगी या द्वेष रखना", "marks": {"positive": 2.0, "negative": 0.5}}, {"question_number": 9, "question_text": "<strong>Select the most appropriate option to fill in the blank.</strong> <br /> To __________ the ticket, Amith had to visit the travel agency many times.", "options": ["1) contract\n                                                    <input class=\"question_options0\" name=\"selected_option_8\" type=\"radio\" value=\"495381_120417\"/>\n<span class=\"checkmark radio_check0\"></span>", "2) confirm\n                                                    <input checked=\"checked\" class=\"question_options1\" name=\"selected_option_8\" type=\"radio\" value=\"495382_120417\"/>\n<span class=\"checkmark radio_check1\"></span>", "3) conform\n                                                    <input class=\"question_options2\" name=\"selected_option_8\" type=\"radio\" value=\"495383_120417\"/>\n<span class=\"checkmark radio_check2\"></span>", "4) convention\n                                                    <input class=\"question_options3\" name=\"selected_option_8\" type=\"radio\" value=\"495384_120417\"/>\n<span class=\"checkmark radio_check3\"></span>"], "correct_answer": 2, "correct_option": "2) confirm\n                                                    <input checked=\"checked\" class=\"question_options1\" name=\"selected_option_8\" type=\"radio\" value=\"495382_120417\"/>\n<span class=\"checkmark radio_check1\"></span>", "explanation": "B)Confirm'का उपयोग होगा क्योंकि \"confirm\" का अर्थ है किसी चीज़ की पुष्टि करना या निश्चित करना। वाक्य में यह उल्लेख किया गया है कि अमिथ को टिकट की पुष्टि करने के लिए कई बार ट्रैवल एजेंसी जाना पड़ा, इसलिए 'confirm' यहाँ सही है। जबकि 'Contract' का अर्थ है अनुबंध करना, 'Conform' का अर्थ है किसी नियम या मानक के अनुसार होना, और 'Convention' का अर्थ है परंपरा या सम्मेलन, जो इस संदर्भ में सही नहीं है। <br /> 'Confirm'will be used because it means to verify or make something certain. The sentence mentions that Amith had to visit the travel agency several times to confirm the ticket, making 'confirm' the right choice here. Whereas, 'Contract' means to enter into a formal agreement, 'Conform' means to comply with rules or standards, and 'Convention' means a traditional practice or meeting, which do not fit in this context.", "marks": {"positive": 2.0, "negative": 0.5}}, {"question_number": 10, "question_text": "<strong>Select the most appropriate option to fill in the blank.</strong> <br /> Ram went to _____ an ice cream.", "options": ["1) bye\n                                                    <input class=\"question_options0\" name=\"selected_option_9\" type=\"radio\" value=\"495405_120423\"/>\n<span class=\"checkmark radio_check0\"></span>", "2) by\n                                                    <input class=\"question_options1\" name=\"selected_option_9\" type=\"radio\" value=\"495406_120423\"/>\n<span class=\"checkmark radio_check1\"></span>", "3) buy\n                                                    <input checked=\"checked\" class=\"question_options2\" name=\"selected_option_9\" type=\"radio\" value=\"495407_120423\"/>\n<span class=\"checkmark radio_check2\"></span>", "4) Byre\n                                                    <input class=\"question_options3\" name=\"selected_option_9\" type=\"radio\" value=\"495408_120423\"/>\n<span class=\"checkmark radio_check3\"></span>"], "correct_answer": 3, "correct_option": "3) buy\n                                                    <input checked=\"checked\" class=\"question_options2\" name=\"selected_option_9\" type=\"radio\" value=\"495407_120423\"/>\n<span class=\"checkmark radio_check2\"></span>", "explanation": "C)'Buy'का use होगा क्योंकि \"buy\" का अर्थ होता है खरीदना। sentence में mention है कि राम आइसक्रीम खरीदने गया, इसलिए 'buy' यहाँ सही है। जबकि: 'Bye' का अर्थ होता है विदाई देना, जो इस संदर्भ में सही नहीं है। 'By' का उपयोग किसी स्थान या व्यक्ति के पास से गुजरने या स्थिति को बताने के लिए होता है, जो इस sentence में suitable नहीं है। 'Byre' का अर्थ गायों का तबेला होता है, जो बिल्कुल भी इस वाक्य में उपयुक्त नहीं है। <br /> 'Buy'will be used because \"buy\" means to purchase. The sentence mentions that Ram went to buy an ice cream, so 'buy' is correct here. Whereas: Bye' means to say goodbye, which doesn’t fit in this context. 'By' is used to indicate proximity or location, which is not suitable in this sentence. 'Byre' refers to a cowshed, which is entirely irrelevant in this context.", "marks": {"positive": 2.0, "negative": 0.5}}, {"question_number": 11, "question_text": "<strong>Select the most appropriate verb / verb phrase to fill in the blank.</strong> <br /> They ________________ their house for the past two months, and it’s finally starting to look fantastic.", "options": ["1) have been renovating\n                                                    <input checked=\"checked\" class=\"question_options0\" name=\"selected_option_10\" type=\"radio\" value=\"495509_120449\"/>\n<span class=\"checkmark radio_check0\"></span>", "2) were renovating\n                                                    <input class=\"question_options1\" name=\"selected_option_10\" type=\"radio\" value=\"495510_120449\"/>\n<span class=\"checkmark radio_check1\"></span>", "3) will renovate\n                                                    <input class=\"question_options2\" name=\"selected_option_10\" type=\"radio\" value=\"495511_120449\"/>\n<span class=\"checkmark radio_check2\"></span>", "4) has renovated\n                                                    <input class=\"question_options3\" name=\"selected_option_10\" type=\"radio\" value=\"495512_120449\"/>\n<span class=\"checkmark radio_check3\"></span>"], "correct_answer": 1, "correct_option": "1) have been renovating\n                                                    <input checked=\"checked\" class=\"question_options0\" name=\"selected_option_10\" type=\"radio\" value=\"495509_120449\"/>\n<span class=\"checkmark radio_check0\"></span>", "explanation": "A)'Have been renovating'का use होगा क्योंकि present perfect continuous tense का use ऐसी क्रियाओं के लिए किया जाता है जो past में शुरू हुई थीं और अब तक जारी हैं। sentence में यह बताया गया है कि घर की मरम्मत पिछले दो महीनों से की जा रही है और परिणामस्वरूप यह अब शानदार दिखने लगा है। इसलिए 'have been renovating' यहाँ सही option है। <br /> 'Have been renovating' is used because the present perfect continuous tense describes actions that started in the past and continue to the present. The sentence mentions that they’ve been working on their house for two months and it’s now starting to look fantastic. Hence, 'have been renovating' is correct here.", "marks": {"positive": 2.0, "negative": 0.5}}, {"question_number": 12, "question_text": "<strong>Select the most appropriate order of the segments in the options that will fill in the blanks and make a coherent paragraph.</strong> <br /> Though Sheela loves watching horror movies,________________/________________/________________/________________ she rented another romantic today.", "options": ["1) and to her surprise she enjoyed it very much /so much so that /so she rented the latest romantic /she planned to try something different yesterday\n                                                    <input class=\"question_options0\" name=\"selected_option_11\" type=\"radio\" value=\"504207_122579\"/>\n<span class=\"checkmark radio_check0\"></span>", "2) so she rented the latest romantic / and to her surprise she enjoyed it very much / so much so that / she planned to try something different yesterday\n                                                    <input class=\"question_options1\" name=\"selected_option_11\" type=\"radio\" value=\"504208_122579\"/>\n<span class=\"checkmark radio_check1\"></span>", "3) so much so that / and to her surprise she enjoyed it very much / she planned to try something different yesterday / so she rented the latest romantic\n                                                    <input class=\"question_options2\" name=\"selected_option_11\" type=\"radio\" value=\"504209_122579\"/>\n<span class=\"checkmark radio_check2\"></span>", "4) she planned to try something different yesterday / so she rented the latest romantic / and to her surprise she enjoyed it very much / so much so that\n                                                    <input checked=\"checked\" class=\"question_options3\" name=\"selected_option_11\" type=\"radio\" value=\"504210_122579\"/>\n<span class=\"checkmark radio_check3\"></span>"], "correct_answer": 4, "correct_option": "4) she planned to try something different yesterday / so she rented the latest romantic / and to her surprise she enjoyed it very much / so much so that\n                                                    <input checked=\"checked\" class=\"question_options3\" name=\"selected_option_11\" type=\"radio\" value=\"504210_122579\"/>\n<span class=\"checkmark radio_check3\"></span>", "explanation": "D)' का उपयोग होगा क्योंकि यह क्रम एक coherent और logical flow बनाए रखता है। \"Though Sheela loves watching horror movies\" का अर्थ है कि शीला को हॉरर मूवीज़ पसंद हैं, लेकिन उसने कुछ अलग ट्राय करने की योजना बनाई (she planned to try something different yesterday), इसलिए उसने एक रोमांटिक मूवी किराए पर ली (so she rented the latest romantic), और उसे यह बहुत पसंद आई (and to her surprise she enjoyed it very much)। \"so much so that\" का प्रयोग तब किया गया जब यह बताया गया कि उसे यह मूवी कितनी पसंद आई। <br /> 'D' will be used because this sequence maintains coherence and a logical flow. The sentence starts with \"Though Sheela loves watching horror movies,\" which suggests that Sheela enjoys horror movies, but she planned to try something different (she planned to try something different yesterday), so she rented a romantic movie (so she rented the latest romantic), and to her surprise, she enjoyed it very much (and to her surprise she enjoyed it very much). \"so much so that\" comes when describing the extent of her enjoyment.", "marks": {"positive": 2.0, "negative": 0.5}}, {"question_number": 13, "question_text": "<strong>Select the most appropriate option to fill in the blank.</strong> <br /> The US ________ building was built in the year 1800.", "options": ["1) capital\n                                                    <input class=\"question_options0\" name=\"selected_option_12\" type=\"radio\" value=\"504211_122580\"/>\n<span class=\"checkmark radio_check0\"></span>", "2) captain\n                                                    <input class=\"question_options1\" name=\"selected_option_12\" type=\"radio\" value=\"504212_122580\"/>\n<span class=\"checkmark radio_check1\"></span>", "3) capitol\n                                                    <input checked=\"checked\" class=\"question_options2\" name=\"selected_option_12\" type=\"radio\" value=\"504213_122580\"/>\n<span class=\"checkmark radio_check2\"></span>", "4) cannibal\n                                                    <input class=\"question_options3\" name=\"selected_option_12\" type=\"radio\" value=\"504214_122580\"/>\n<span class=\"checkmark radio_check3\"></span>"], "correct_answer": 3, "correct_option": "3) capitol\n                                                    <input checked=\"checked\" class=\"question_options2\" name=\"selected_option_12\" type=\"radio\" value=\"504213_122580\"/>\n<span class=\"checkmark radio_check2\"></span>", "explanation": "C)Capitolका use होगा क्योंकि यह विशेष रूप से उस इमारत को संदर्भित करता है जहाँ अमेरिका की सरकार काम करती है। sentence में अमेरिकी इमारत के निर्माण का उल्लेख किया गया है, इसलिए 'Capitol' सही है। जबकि 'Capital' का अर्थ है कोई राजधानी या वित्तीय संसाधन, 'Captain' का अर्थ है किसी टीम का नेता या अधिकारी, और 'Cannibal' का अर्थ है नरभक्षी, जो इस context में गलत हैं। <br /> Capitolwill be used because it refers to the specific building where the U.S. government operates. The sentence mentions the construction of a U.S. building, so 'Capitol' is correct here. Meanwhile, 'Capital' means a city that serves as a seat of government or financial resources, 'Captain' refers to a leader or officer of a team, and 'Cannibal' means someone who eats human flesh, which don't fit in this context.", "marks": {"positive": 2.0, "negative": 0.5}}, {"question_number": 14, "question_text": "<strong>Select the correctly spelt word to fill in the blank.</strong> <br /> My mother said that every relationship must have some amount of ___________.", "options": ["1) flaxibilety\n                                                    <input class=\"question_options0\" name=\"selected_option_13\" type=\"radio\" value=\"504215_122581\"/>\n<span class=\"checkmark radio_check0\"></span>", "2) flexibility\n                                                    <input checked=\"checked\" class=\"question_options1\" name=\"selected_option_13\" type=\"radio\" value=\"504216_122581\"/>\n<span class=\"checkmark radio_check1\"></span>", "3) phlexibility\n                                                    <input class=\"question_options2\" name=\"selected_option_13\" type=\"radio\" value=\"504217_122581\"/>\n<span class=\"checkmark radio_check2\"></span>", "4) flexebelity\n                                                    <input class=\"question_options3\" name=\"selected_option_13\" type=\"radio\" value=\"504218_122581\"/>\n<span class=\"checkmark radio_check3\"></span>"], "correct_answer": 2, "correct_option": "2) flexibility\n                                                    <input checked=\"checked\" class=\"question_options1\" name=\"selected_option_13\" type=\"radio\" value=\"504216_122581\"/>\n<span class=\"checkmark radio_check1\"></span>", "explanation": "B) The correct spelling of the word is ‘flexibility’(Option B), which means “the quality of bending easily without breaking; adaptability” (लचीलेपन की क्षमता).", "marks": {"positive": 2.0, "negative": 0.5}}, {"question_number": 15, "question_text": "<strong>Select the correctly spelt word to fill in the blank.</strong> <br /> My grandmother ________________ the preparation of every festival celebration in my House", "options": ["1) inetiates\n                                                    <input class=\"question_options0\" name=\"selected_option_14\" type=\"radio\" value=\"504223_122583\"/>\n<span class=\"checkmark radio_check0\"></span>", "2) initiates\n                                                    <input checked=\"checked\" class=\"question_options1\" name=\"selected_option_14\" type=\"radio\" value=\"504224_122583\"/>\n<span class=\"checkmark radio_check1\"></span>", "3) enitiates\n                                                    <input class=\"question_options2\" name=\"selected_option_14\" type=\"radio\" value=\"504225_122583\"/>\n<span class=\"checkmark radio_check2\"></span>", "4) enetiates\n                                                    <input class=\"question_options3\" name=\"selected_option_14\" type=\"radio\" value=\"504226_122583\"/>\n<span class=\"checkmark radio_check3\"></span>"], "correct_answer": 2, "correct_option": "2) initiates\n                                                    <input checked=\"checked\" class=\"question_options1\" name=\"selected_option_14\" type=\"radio\" value=\"504224_122583\"/>\n<span class=\"checkmark radio_check1\"></span>", "explanation": "B) The correctly spelt word is‘initiates’, which means “to cause (a process or action) to begin” प्रारंभ करना.", "marks": {"positive": 2.0, "negative": 0.5}}, {"question_number": 16, "question_text": "<strong>Select the correct spelling to fill in the blank.</strong> <br /> I often fail to ______ remember someone’s name.", "options": ["1) acusatively\n                                                    <input class=\"question_options0\" name=\"selected_option_15\" type=\"radio\" value=\"504231_122585\"/>\n<span class=\"checkmark radio_check0\"></span>", "2) accurately\n                                                    <input checked=\"checked\" class=\"question_options1\" name=\"selected_option_15\" type=\"radio\" value=\"504232_122585\"/>\n<span class=\"checkmark radio_check1\"></span>", "3) accuratially\n                                                    <input class=\"question_options2\" name=\"selected_option_15\" type=\"radio\" value=\"504233_122585\"/>\n<span class=\"checkmark radio_check2\"></span>", "4) accuriately\n                                                    <input class=\"question_options3\" name=\"selected_option_15\" type=\"radio\" value=\"504234_122585\"/>\n<span class=\"checkmark radio_check3\"></span>"], "correct_answer": 2, "correct_option": "2) accurately\n                                                    <input checked=\"checked\" class=\"question_options1\" name=\"selected_option_15\" type=\"radio\" value=\"504232_122585\"/>\n<span class=\"checkmark radio_check1\"></span>", "explanation": "B) The correct spelling to fill in the blank is'accurately', which means \"in a way that is correct in all details\" (सटीक ढंग से).", "marks": {"positive": 2.0, "negative": 0.5}}, {"question_number": 17, "question_text": "<strong>Select the most appropriate phrasal verb to fill in the blank.</strong> <br /> We need to __________ a solution to this problem before it gets worse.", "options": ["1) break up\n                                                    <input class=\"question_options0\" name=\"selected_option_16\" type=\"radio\" value=\"504235_122586\"/>\n<span class=\"checkmark radio_check0\"></span>", "2) come up with\n                                                    <input checked=\"checked\" class=\"question_options1\" name=\"selected_option_16\" type=\"radio\" value=\"504236_122586\"/>\n<span class=\"checkmark radio_check1\"></span>", "3) cut down on\n                                                    <input class=\"question_options2\" name=\"selected_option_16\" type=\"radio\" value=\"504237_122586\"/>\n<span class=\"checkmark radio_check2\"></span>", "4) break down\n                                                    <input class=\"question_options3\" name=\"selected_option_16\" type=\"radio\" value=\"504238_122586\"/>\n<span class=\"checkmark radio_check3\"></span>"], "correct_answer": 2, "correct_option": "2) come up with\n                                                    <input checked=\"checked\" class=\"question_options1\" name=\"selected_option_16\" type=\"radio\" value=\"504236_122586\"/>\n<span class=\"checkmark radio_check1\"></span>", "explanation": "B)come up with(phrasal verb) – to think of or suggest an idea, plan, or solution. समाधान सुझाना <br /> break up(phrasal verb) – to end a relationship or disperse a group. समाप्त करना <br /> cut down on(phrasal verb) – to reduce the amount of something. कमी करना <br /> break down(phrasal verb) – to stop functioning or collapse emotionally. विफल होना या भावनात्मक रूप से टूटना", "marks": {"positive": 2.0, "negative": 0.5}}, {"question_number": 18, "question_text": "<strong>Select the correct spelling to fill in the blank.</strong> <br /> Definitions of _________ are subjective to various interpretations.", "options": ["1) sovereignty\n                                                    <input checked=\"checked\" class=\"question_options0\" name=\"selected_option_17\" type=\"radio\" value=\"504239_122587\"/>\n<span class=\"checkmark radio_check0\"></span>", "2) suvereignty\n                                                    <input class=\"question_options1\" name=\"selected_option_17\" type=\"radio\" value=\"504240_122587\"/>\n<span class=\"checkmark radio_check1\"></span>", "3) soverenty\n                                                    <input class=\"question_options2\" name=\"selected_option_17\" type=\"radio\" value=\"504241_122587\"/>\n<span class=\"checkmark radio_check2\"></span>", "4) sovereinity\n                                                    <input class=\"question_options3\" name=\"selected_option_17\" type=\"radio\" value=\"504242_122587\"/>\n<span class=\"checkmark radio_check3\"></span>"], "correct_answer": 1, "correct_option": "1) sovereignty\n                                                    <input checked=\"checked\" class=\"question_options0\" name=\"selected_option_17\" type=\"radio\" value=\"504239_122587\"/>\n<span class=\"checkmark radio_check0\"></span>", "explanation": "A) The correct spelling of ‘suvereignty’is ‘sovereignty,’ which means \"supreme power or authority\" (सर्वोच्च सत्ता या अधिकार).", "marks": {"positive": 2.0, "negative": 0.5}}, {"question_number": 19, "question_text": "<strong>Select the most appropriate option to fill in the blank.</strong> <br /> Sharat is always ______ about showing up for work because he believes that tardiness gets us nowhere.", "options": ["1) drowsy\n                                                    <input class=\"question_options0\" name=\"selected_option_18\" type=\"radio\" value=\"504243_122588\"/>\n<span class=\"checkmark radio_check0\"></span>", "2) selective\n                                                    <input class=\"question_options1\" name=\"selected_option_18\" type=\"radio\" value=\"504244_122588\"/>\n<span class=\"checkmark radio_check1\"></span>", "3) patient\n                                                    <input class=\"question_options2\" name=\"selected_option_18\" type=\"radio\" value=\"504245_122588\"/>\n<span class=\"checkmark radio_check2\"></span>", "4) punctual\n                                                    <input checked=\"checked\" class=\"question_options3\" name=\"selected_option_18\" type=\"radio\" value=\"504246_122588\"/>\n<span class=\"checkmark radio_check3\"></span>"], "correct_answer": 4, "correct_option": "4) punctual\n                                                    <input checked=\"checked\" class=\"question_options3\" name=\"selected_option_18\" type=\"radio\" value=\"504246_122588\"/>\n<span class=\"checkmark radio_check3\"></span>", "explanation": "D)Punctual'का use होगा क्योंकि \"punctual\" का अर्थ होता है समय पर उपस्थित होना। वाक्य में कहा गया है कि शरत काम पर उपस्थित होने को लेकर हमेशा समय के पाबंद रहते हैं, क्योंकि वे मानते हैं कि देर से आना हमें कहीं नहीं ले जाता। इसलिए 'punctual' यहाँ सही है। जबकि 'drowsy' का अर्थ है उनींदा होना, 'selective' का अर्थ है चुनाव करने वाला, और 'patient' का अर्थ है धैर्यवान, जो इस context में सही नहीं हैं। <br /> 'Punctual'will be used because it means being on time. The sentence mentions that Sharat is always mindful about showing up for work, believing that tardiness (being late) doesn't lead to success. Therefore, 'punctual' is the correct option. Whereas 'drowsy' means sleepy, 'selective' means being choosy, and 'patient' means being calm, which don't fit this context.", "marks": {"positive": 2.0, "negative": 0.5}}, {"question_number": 20, "question_text": "<strong>Select the most appropriate option to fill in the blank.</strong> <br /> Raj is very interested in studying human psychology, so he decided to pursue his master’s degree in __________.", "options": ["1) Psychology\n                                                    <input checked=\"checked\" class=\"question_options0\" name=\"selected_option_19\" type=\"radio\" value=\"504247_122589\"/>\n<span class=\"checkmark radio_check0\"></span>", "2) Philosophy\n                                                    <input class=\"question_options1\" name=\"selected_option_19\" type=\"radio\" value=\"504248_122589\"/>\n<span class=\"checkmark radio_check1\"></span>", "3) Anatomy\n                                                    <input class=\"question_options2\" name=\"selected_option_19\" type=\"radio\" value=\"504249_122589\"/>\n<span class=\"checkmark radio_check2\"></span>", "4) Archaeology\n                                                    <input class=\"question_options3\" name=\"selected_option_19\" type=\"radio\" value=\"504250_122589\"/>\n<span class=\"checkmark radio_check3\"></span>"], "correct_answer": 1, "correct_option": "1) Psychology\n                                                    <input checked=\"checked\" class=\"question_options0\" name=\"selected_option_19\" type=\"radio\" value=\"504247_122589\"/>\n<span class=\"checkmark radio_check0\"></span>", "explanation": "A)'Psychology'का उपयोग होगा क्योंकि 'Psychology' का अर्थ होता है मानव मस्तिष्क और व्यवहार का अध्ययन करना, और यहाँ वाक्य में उल्लेख किया गया है कि राज को मानव मनोविज्ञान में गहरी रुचि है, इसलिए उन्होंने मनोविज्ञान में अपनी मास्टर डिग्री करने का निर्णय लिया। जबकि 'Philosophy' का अर्थ है दर्शन, 'Anatomy' का अर्थ है शरीर की संरचना का अध्ययन, और 'Archaeology' का अर्थ है प्राचीन सभ्यताओं का अध्ययन, जो इस संदर्भ में सही नहीं है। <br /> 'Psychology'will be used because it refers to the study of the human mind and behavior. The sentence mentions that Raj is very interested in human psychology, so he decided to pursue his master's degree in this field, making 'Psychology' the most appropriate choice. Whereas 'Philosophy' means the study of knowledge and existence, 'Anatomy' refers to the study of body structure, and 'Archaeology' is the study of ancient civilizations, which are not suitable here.", "marks": {"positive": 2.0, "negative": 0.5}}, {"question_number": 21, "question_text": "<strong>Select the most appropriate option to fill in the blank.</strong> <br /> The mother couldn’t _________ such an insult from her son in front of the others.", "options": ["1) bear\n                                                    <input checked=\"checked\" class=\"question_options0\" name=\"selected_option_20\" type=\"radio\" value=\"504251_122590\"/>\n<span class=\"checkmark radio_check0\"></span>", "2) beer\n                                                    <input class=\"question_options1\" name=\"selected_option_20\" type=\"radio\" value=\"504252_122590\"/>\n<span class=\"checkmark radio_check1\"></span>", "3) bier\n                                                    <input class=\"question_options2\" name=\"selected_option_20\" type=\"radio\" value=\"504253_122590\"/>\n<span class=\"checkmark radio_check2\"></span>", "4) bare\n                                                    <input class=\"question_options3\" name=\"selected_option_20\" type=\"radio\" value=\"504254_122590\"/>\n<span class=\"checkmark radio_check3\"></span>"], "correct_answer": 1, "correct_option": "1) bear\n                                                    <input checked=\"checked\" class=\"question_options0\" name=\"selected_option_20\" type=\"radio\" value=\"504251_122590\"/>\n<span class=\"checkmark radio_check0\"></span>", "explanation": "A)Bear'का use होगा क्योंकि \"bear\" का अर्थ होता है सहन करना या बर्दाश्त करना। इस वाक्य में, माँ अपने बेटे से दूसरों के सामने अपमान सहन नहीं कर सकती थी, इसलिए 'bear' सही उत्तर है। जबकि 'Beer' का अर्थ एक प्रकार की शराब होता है, 'Bier' का अर्थ है वह तख्ता जिस पर शव रखा जाता है, और 'Bare' का अर्थ होता है नग्न या बिना ढके, जो इस वाक्य में फिट नहीं होते। <br /> 'Bear'will be used because it means to endure or tolerate something. In this sentence, the mother couldn't tolerate such an insult from her son in front of others, so 'bear' is the correct choice. Whereas, 'Beer' refers to an alcoholic drink, 'Bier' refers to a platform for a corpse, and 'Bare' means uncovered or naked, which do not fit in this context.", "marks": {"positive": 2.0, "negative": 0.5}}, {"question_number": 22, "question_text": "<strong>Select the most appropriate verb / verb phrase to fill in the blank.</strong> <br /> Akshaya ______________ hard for the entrance exam and received a high score.", "options": ["1) was studied\n                                                    <input class=\"question_options0\" name=\"selected_option_21\" type=\"radio\" value=\"504259_122592\"/>\n<span class=\"checkmark radio_check0\"></span>", "2) studied\n                                                    <input checked=\"checked\" class=\"question_options1\" name=\"selected_option_21\" type=\"radio\" value=\"504260_122592\"/>\n<span class=\"checkmark radio_check1\"></span>", "3) has studied\n                                                    <input class=\"question_options2\" name=\"selected_option_21\" type=\"radio\" value=\"504261_122592\"/>\n<span class=\"checkmark radio_check2\"></span>", "4) studies\n                                                    <input class=\"question_options3\" name=\"selected_option_21\" type=\"radio\" value=\"504262_122592\"/>\n<span class=\"checkmark radio_check3\"></span>"], "correct_answer": 1, "correct_option": "1) was studied\n                                                    <input class=\"question_options0\" name=\"selected_option_21\" type=\"radio\" value=\"504259_122592\"/>\n<span class=\"checkmark radio_check0\"></span>", "explanation": "B)Studied'का उपयोग किया जाएगा क्योंकि \"studied\" का अर्थ है अतीत में किसी कार्य को पूरा करना। वाक्य में बताया गया है कि अक्षया ने प्रवेश परीक्षा के लिए मेहनत की और उच्च अंक प्राप्त किए, जो एक पूर्व-घटित घटना है। इसलिए, 'studied' यहाँ उपयुक्त है। जबकि 'was studied' का अर्थ है कि कोई और उसे पढ़ा रहा था, जो इस context में गलत है। 'Has studied' वर्तमान पूर्णकालिक घटना को दर्शाता है, जो अतीत की घटना के लिए उपयुक्त नहीं है। 'Studies' का अर्थ है कि वह वर्तमान में पढ़ाई कर रही है, जो past tense के अनुरूप नहीं है। <br /> 'Studied'will be used because it means to complete an action in the past. The sentence mentions that Akshaya worked hard and achieved a high score, indicating a past event. Thus, 'studied' is correct here. Whereas, 'was studied' implies a passive action, which doesn't fit in this context. 'Has studied' refers to present perfect tense, which isn't suitable for a past event here. 'Studies' implies present action, which doesn’t match with the past tense context.", "marks": {"positive": 2.0, "negative": 0.5}}, {"question_number": 23, "question_text": "<strong>Select the most appropriate option to fill in the blank.</strong> <br /> I like bread made up of corn __________.", "options": ["1) flour\n                                                    <input checked=\"checked\" class=\"question_options0\" name=\"selected_option_22\" type=\"radio\" value=\"504263_122593\"/>\n<span class=\"checkmark radio_check0\"></span>", "2) floor\n                                                    <input class=\"question_options1\" name=\"selected_option_22\" type=\"radio\" value=\"504264_122593\"/>\n<span class=\"checkmark radio_check1\"></span>", "3) flower\n                                                    <input class=\"question_options2\" name=\"selected_option_22\" type=\"radio\" value=\"504265_122593\"/>\n<span class=\"checkmark radio_check2\"></span>", "4) failure\n                                                    <input class=\"question_options3\" name=\"selected_option_22\" type=\"radio\" value=\"504266_122593\"/>\n<span class=\"checkmark radio_check3\"></span>"], "correct_answer": 1, "correct_option": "1) flour\n                                                    <input checked=\"checked\" class=\"question_options0\" name=\"selected_option_22\" type=\"radio\" value=\"504263_122593\"/>\n<span class=\"checkmark radio_check0\"></span>", "explanation": "A)Flour'का उपयोग होगा क्योंकि 'flour' का अर्थ होता है अनाज का बारीक पाउडर, जिसका उपयोग खाने के लिए ब्रेड या रोटी बनाने में किया जाता है। वाक्य में 'bread made up of corn' का उल्लेख है, जो यह संकेत देता है कि मकई के आटे का उपयोग किया गया है। इसलिए, 'flour' यहाँ सही विकल्प है। Floor' का अर्थ है किसी कमरे का फर्श, Flower' का अर्थ है फूल, Failure' का अर्थ है असफलता जो इस स्थिति में सही नहीं है। <br /> 'Flour'will be used because it means finely ground powder from grains, which is commonly used to make bread or similar food items. The sentence refers to \"bread made up of corn,\" indicating corn flour is used, making 'flour' appropriate here. Floor' means the ground surface of a room Flower' means a blossom, Failure' means lack of success which does not fit in this context.", "marks": {"positive": 2.0, "negative": 0.5}}, {"question_number": 24, "question_text": "<strong>Select the most appropriate option to fill in the blank.</strong> <br /> Just bite the ______ and tell him the truth", "options": ["1) gun\n                                                    <input class=\"question_options0\" name=\"selected_option_23\" type=\"radio\" value=\"504267_122594\"/>\n<span class=\"checkmark radio_check0\"></span>", "2) dust\n                                                    <input class=\"question_options1\" name=\"selected_option_23\" type=\"radio\" value=\"504268_122594\"/>\n<span class=\"checkmark radio_check1\"></span>", "3) bullet\n                                                    <input checked=\"checked\" class=\"question_options2\" name=\"selected_option_23\" type=\"radio\" value=\"504269_122594\"/>\n<span class=\"checkmark radio_check2\"></span>", "4) shot\n                                                    <input class=\"question_options3\" name=\"selected_option_23\" type=\"radio\" value=\"504270_122594\"/>\n<span class=\"checkmark radio_check3\"></span>"], "correct_answer": 3, "correct_option": "3) bullet\n                                                    <input checked=\"checked\" class=\"question_options2\" name=\"selected_option_23\" type=\"radio\" value=\"504269_122594\"/>\n<span class=\"checkmark radio_check2\"></span>", "explanation": "C)Bullet'का use होगा क्योंकि \"bite the bullet\" एक idiom है, जिसका अर्थ है किसी कठिनाई या अप्रिय स्थिति का साहसपूर्वक सामना करना। इस वाक्य में, यह व्यक्ति को सच्चाई बताने के लिए हिम्मत करने का संकेत देता है, इसलिए 'bullet' यहाँ सही है। Gun' का अर्थ बंदूक है, जो इस idiom के लिए उपयुक्त नहीं है। 'Dust' का अर्थ है धूल, जो इस संदर्भ में सही नहीं बैठता। 'Shot' का अर्थ है गोली चलाना, जो idiom को पूरा नहीं करता। <br /> 'Bullet'will be used because \"bite the bullet\" is an idiom meaning to face a difficult or unpleasant situation courageously. In this sentence, it suggests gathering courage to tell the truth, making 'bullet' the correct choice. Gun' means a firearm, which does not fit in this idiomatic expression. 'Dust' means particles of earth, irrelevant to this context. 'Shot' means firing a bullet, which does not complete the idiom correctly.", "marks": {"positive": 2.0, "negative": 0.5}}, {"question_number": 25, "question_text": "<strong>Select the most appropriate verb / verb phrase to fill in the blank.</strong> <br /> The team ________________ the championship before their star player got injured.", "options": ["1) win\n                                                    <input class=\"question_options0\" name=\"selected_option_24\" type=\"radio\" value=\"504271_122595\"/>\n<span class=\"checkmark radio_check0\"></span>", "2) has won\n                                                    <input class=\"question_options1\" name=\"selected_option_24\" type=\"radio\" value=\"504272_122595\"/>\n<span class=\"checkmark radio_check1\"></span>", "3) had won\n                                                    <input checked=\"checked\" class=\"question_options2\" name=\"selected_option_24\" type=\"radio\" value=\"504273_122595\"/>\n<span class=\"checkmark radio_check2\"></span>", "4) was won\n                                                    <input class=\"question_options3\" name=\"selected_option_24\" type=\"radio\" value=\"504274_122595\"/>\n<span class=\"checkmark radio_check3\"></span>"], "correct_answer": 3, "correct_option": "3) had won\n                                                    <input checked=\"checked\" class=\"question_options2\" name=\"selected_option_24\" type=\"radio\" value=\"504273_122595\"/>\n<span class=\"checkmark radio_check2\"></span>", "explanation": "C)had won(verb) – used to show that one action was completed before another action in the past. जीत चुका था <br /> win(verb) – to achieve victory. जीतना <br /> has won(verb) – indicates a completed action in the recent past or with relevance to the present. जीत चुका है <br /> was won(verb) – passive form, indicating that something was won by someone, not used here due to active subject involvement. जीता गया <br /> Had won'का use होगा क्योंकि यह past perfect tense को दर्शाता है, जो दो past events में से पहले घटित घटना को दिखाने के लिए प्रयोग होता है। इस वाक्य में, \"टीम ने championship जीती थी इससे पहले कि उनके स्टार खिलाड़ी घायल हो गए,\" अर्थात टीम की जीत खिलाड़ी के घायल होने से पहले हुई थी। इसलिए 'had won' यहाँ सही है। <br /> 'Had won'will be used because it indicates the past perfect tense, which is used to show the earlier of two past events. In this sentence, \"the team had won the championship before their star player got injured,\" meaning the team's victory occurred before the injury of the star player. Thus, 'had won' is the correct choice here.", "marks": {"positive": 2.0, "negative": 0.5}}]};

        // Test state variables
        let currentQuestionIndex = 0;
        let userAnswers = [];
        let bookmarkedQuestions = new Set();
        let timerInterval;
        let isDarkMode = false;
        let visitedQuestions = new Set();

        // Initialize the test
        function initializeTest() {
            // Set test title
            document.getElementById('test-title').textContent = testData.test_info.title;
            
            // Initialize user answers array
            userAnswers = Array(testData.questions.length).fill(null);
            
            // Setup question palette
            setupQuestionPalette();
            
            // Setup timer
            setupTimer();
            
            // Show first question
            showQuestion(0);
            
            // Setup event listeners
            setupEventListeners();
            
            // Make sure palette toggle button is visible on mobile
            updatePaletteToggleDisplay();
        }

        function setupEventListeners() {
            document.getElementById('prev-btn').addEventListener('click', goToPreviousQuestion);
            document.getElementById('next-btn').addEventListener('click', goToNextQuestion);
            document.getElementById('submit-test').addEventListener('click', showReviewWarning);
            document.getElementById('bookmark-btn').addEventListener('click', toggleBookmark);
            document.getElementById('theme-toggle').addEventListener('click', toggleTheme);

            // Question palette toggle functionality
            document.getElementById('palette-toggle').addEventListener('click', toggleQuestionPalette);

            // Add keyboard event listener to document
            document.addEventListener('keydown', handleKeyPress);

            // Filter buttons
            document.querySelectorAll('.filter-btn').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    document.querySelectorAll('.filter-btn').forEach(b => b.classList.remove('active'));
                    e.target.classList.add('active');
                    filterQuestions(e.target.dataset.filter);
                });
            });
        }

        function toggleQuestionPalette() {
            const palette = document.querySelector('.question-palette');
            const toggleBtn = document.getElementById('palette-toggle');
            
            if (palette.classList.contains('visible')) {
                // Hide palette with animation
                palette.style.transform = 'translateX(100%)';
                toggleBtn.classList.remove('active');
                setTimeout(() => {
                    palette.classList.remove('visible');
                }, 300);
            } else {
                // Show palette with animation
                palette.classList.add('visible');
                toggleBtn.classList.add('active');
                setTimeout(() => {
                    palette.style.transform = 'translateX(0)';
                }, 10);
            }
        }

        // Add display flex to palette toggle button when in mobile view
        function updatePaletteToggleDisplay() {
            const toggleBtn = document.getElementById('palette-toggle');
            if (window.innerWidth <= 768) {
                toggleBtn.style.display = 'flex';
            } else {
                toggleBtn.style.display = 'none';
            }
        }

        // Call on load and window resize
        window.addEventListener('load', updatePaletteToggleDisplay);
        window.addEventListener('resize', updatePaletteToggleDisplay);

        function handleKeyPress(event) {
            console.log('Key pressed:', event.key); // Add debug logging
            
            // Ignore keyboard shortcuts if user is typing in an input field
            if (event.target.tagName === 'INPUT' || event.target.tagName === 'TEXTAREA') {
                return;
            }

            // Ignore keyboard shortcuts if test is submitted
            if (document.getElementById('result').style.display === 'block') {
                return;
            }

            // Prevent default behavior for arrow keys and numbers to avoid page scrolling
            if (['ArrowLeft', 'ArrowRight', '1', '2', '3', '4'].includes(event.key)) {
                event.preventDefault();
            }

            switch(event.key) {
                case 'ArrowLeft':
                    if (currentQuestionIndex > 0) {
                        goToPreviousQuestion();
                    }
                    break;
                case 'ArrowRight':
                    if (currentQuestionIndex < testData.questions.length - 1) {
                        goToNextQuestion();
                    }
                    break;
                case 'b':
                case 'B':
                    toggleBookmark();
                    break;
                case 'Enter':
                    if (currentQuestionIndex === testData.questions.length - 1) {
                        showReviewWarning();
                    } else {
                        goToNextQuestion();
                    }
                    break;
                case '1':
                case '2':
                case '3':
                case '4':
                    const optionIndex = parseInt(event.key) - 1;
                    const options = document.querySelectorAll('.option');
                    if (options[optionIndex]) {
                        // Add visual feedback for option selection
                        options[optionIndex].classList.add('keyboard-selected');
                        
                        // Actually select the option
                        const radio = options[optionIndex].querySelector('input[type="radio"]');
                        if (radio) {
                            radio.checked = true;
                            userAnswers[currentQuestionIndex] = optionIndex + 1;
                            
                            // Update the option's visual state
                            options.forEach(opt => opt.classList.remove('selected'));
                            options[optionIndex].classList.add('selected');
                            
                            // Update the question palette
                            updateQuestionPalette();
                        }
                        
                        // Remove the selection effect after animation
                        setTimeout(() => {
                            options[optionIndex].classList.remove('keyboard-selected');
                        }, 200);
                    }
                    break;
            }
        }

        function setupQuestionPalette() {
            const palette = document.getElementById('question-palette');
            palette.innerHTML = '';
            
            for (let i = 0; i < testData.questions.length; i++) {
                const item = document.createElement('div');
                item.className = 'palette-item not-visited';
                item.textContent = i + 1;
                item.addEventListener('click', () => {
                    showQuestion(i);
                    // Close the palette if it's currently visible (for mobile view)
                    const paletteElement = document.querySelector('.question-palette');
                    if (paletteElement.classList.contains('visible')) {
                        toggleQuestionPalette();
                    }
                });
                palette.appendChild(item);
            }
            
            // Ensure palette toggle button is visible on mobile
            updatePaletteToggleDisplay();
        }

        function updateQuestionPalette() {
            const items = document.querySelectorAll('.palette-item');
            items.forEach((item, index) => {
                item.className = 'palette-item';
                
                // Only add status classes if the question has been visited
                if (visitedQuestions.has(index)) {
                    if (bookmarkedQuestions.has(index)) {
                        item.classList.add('marked-review');
                    } else if (userAnswers[index] !== null) {
                        item.classList.add('answered');
                    } else {
                        item.classList.add('not-answered');
                    }
                } else {
                    item.classList.add('not-visited');
                }
                
                if (index === currentQuestionIndex) {
                    item.classList.add('active');
                }
            });
        }

        function filterQuestions(filter) {
            const items = document.querySelectorAll('.palette-item');
            items.forEach((item, index) => {
                const isMarkedReview = bookmarkedQuestions.has(index);
                const isAnswered = userAnswers[index] !== null;
                const isVisited = visitedQuestions.has(index);
                
                switch(filter) {
                    case 'answered':
                        item.style.display = isAnswered ? 'flex' : 'none';
                        break;
                    case 'not-answered':
                        item.style.display = (isVisited && !isAnswered) ? 'flex' : 'none';
                        break;
                    case 'marked-review':
                        item.style.display = isMarkedReview ? 'flex' : 'none';
                        break;
                    default:
                        item.style.display = 'flex';
                }
            });
        }
        
        function setupTimer() {
            const duration = parseFloat(testData.test_info.duration);
            let timeLeft = Math.floor(duration * 60);
            const timerElement = document.getElementById('timer');
            
            timerInterval = setInterval(() => {
                const minutes = Math.floor(timeLeft / 60);
                const seconds = timeLeft % 60;
                
                if (timeLeft <= 300) { // 5 minutes warning
                    timerElement.classList.add('timer-warning');
                }
                
                timerElement.innerHTML = `
                    <i class="fas fa-clock"></i>
                    Time Remaining: ${minutes}:${seconds < 10 ? '0' : ''}${seconds}
                `;
                
                if (timeLeft <= 0) {
                    clearInterval(timerInterval);
                    submitTest();
                }
                
                timeLeft--;
            }, 1000);
        }
        
        function showQuestion(index) {
            currentQuestionIndex = index;
            // Mark question as visited when opened
            visitedQuestions.add(index);
            const question = testData.questions[index];
            const container = document.getElementById('current-question');
            
            // Add fade-out animation
            container.style.opacity = '0';
            container.style.transform = 'translateY(10px)';
            
            setTimeout(() => {
                container.innerHTML = `
                    <div class="question-container">
                        <div class="question-number">
                            <span>Question ${question.question_number} of ${testData.questions.length}</span>
                            <span class="marks-info">
                                <i class="fas fa-plus-circle"></i> ${question.marks.positive}
                                <i class="fas fa-minus-circle"></i> ${question.marks.negative}
                            </span>
                        </div>
                        <div class="question">${question.question_text}</div>
                        <div class="options">
                            ${question.options.map((option, optIndex) => `
                                <label class="option ${userAnswers[index] === optIndex + 1 ? 'selected' : ''}">
                                    <input type="radio" name="question${index}" value="${optIndex + 1}" 
                                        ${userAnswers[index] === optIndex + 1 ? 'checked' : ''}>
                                        <div class="option-content">
                                    <span class="option-number">${optIndex + 1}</span> ${option}
                                        </div>
                                </label>
                            `).join('')}
                        </div>
                        <div style="flex-grow: 1;"></div>
                    </div>
                `;
                
                // Update bookmark button
                const bookmarkBtn = document.getElementById('bookmark-btn');
                bookmarkBtn.classList.toggle('active', bookmarkedQuestions.has(index));
                bookmarkBtn.innerHTML = bookmarkedQuestions.has(index) 
                    ? '<i class="fas fa-flag"></i> Marked for Review'
                    : '<i class="far fa-flag"></i> Mark for Review <span class="shortcut-hint">(B)</span>';
                
                // Add event listeners to options
                const options = container.querySelectorAll('.option');
                    options.forEach((option, optIdx) => {
                    option.addEventListener('click', function() {
                        const radio = this.querySelector('input[type="radio"]');
                        radio.checked = true;
                        
                            options.forEach(opt => {
                                opt.classList.remove('selected');
                                opt.style.transform = 'translateX(0)';
                            });
                            
                            // Animate the selected option
                        this.classList.add('selected');
                            this.style.transform = 'translateX(10px)';
                        
                        userAnswers[index] = parseInt(radio.value);
                        updateQuestionPalette();

                            // Highlight the option number with a pulse animation
                        const optionNumber = this.querySelector('.option-number');
                        optionNumber.style.animation = 'pulse 0.5s ease';
                        setTimeout(() => {
                            optionNumber.style.animation = '';
                        }, 500);
                });

                        // Add a small delay to each option's appearance
                        option.style.opacity = '0';
                        option.style.transform = 'translateX(20px)';
                        setTimeout(() => {
                            option.style.opacity = '1';
                            option.style.transform = 'translateX(0)';
                        }, 100 + (optIdx * 50));
                    });
                    
                    // Fade in the content
                    setTimeout(() => {
                        container.style.opacity = '1';
                        container.style.transform = 'translateY(0)';
                    }, 50);
                
                // Update navigation buttons
                updateNavigationButtons();
                
                // Update question palette
                updateQuestionPalette();
                }, 150);
        }
        
        function updateNavigationButtons() {
            const prevBtn = document.getElementById('prev-btn');
            const nextBtn = document.getElementById('next-btn');
            const submitBtn = document.getElementById('submit-test');
            
            prevBtn.disabled = currentQuestionIndex === 0;
            
            if (currentQuestionIndex === testData.questions.length - 1) {
                nextBtn.style.display = 'none';
                submitBtn.style.display = 'block';
            } else {
                nextBtn.style.display = 'block';
                submitBtn.style.display = 'none';
            }
        }
        
        function goToPreviousQuestion() {
            if (currentQuestionIndex > 0) {
                showQuestion(currentQuestionIndex - 1);
            }
        }
        
        function goToNextQuestion() {
            if (currentQuestionIndex < testData.questions.length - 1) {
                showQuestion(currentQuestionIndex + 1);
            }
        }

        function toggleBookmark() {
            const btn = document.getElementById('bookmark-btn');
            if (bookmarkedQuestions.has(currentQuestionIndex)) {
                bookmarkedQuestions.delete(currentQuestionIndex);
                btn.classList.remove('active');
                btn.innerHTML = `
                    <i class="far fa-flag"></i> 
                    Mark for Review <span class="shortcut-hint">(B)</span>
                `;
            } else {
                bookmarkedQuestions.add(currentQuestionIndex);
                btn.classList.add('active');
                btn.innerHTML = `
                    <i class="fas fa-flag"></i> 
                    Marked for Review
                `;
            }
            updateQuestionPalette();
        }

        function toggleTheme() {
            isDarkMode = !isDarkMode;
            document.body.setAttribute('data-theme', isDarkMode ? 'dark' : 'light');
            const themeToggle = document.getElementById('theme-toggle');
            themeToggle.innerHTML = `<i class="fas fa-${isDarkMode ? 'sun' : 'moon'}"></i>`;
        }

        function showReviewWarning() {
            // Skip the warning and directly submit the test
            submitTest();
        }
        
        function submitTest() {
            // Add submission animation
            const testContainer = document.getElementById('test-container');
            const questionPalette = document.querySelector('.question-palette');
            const resultContainer = document.getElementById('result');
            
            // Animate test container sliding out
            testContainer.style.transition = 'all 0.5s var(--animation-bounce)';
            testContainer.style.transform = 'translateX(-50px)';
            testContainer.style.opacity = '0';
            
            // Animate question palette fading out
            questionPalette.style.transition = 'all 0.5s var(--animation-bounce)';
            questionPalette.style.transform = 'translateX(50px)';
            questionPalette.style.opacity = '0';
            
            // Clear the timer
            clearInterval(timerInterval);
            
            // Calculate results with a slight delay for animation
            setTimeout(() => {
            let score = 0;
            let correctCount = 0;
            let attemptedCount = 0;
            const reviewAnswers = [];
            
            // Calculate score and statistics
            testData.questions.forEach((question, index) => {
                const userAnswer = userAnswers[index];
                const isCorrect = userAnswer === question.correct_answer;
                
                if (userAnswer !== null) {
                    attemptedCount++;
                    if (isCorrect) {
                        score += question.marks.positive;
                        correctCount++;
                    } else {
                        score -= question.marks.negative;
                    }
                }
                
                reviewAnswers.push({
                    questionNumber: question.question_number,
                    questionText: question.question_text,
                    userChoice: userAnswer,
                    userChoiceText: userAnswer !== null ? question.options[userAnswer - 1] : 'Not answered',
                    correctAnswer: question.correct_answer,
                    correctAnswerText: question.correct_option,
                    isCorrect: isCorrect,
                    answered: userAnswer !== null
                });
            });
            
            // Update statistics
            document.getElementById('total-questions').textContent = testData.questions.length;
            document.getElementById('attempted-questions').textContent = attemptedCount;
            document.getElementById('correct-answers').textContent = correctCount;
            document.getElementById('accuracy').textContent = 
                `${Math.round((correctCount / (attemptedCount || 1)) * 100)}%`;
            
            // Display score
            document.getElementById('score').innerHTML = `
                <div style="font-size: 36px; color: var(--primary-color);">
                    ${score.toFixed(2)} / ${testData.questions.length * testData.questions[0].marks.positive}
                </div>
                <div style="color: var(--text-color); margin-top: 10px;">
                    Percentage: ${Math.round((score / (testData.questions.length * testData.questions[0].marks.positive)) * 100)}%
                </div>
            `;
            
            // Create performance chart
            const chartContainer = document.getElementById('performance-chart');
            chartContainer.innerHTML = ''; // Clear previous chart if any
            const ctx = document.createElement('canvas');
            chartContainer.appendChild(ctx);
                
            new Chart(ctx, {
                type: 'doughnut',
                data: {
                    labels: ['Correct', 'Incorrect', 'Not Attempted'],
                    datasets: [{
                        data: [
                            correctCount,
                            attemptedCount - correctCount,
                            testData.questions.length - attemptedCount
                        ],
                        backgroundColor: [
                                '#16a34a', // Fixed success green
                                '#dc2626', // Fixed error red
                                '#8b5cf6'  // Fixed purple for not attempted
                        ],
                            borderColor: 'var(--bg-color)',
                        borderWidth: 2,
                            hoverOffset: 6
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                                display: false
                            },
                            tooltip: {
                                backgroundColor: 'var(--bg-color)',
                                titleColor: 'var(--text-color)',
                                bodyColor: 'var(--text-color)',
                                borderColor: 'var(--border-color)',
                                borderWidth: 1,
                                padding: 12,
                                boxPadding: 6,
                                usePointStyle: true,
                                callbacks: {
                                    label: function(context) {
                                        let label = context.label || '';
                                        let value = context.raw || 0;
                                        let total = context.dataset.data.reduce((a, b) => a + b, 0);
                                        let percentage = Math.round((value / total) * 100);
                                        return `${label}: ${value} (${percentage}%)`;
                                    }
                                }
                            },
                            title: {
                                display: true,
                                text: 'Test Performance',
                                color: 'var(--text-color)',
                                font: {
                                    family: 'Inter, sans-serif',
                                    size: 16,
                                    weight: '600'
                                },
                                padding: {
                                    bottom: 15
                            }
                        }
                    },
                    cutout: '65%',
                    animation: {
                        animateScale: true,
                        animateRotate: true,
                            duration: 1500,
                            easing: 'easeOutQuart'
                    }
                }
            });
                
                // Replace the chart's built-in legend with a custom one
                const customLegend = document.createElement('div');
                customLegend.className = 'custom-chart-legend';

                chartContainer.appendChild(customLegend);
            
            // Update the analytics container title
            document.querySelector('.analytics-container h3').innerHTML = 
                '<i class="fas fa-chart-pie"></i> Performance Analysis';
            
            // Add event listener to the download analysis buttons with a small delay to ensure UI is ready
            setTimeout(() => {
                const downloadBtn = document.getElementById('download-analysis');
                const bottomDownloadBtn = document.getElementById('bottom-download-analysis');
                if (downloadBtn) {
                    downloadBtn.addEventListener('click', function() {
                        downloadAnalysis(testData, reviewAnswers, score, correctCount, attemptedCount);
                    });
                }
                if (bottomDownloadBtn) {
                    bottomDownloadBtn.addEventListener('click', function() {
                        downloadAnalysis(testData, reviewAnswers, score, correctCount, attemptedCount);
                    });
                }
            }, 500);
            
            // Fix any palette toggle issue
            if (window.innerWidth <= 768) {
                const paletteToggle = document.getElementById('palette-toggle');
                if (paletteToggle) {
                    paletteToggle.style.display = 'flex';
                }
                
                // Add close button to palette if not exists
                const palette = document.querySelector('.question-palette');
                if (palette && !document.querySelector('.palette-close-btn')) {
                    const closeBtn = document.createElement('button');
                    closeBtn.className = 'palette-close-btn';
                    closeBtn.innerHTML = '<i class="fas fa-times"></i>';
                    closeBtn.addEventListener('click', toggleQuestionPalette);
                    
                    const paletteHeader = palette.querySelector('.palette-header');
                    if (paletteHeader) {
                        paletteHeader.appendChild(closeBtn);
                    }
                }
            }
            
                // Display answer review with staggered animation
            const answersDiv = document.getElementById('answers');
            answersDiv.innerHTML = '<h3>Answer Review:</h3>';
            
                reviewAnswers.forEach((answer, idx) => {
                const answerDiv = document.createElement('div');
                answerDiv.className = 'answer-review';
                    answerDiv.style.opacity = '0';
                    answerDiv.style.transform = 'translateY(20px)';
                
                answerDiv.innerHTML = `
                    <p><strong>Question ${answer.questionNumber}:</strong> ${answer.questionText}</p>
                    <p class="${answer.answered ? (answer.isCorrect ? 'correct' : 'incorrect') : ''}">
                        Your answer: ${answer.userChoiceText}
                        ${answer.isCorrect ? '<i class="fas fa-check"></i>' : 
                        (answer.answered ? '<i class="fas fa-times"></i>' : '')}
                    </p>
                    ${!answer.isCorrect ? `
                        <p class="correct">
                            Correct answer: ${answer.correctAnswerText}
                            <i class="fas fa-check"></i>
                        </p>
                    ` : ''}
                    ${testData.questions[idx].explanation ? `
                        <div class="explanation">
                            <p><strong>Explanation:</strong></p>
                            <p>${testData.questions[idx].explanation}</p>
                        </div>
                    ` : ''}
                `;
                
                answersDiv.appendChild(answerDiv);
                    
                    // Animate each answer review with a staggered delay
                    setTimeout(() => {
                        answerDiv.style.transition = 'all 0.5s var(--animation-bounce)';
                        answerDiv.style.opacity = '1';
                        answerDiv.style.transform = 'translateY(0)';
                    }, 200 + (idx * 100));
                });
                
                // Show results container with animation
                resultContainer.style.display = 'block';
                resultContainer.style.opacity = '0';
                resultContainer.style.transform = 'translateY(20px)';
                
                setTimeout(() => {
                    resultContainer.style.transition = 'all 0.6s var(--animation-bounce)';
                    resultContainer.style.opacity = '1';
                    resultContainer.style.transform = 'translateY(0)';
                }, 100);
                
                // Hide test components
                testContainer.style.display = 'none';
                questionPalette.style.display = 'none';
                document.getElementById('palette-toggle').style.display = 'none';
            }, 600);
        }
        
        // Initialize the test
        initializeTest();

        // Add CSS transitions to the current-question container
        document.addEventListener('DOMContentLoaded', function() {
            const currentQuestion = document.getElementById('current-question');
            currentQuestion.style.transition = 'opacity 0.3s ease, transform 0.3s var(--animation-bounce)';
        });

        // Add CSS for smooth palette transitions
        document.addEventListener('DOMContentLoaded', function() {
            const styleElement = document.createElement('style');
            styleElement.textContent = `
                .question-palette {
                    transition: transform 0.3s var(--animation-bounce);
                }
                
                #palette-toggle {
                    transition: transform 0.3s var(--animation-bounce);
                }
                
                @media (max-width: 768px) {
                    .question-container:hover {
                        transform: translateY(-2px);
                    }
                    
                    .score-card:hover {
                        transform: translateY(-4px);
                    }
                    
                    .option:hover {
                        transform: translateX(4px);
                    }
                }
            `;
            document.head.appendChild(styleElement);
        });

        // Add this after the Chart.js script tag but before your testData declaration
        document.addEventListener('DOMContentLoaded', function() {
            // Add custom styling for chart legend
            const styleElement = document.createElement('style');
            styleElement.textContent = `
                .chart-legend-item {
                    display: flex;
                    align-items: center;
                    margin: 8px 0;
                    font-weight: 600;
                }
                
                .legend-color {
                    width: 14px;
                    height: 14px;
                    border-radius: 50%;
                    margin-right: 8px;
                    display: inline-block;
                }
                
                .legend-correct {
                    background-color: #16a34a;
                }
                
                .legend-incorrect {
                    background-color: #dc2626;
                }
                
                .legend-not-attempted {
                    background-color: #8b5cf6;
                }
                
                .custom-chart-legend {
                    display: flex;
                    justify-content: center;
                    gap: 15px;
                    margin-top: 15px;
                    flex-wrap: wrap;
                }
                
                [data-theme="dark"] .legend-text {
                    color: #f1f5f9;
                }
                
                .chart-container canvas {
                    margin-bottom: 10px;
                }
            `;
            document.head.appendChild(styleElement);
        });

        // Function to download test analysis as HTML file
        function downloadAnalysis(testData, reviewAnswers, score, correctCount, attemptedCount) {
            const maxScore = testData.questions.length * testData.questions[0].marks.positive;
            const percentage = Math.round((score / maxScore) * 100);

            // Create HTML content
            let htmlContent = `
            <!DOCTYPE html>
            <html lang="en">
            <head>
                <meta charset="UTF-8">
                <meta name="viewport" content="width=device-width, initial-scale=1.0">
                <title>Test Analysis - ${testData.test_info.title}</title>
                <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
                <style>
                    body {
                        font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
                        max-width: 900px;
                        margin: 0 auto;
                        padding: 20px;
                        color: #1e293b;
                        background-color: #f8fafc;
                        line-height: 1.6;
                    }
                    .header {
                        text-align: center;
                        margin-bottom: 30px;
                        border-bottom: 1px solid #e2e8f0;
                        padding-bottom: 15px;
                    }
                    .header h1 {
                        color: #4f46e5;
                        margin-bottom: 5px;
                    }
                    .header .date {
                        font-style: italic;
                        color: #64748b;
                    }
                    .summary {
                        display: grid;
                        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
                        gap: 20px;
                        margin-bottom: 30px;
                    }
                    .summary-card {
                        background-color: #ffffff;
                        border-radius: 8px;
                        padding: 15px;
                        box-shadow: 0 2px 4px rgba(0,0,0,0.05);
                        text-align: center;
                        border: 1px solid #e2e8f0;
                    }
                    .summary-card h3 {
                        margin-top: 0;
                        margin-bottom: 10px;
                        color: #64748b;
                        font-size: 14px;
                    }
                    .summary-card .value {
                        font-size: 24px;
                        font-weight: bold;
                        color: #4f46e5;
                    }
                    .score-highlight {
                        background-color: #f3f4f6;
                        padding: 30px;
                        border-radius: 8px;
                        text-align: center;
                        margin-bottom: 30px;
                        border: 1px solid #e5e7eb;
                    }
                    .score-highlight .score {
                        font-size: 48px;
                        font-weight: bold;
                        color: #4f46e5;
                    }
                    .score-highlight .percentage {
                        font-size: 18px;
                        color: #64748b;
                    }
                    .question-review {
                        margin-bottom: 30px;
                    }
                    .question {
                        background-color: #ffffff;
                        border-radius: 8px;
                        padding: 20px;
                        box-shadow: 0 2px 4px rgba(0,0,0,0.05);
                        margin-bottom: 15px;
                        border: 1px solid #e2e8f0;
                    }
                    .question-header {
                        display: flex;
                        justify-content: space-between;
                        align-items: center;
                        margin-bottom: 10px;
                        padding-bottom: 10px;
                        border-bottom: 1px solid #e2e8f0;
                    }
                    .question-text {
                        margin-bottom: 15px;
                        word-break: break-word; /* Ensures text doesn't overflow */
                    }
                    .user-answer {
                        margin-bottom: 5px;
                        word-break: break-word; /* Ensures text doesn't overflow */
                    }
                    .user-answer.correct {
                        color: #16a34a;
                    }
                    .user-answer.incorrect {
                        color: #dc2626;
                    }
                    .correct-answer {
                        color: #16a34a;
                        margin-bottom: 15px;
                        word-break: break-word; /* Ensures text doesn't overflow */
                    }
                    .explanation {
                        background-color: #f8fafc;
                        padding: 15px;
                        border-radius: 8px;
                        border-left: 4px solid #4f46e5;
                        word-break: break-word; /* Ensures text doesn't overflow */
                    }
                    .explanation-title {
                        font-weight: bold;
                        margin-bottom: 5px;
                    }
                    .footer {
                        text-align: center;
                        margin-top: 40px;
                        padding-top: 20px;
                        border-top: 1px solid #e2e8f0;
                        color: #64748b;
                        font-size: 14px;
                    }
                    .unattempted {
                        color: #8b5cf6;
                    }
                    @media print {
                        body {
                            background-color: white;
                        }
                        .question, .summary-card, .score-highlight {
                            break-inside: avoid;
                        }
                    }
                    /* Responsive fixes */
                    @media (max-width: 768px) {
                        body {
                            padding: 10px;
                        }
                        .summary {
                            grid-template-columns: 1fr;
                        }
                        .score-highlight .score {
                            font-size: 36px;
                        }
                        .question-header {
                            flex-direction: column;
                            align-items: flex-start;
                        }
                    }
                </style>
            </head>
            <body>
                <div class="header">
                    <h1>${testData.test_info.title}</h1>
                    <div class="date">Generated on: ${new Date().toLocaleString()}</div>
                </div>
                
                <div class="score-highlight">
                    <div class="score">${score.toFixed(2)} / ${maxScore}</div>
                    <div class="percentage">Percentage: ${percentage}%</div>
                </div>
                
                <div class="summary">
                    <div class="summary-card">
                        <h3>Total Questions</h3>
                        <div class="value">${testData.questions.length}</div>
                    </div>
                    <div class="summary-card">
                        <h3>Attempted</h3>
                        <div class="value">${attemptedCount}</div>
                    </div>
                    <div class="summary-card">
                        <h3>Correct</h3>
                        <div class="value">${correctCount}</div>
                    </div>
                    <div class="summary-card">
                        <h3>Accuracy</h3>
                        <div class="value">${Math.round((correctCount / (attemptedCount || 1)) * 100)}%</div>
                    </div>
                </div>
                
                <h2>Question Review</h2>
                <div class="question-review">
            `;

            // Add each question and answer to the HTML content
            reviewAnswers.forEach((answer, idx) => {
                const question = testData.questions[idx];
                htmlContent += `
                    <div class="question">
                        <div class="question-header">
                            <strong>Question ${answer.questionNumber}</strong>
                            <span>${answer.isCorrect ? '+' : (answer.answered ? '-' : '0')}${question.marks.positive} marks</span>
                        </div>
                        <div class="question-text">${answer.questionText}</div>
                        <div class="user-answer ${answer.isCorrect ? 'correct' : (answer.answered ? 'incorrect' : 'unattempted')}">
                            <strong>${answer.answered ? 'Your answer: ' : 'Not attempted'}</strong> 
                            ${answer.answered ? answer.userChoiceText : ''}
                            ${answer.isCorrect ? ' ✓' : (answer.answered ? ' ✗' : '')}
                        </div>
                        ${!answer.isCorrect ? `
                            <div class="correct-answer">
                                <strong>Correct answer:</strong> ${answer.correctAnswerText}
                            </div>
                        ` : ''}
                        ${question.explanation ? `
                            <div class="explanation">
                                <div class="explanation-title">Explanation:</div>
                                <div>${question.explanation}</div>
                            </div>
                        ` : ''}
                    </div>
                `;
            });

            // Close HTML content
            htmlContent += `
                </div>
                
                <div class="footer">
                    <p>&copy; 2025 KUNAL Test Platform. All rights reserved.</p>
                    <p>Created by @finallygotnirvana</p>
                </div>
            </body>
            </html>
            `;

            // Create a download link
            const blob = new Blob([htmlContent], { type: 'text/html' });
            const url = URL.createObjectURL(blob);
            const downloadLink = document.createElement('a');
            downloadLink.href = url;
            
            // Format date for filename
            const date = new Date();
            const formattedDate = `${date.getFullYear()}-${String(date.getMonth() + 1).padStart(2, '0')}-${String(date.getDate()).padStart(2, '0')}`;
            
            downloadLink.download = `Test_Analysis_${formattedDate}.html`;
            document.body.appendChild(downloadLink);
            downloadLink.click();
            document.body.removeChild(downloadLink);
        }

        document.addEventListener('keydown', function(e) {
            // Prevent default behavior for arrow keys
            if (e.key === 'ArrowLeft' || e.key === 'ArrowRight' || e.key === 'ArrowUp' || e.key === 'ArrowDown') {
                e.preventDefault();
            }

            switch(e.key) {
                case 'ArrowLeft':
                    goToPreviousQuestion();
                    break;
                case 'ArrowRight':
                    goToNextQuestion();
                    break;
                case 'ArrowUp':
                case 'ArrowDown':
                    // Get all options for the current question
                    const options = document.querySelectorAll('.option');
                    if (options.length === 0) return;

                    // Find currently selected option
                    let currentIndex = Array.from(options).findIndex(opt => opt.classList.contains('selected'));
                    
                    // Calculate new index
                    if (e.key === 'ArrowUp') {
                        currentIndex = currentIndex <= 0 ? options.length - 1 : currentIndex - 1;
                    } else {
                        currentIndex = currentIndex >= options.length - 1 ? 0 : currentIndex + 1;
                    }

                    // Select the new option
                    options.forEach(opt => opt.classList.remove('selected'));
                    options[currentIndex].classList.add('selected');
                    options[currentIndex].querySelector('input[type="radio"]').checked = true;
                    
                    // Update user answer
                    userAnswers[currentQuestionIndex] = currentIndex + 1;
                    updateQuestionPalette();
                    break;
                case 'b':
                case 'B':
                    toggleBookmark();
                    break;
            }
        });
    </script>
</body>
</html>
