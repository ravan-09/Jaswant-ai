<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>devgagan</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <style>
        *{margin:0;padding:0;box-sizing:border-box}
        :root{
            --p:#4F46E5;
            --s:#10B981;
            --d:#EF4444;
            --w:#F59E0B;
            --y:#FCD34D;
            --bg:#F8FAFC;
            --card:#FFF;
            --txt:#1F2937;
            --txtL:#6B7280;
            --brd:#E5E7EB;
            --shadow:0 4px 6px -1px rgba(0,0,0,0.1),0 2px 4px -1px rgba(0,0,0,0.06);
            --radius:12px;
            --transition:all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
            
            /* Dark mode variables */
            --dark-bg:#1a1a2e;
            --dark-card:#16213e;
            --dark-txt:#e6e6e6;
            --dark-txtL:#b8b8b8;
            --dark-brd:#2a2a3a;
        }
        body{
            font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',system-ui,sans-serif;
            background:var(--bg);
            color:var(--txt);
            line-height:1.5;
            padding-bottom:80px;
            transition:var(--transition);
        }
        
        body.dark-mode {
            background:var(--dark-bg);
            color:var(--dark-txt);
        }
        
        /* Improved math expression and table styling */
        .math-exp {
            display: inline-block;
            vertical-align: middle;
            position: relative;
            margin: 0 2px;
        }
        
        .math-num {
            text-align: center;
            display: block;
            padding: 0;
        }
        
        .math-line {
            display: block;
            border-top: 1px solid;
            padding: 0;
            text-align: center;
        }
        
        /* Table overflow container */
        .table-container {
            width: 100%;
            overflow-x: auto;
            margin: 12px 0;
            -webkit-overflow-scrolling: touch;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 8px 0;
        }
        
        table, th, td {
            border: 1px solid var(--brd);
        }
        
        th, td {
            padding: 8px 12px;
            text-align: left;
        }
        
        .dark-mode table, 
        .dark-mode th, 
        .dark-mode td {
            border-color: var(--dark-brd);
        }
        
        /* Image containment styles */
        img {
            max-width: 100%;
            height: auto;
            display: block;
            margin: 8px 0;
            border-radius: 4px;
        }
        
        /* Ensure images don't overflow in any container */
        .q-txt img, .opt-txt img, .sol img, .comp img {
            max-width: 100%;
            width: auto;
            height: auto;
            object-fit: contain;
        }
        
        /* Specific image containers */
        .img-container {
            width: 100%;
            overflow: hidden;
            border-radius: 4px;
            margin: 8px 0;
        }
        
        /* Welcome screen styles */
        .welcome-screen {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: var(--card);
            z-index: 1000;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 20px;
            text-align: center;
            transition: var(--transition);
        }
        
        .dark-mode .welcome-screen {
            background: var(--dark-card);
        }
        
        .welcome-screen.hidden {
            opacity: 0;
            pointer-events: none;
        }
        
        .welcome-icon {
            font-size: 4rem;
            color: var(--p);
            margin-bottom: 20px;
        }
        
        .welcome-title {
            font-size: 1.8rem;
            font-weight: 700;
            margin-bottom: 16px;
            color: var(--p);
        }
        
        .welcome-details {
            background: rgba(79, 70, 229, 0.1);
            border-radius: var(--radius);
            padding: 20px;
            width: 100%;
            max-width: 500px;
            margin-bottom: 24px;
        }
        
        .dark-mode .welcome-details {
            background: rgba(79, 70, 229, 0.2);
        }
        
        .welcome-detail {
            display: flex;
            justify-content: space-between;
            margin-bottom: 12px;
            font-size: 1rem;
        }
        
        .welcome-detail:last-child {
            margin-bottom: 0;
        }
        
        .welcome-detail-label {
            font-weight: 600;
            color: var(--txtL);
        }
        
        .dark-mode .welcome-detail-label {
            color: var(--dark-txtL);
        }
        
        .welcome-detail-value {
            font-weight: 500;
        }
        
        .section-info {
            background: rgba(16, 185, 129, 0.1);
            border-radius: var(--radius);
            padding: 20px;
            width: 100%;
            max-width: 500px;
            margin-bottom: 24px;
            text-align: left;
        }
        
        .dark-mode .section-info {
            background: rgba(16, 185, 129, 0.2);
        }
        
        .section-info h3 {
            margin-bottom: 12px;
            color: var(--s);
        }
        
        .section-list {
            width: 100%;
            border-collapse: collapse;
            margin-top: 12px;
        }
        
        .section-list th, .section-list td {
            padding: 8px 12px;
            text-align: left;
            border-bottom: 1px solid var(--brd);
        }
        
        .dark-mode .section-list th, 
        .dark-mode .section-list td {
            border-bottom-color: var(--dark-brd);
        }
        
        .section-list th {
            font-weight: 600;
            color: var(--txtL);
        }
        
        .dark-mode .section-list th {
            color: var(--dark-txtL);
        }
        
        .welcome-button {
            background: var(--p);
            color: white;
            border: none;
            border-radius: var(--radius);
            padding: 14px 28px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            margin-bottom: 20px;
        }
        
        .welcome-button:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow);
        }
        
        .join-channel {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            color: var(--p);
            font-weight: 600;
            text-decoration: none;
            margin-top: 16px;
            padding: 10px 16px;
            border-radius: var(--radius);
            background: rgba(79, 70, 229, 0.1);
            transition: var(--transition);
        }
        
        .dark-mode .join-channel {
            background: rgba(79, 70, 229, 0.2);
        }
        
        .join-channel:hover {
            background: rgba(79, 70, 229, 0.2);
            transform: translateY(-2px);
        }
        
        .dark-mode .join-channel:hover {
            background: rgba(79, 70, 229, 0.3);
        }
        
        /* Section header styles */
        .section-header {
            background: var(--p);
            color: white;
            padding: 12px 16px;
            margin-bottom: 16px;
            border-radius: var(--radius);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .section-title {
            font-weight: 600;
            font-size: 15px;
        }
        
        .section-timer {
            background: rgba(255, 255, 255, 0.2);
            padding: 6px 12px;
            border-radius: 16px;
            font-weight: 600;
            font-size: 13px;
        }
        
        .hdr{
            background:var(--card);
            border-bottom:1px solid var(--brd);
            padding:12px 16px;
            display:grid;
            grid-template-columns:1fr auto 1fr;
            align-items:center;
            position:sticky;
            top:0;
            z-index:100;
            box-shadow:var(--shadow);
            transition:var(--transition);
        }
        
        .dark-mode .hdr {
            background:var(--dark-card);
            border-bottom-color:var(--dark-brd);
            color:var(--dark-txt);
        }
        
        .hdr-l{
            display:flex;
            align-items:center;
            gap:12px;
            justify-self:start
        }
        .hdr-c{
            text-align:center;
            font-weight:600;
            font-size:15px
        }
        .hdr-r{
            display:flex;
            justify-self:end;
            align-items:center;
            gap:8px
        }
        .q-info{
            font-size:14px;
            font-weight:600
        }
        .timer{
            background:#FEF3C7;
            color:#92400E;
            padding:6px 12px;
            border-radius:16px;
            font-size:13px;
            font-weight:600
        }
        .btn{
            border:none;
            border-radius:8px;
            font-weight:500;
            cursor:pointer;
            transition:var(--transition);
            font-size:13px;
            display:inline-flex;
            align-items:center;
            justify-content:center;
            gap:6px;
        }
        .btn-sm{
            padding:8px 12px
        }
        .btn-p{
            background:var(--p);
            color:white
        }
        .btn-o{
            background:transparent;
            border:1px solid var(--brd);
            color:var(--txt)
        }
        .dark-mode .btn-o {
            border-color:var(--dark-brd);
            color:var(--dark-txt);
        }
        .btn-w{
            background:var(--y);
            color:#78350F;
            font-weight:600;
        }
        .btn-w.active{
            background:var(--w);
            color:white;
        }
        .btn:active{
            transform:scale(.98)
        }
        .cont{
            padding:16px;
            max-width:100%;
            overflow-x:hidden;
        }
        .dark-mode .cont {
            background:var(--dark-bg);
        }
        .q-card{
            background:var(--card);
            border-radius:var(--radius);
            padding:20px;
            margin-bottom:16px;
            border:1px solid var(--brd);
            overflow:hidden;
            box-shadow:var(--shadow);
            transition:var(--transition);
        }
        .dark-mode .q-card {
            background:var(--dark-card);
            border-color:var(--dark-brd);
            color:var(--dark-txt);
        }
        .lang{
            display:flex;
            background:#F3F4F6;
            border-radius:8px;
            padding:2px;
            margin-bottom:16px
        }
        .dark-mode .lang {
            background:#2a2a3a;
        }
        .lang-btn{
            flex:1;
            padding:8px;
            border:none;
            background:transparent;
            border-radius:6px;
            font-size:13px;
            cursor:pointer;
            transition:var(--transition)
        }
        .lang-btn.active{
            background:white;
            color:var(--p);
            box-shadow:0 1px 3px rgba(0,0,0,.1)
        }
        .dark-mode .lang-btn.active {
            background:var(--dark-card);
            color:var(--p);
        }
        .comp{
            background:#F0F9FF;
            border:1px solid #BAE6FD;
            border-radius:8px;
            padding:16px;
            margin-bottom:20px;
            overflow:hidden
        }
        .dark-mode .comp {
            background:#1e3a8a;
            border-color:#1e40af;
        }
        .comp h4{
            color:#0369A1;
            font-size:14px;
            margin-bottom:8px
        }
        .dark-mode .comp h4 {
            color:#93c5fd;
        }
        .q-txt{
            font-size:16px;
            line-height:1.6;
            margin-bottom:20px;
            color:var(--txt);
            overflow:hidden;
            word-wrap:break-word
        }
        .dark-mode .q-txt {
            color:var(--dark-txt);
        }
        .opts{
            display:flex;
            flex-direction:column;
            gap:12px
        }
        .opt{
            display:flex;
            align-items:center;
            padding:16px;
            background:var(--card);
            border:2px solid var(--brd);
            border-radius:12px;
            cursor:pointer;
            transition:var(--transition);
            gap:12px;
            overflow:hidden
        }
        .dark-mode .opt {
            background:var(--dark-card);
            border-color:var(--dark-brd);
        }
        .opt:hover:not(.submitted){
            border-color:var(--p);
            transform:translateY(-2px);
            box-shadow:var(--shadow);
        }
        .opt.sel{
            border-color:var(--p);
            background:#F0F9FF
        }
        .dark-mode .opt.sel {
            background:#1e3a8a;
        }
        .opt.correct{
            border-color:var(--s);
            background:#F0FDF4 !important
        }
        .dark-mode .opt.correct {
            background:#064e3b !important;
            border-color:#047857;
        }
        .opt.wrong{
            border-color:var(--d);
            background:#FEF2F2 !important
        }
        .dark-mode .opt.wrong {
            background:#7f1d1d !important;
            border-color:#b91c1c;
        }
        .opt.submitted{
            cursor:default
        }
        .opt-radio{
            width:20px;
            height:20px;
            border:2px solid var(--brd);
            border-radius:50%;
            display:flex;
            align-items:center;
            justify-content:center;
            flex-shrink:0
        }
        .dark-mode .opt-radio {
            border-color:var(--dark-brd);
        }
        .opt.sel .opt-radio{
            border-color:var(--p);
            background:var(--p)
        }
        .opt.sel .opt-radio::after{
            content:'✓';
            color:white;
            font-size:12px;
            font-weight:bold
        }
        .opt.correct .opt-radio{
            border-color:var(--s) !important;
            background:var(--s) !important
        }
        .opt.correct .opt-radio::after{
            content:'✓';
            color:white;
            font-size:12px;
            font-weight:bold
        }
        .opt.wrong .opt-radio{
            border-color:var(--d) !important;
            background:var(--d) !important
        }
        .opt.wrong .opt-radio::after{
            content:'✗';
            color:white;
            font-size:12px;
            font-weight:bold
        }
        .opt-txt{
            flex:1;
            font-size:15px;
            overflow:hidden;
            word-wrap:break-word
        }
        .dark-mode .opt-txt {
            color:var(--dark-txt);
        }
        .sol{
            background:#F0FDF4;
            border:1px solid #BBF7D0;
            border-radius:8px;
            padding:16px;
            margin-top:20px;
            display:none;
            overflow:hidden
        }
        .dark-mode .sol {
            background:#064e3b;
            border-color:#047857;
        }
        .sol.show{
            display:block
        }
        .sol h4{
            color:var(--s);
            font-size:14px;
            margin-bottom:8px;
            display:flex;
            align-items:center;
            gap:6px
        }
        .dark-mode .sol h4 {
            color:#34d399;
        }
        .sol-info{
            display:flex;
            gap:12px;
            margin-bottom:12px;
            font-size:13px;
            color:var(--txtL);
        }
        .dark-mode .sol-info {
            color:var(--dark-txtL);
        }
        .sol-info span{
            display:flex;
            align-items:center;
            gap:4px;
        }
        .nav{
            position:fixed;
            bottom:0;
            left:0;
            right:0;
            background:var(--card);
            border-top:1px solid var(--brd);
            padding:12px 16px;
            display:flex;
            justify-content:space-between;
            align-items:center;
            z-index:100;
            box-shadow:0 -2px 10px rgba(0,0,0,0.05);
            transition:var(--transition);
        }
        .dark-mode .nav {
            background:var(--dark-card);
            border-top-color:var(--dark-brd);
        }
        .nav-btn{
            padding:12px 20px;
            border-radius:8px;
            font-weight:600;
            min-width:80px
        }
        .nav-btn:disabled{
            opacity:.5;
            cursor:not-allowed
        }
        .prog{
            text-align:center;
            font-size:13px;
            color:var(--txtL)
        }
        .dark-mode .prog {
            color:var(--dark-txtL);
        }
        .panel{
            position:fixed;
            top:0;
            left:0;
            right:0;
            bottom:0;
            background:var(--card);
            z-index:200;
            transform:translateY(100%);
            transition:transform .3s ease;
            overflow-y:auto;
            display:none;
        }
        .dark-mode .panel {
            background:var(--dark-card);
        }
        .panel.open{
            transform:translateY(0);
            display:block;
        }
        .panel-hdr{
            background:var(--p);
            color:white;
            padding:16px;
            display:flex;
            justify-content:space-between;
            align-items:center;
            position:sticky;
            top:0;
            z-index:1;
        }
        .panel-close{
            background:none;
            border:none;
            color:white;
            font-size:18px;
            cursor:pointer
        }
        .q-grid{
            display:grid;
            grid-template-columns:repeat(5,1fr);
            gap:12px;
            padding:20px
        }
        .q-num{
            aspect-ratio:1;
            display:flex;
            align-items:center;
            justify-content:center;
            background:#F3F4F6;
            border-radius:8px;
            font-weight:600;
            cursor:pointer;
            transition:var(--transition);
            font-size:14px
        }
        .dark-mode .q-num {
            background:#2a2a3a;
            color:var(--dark-txt);
        }
        .q-num.cur{
            background:var(--p);
            color:white
        }
        .q-num.ans{
            background:var(--s);
            color:white
        }
        .q-num.wrong{
            background:var(--d);
            color:white
        }
        .q-num.review{
            background:var(--y);
            color:#78350F;
            font-weight:bold;
        }
        .q-num.unattempted {
            background:#E5E7EB;
            color:#6B7280;
        }
        .dark-mode .q-num.unattempted {
            background:#4B5563;
            color:#D1D5DB;
        }
        .q-num.disabled {
            opacity: 0.5;
            cursor: not-allowed;
            pointer-events: none;
        }
        .q-num:hover{
            transform:scale(1.05)
        }
        .modal{
            position:fixed;
            top:0;
            left:0;
            right:0;
            bottom:0;
            background:rgba(0,0,0,.5);
            z-index:300;
            display:none;
            align-items:center;
            justify-content:center;
            padding:20px
        }
        .modal.show{
            display:flex
        }
        .result{
            background:var(--card);
            border-radius:16px;
            padding:24px;
            width:100%;
            max-width:400px;
            text-align:center
        }
        .dark-mode .result {
            background:var(--dark-card);
        }
        .score{
            font-size:2rem;
            font-weight:bold;
            color:var(--p);
            margin:16px 0
        }
        .stats{
            display:grid;
            grid-template-columns:repeat(2,1fr);
            gap:12px;
            margin:20px 0
        }
        .stat{
            text-align:center;
            padding:12px;
            border-radius:8px;
            border:1px solid var(--brd)
        }
        .dark-mode .stat {
            border-color:var(--dark-brd);
        }
        .stat-val{
            font-size:1.5rem;
            font-weight:bold;
            margin-bottom:4px
        }
        .stat-lbl{
            font-size:12px;
            color:var(--txtL)
        }
        .dark-mode .stat-lbl {
            color:var(--dark-txtL);
        }
        .stat.c{
            border-color:var(--s);
            background:#F0FDF4
        }
        .dark-mode .stat.c {
            background:#064e3b;
            border-color:#047857;
        }
        .stat.w{
            border-color:var(--d);
            background:#FEF2F2
        }
        .dark-mode .stat.w {
            background:#7f1d1d;
            border-color:#b91c1c;
        }
        .stat.c .stat-val{
            color:var(--s)
        }
        .dark-mode .stat.c .stat-val {
            color:#34d399;
        }
        .stat.w .stat-val{
            color:var(--d)
        }
        .dark-mode .stat.w .stat-val {
            color:#f87171;
        }
        .modal-acts{
            display:flex;
            gap:12px;
            margin-top:20px
        }
        .modal-btn{
            flex:1;
            padding:12px;
            border-radius:8px;
            font-weight:600
        }
        .print-btn{
            position:fixed;
            bottom:100px;
            right:20px;
            width:50px;
            height:50px;
            border-radius:50%;
            background:var(--p);
            color:white;
            display:flex;
            align-items:center;
            justify-content:center;
            box-shadow:0 4px 10px rgba(0,0,0,0.2);
            z-index:50;
            cursor:pointer;
            transition:var(--transition);
            border:none;
        }
        .print-btn:hover{
            transform:scale(1.1);
        }
        .dark-mode .print-btn {
            background:var(--p);
        }
        .desktop-sidebar{
            display:none;
            position:fixed;
            right:0;
            top:0;
            bottom:0;
            width:300px;
            background:var(--card);
            border-left:1px solid var(--brd);
            padding:20px;
            overflow-y:auto;
            z-index:90;
            transition:var(--transition);
        }
        .dark-mode .desktop-sidebar {
            background:var(--dark-card);
            border-left-color:var(--dark-brd);
        }
        .desktop-sidebar h3{
            margin-bottom:16px;
            padding-bottom:12px;
            border-bottom:1px solid var(--brd);
            color:var(--txt);
        }
        .dark-mode .desktop-sidebar h3 {
            border-bottom-color:var(--dark-brd);
            color:var(--dark-txt);
        }
        .theme-toggle{
            background:none;
            border:none;
            color:var(--txt);
            font-size:18px;
            cursor:pointer;
            margin-left:8px;
        }
        .dark-mode .theme-toggle {
            color:var(--dark-txt);
        }
        @media (min-width: 1024px) {
            .cont{
                padding-right:320px;
            }
            .desktop-sidebar{
                display:block;
            }
            .panel{
                display:none !important;
            }
        }
        @media (max-width:375px){
            .hdr{padding:10px 12px}
            .cont{padding:12px}
            .q-card{padding:16px}
            .q-grid{grid-template-columns:repeat(4,1fr)}
        }
        
    </style>
</head>
<body>

<!-- Welcome Screen -->
<div class="welcome-screen" id="welcomeScreen">
    <h1 class="welcome-title">Exam ID : TEST</h1>
    
    <div class="welcome-details">
        <div class="welcome-detail">
            <span class="welcome-detail-label">Test ID</span>
            <span class="welcome-detail-value">0 </span>
        </div>
        <div class="welcome-detail">
            <span class="welcome-detail-label">Total Questions:</span>
            <span class="welcome-detail-value">20</span>
        </div>
        <div class="welcome-detail">
            <span class="welcome-detail-label">Total Marks:</span>
            <span class="welcome-detail-value">40</span>
        </div>
        <div class="welcome-detail">
            <span class="welcome-detail-label">Duration:</span>
            <span class="welcome-detail-value">15 minutes</span>
        </div>
        <div class="welcome-detail">
            <span class="welcome-detail-label">Marking:</span>
            <span class="welcome-detail-value">+2 / -0.50</span>
        </div>
    </div>
    
    <div class="welcome-instructions">
        <h3>Instructions</h3>
        <ul>
            <li>Read each question carefully before answering</li>
            <li>You can mark questions for review and come back later</li>
            <li>The timer will automatically submit the test when time is up</li>
            <li>Negative marking applies for wrong answers</li>
        </ul>
    </div>
    
    <div class="welcome-buttons">
        <button class="welcome-button" id="startTestBtn">
            <i class="fas fa-play"></i> Start Test
        </button>
        
        <a href="https://t.me/mocks_wallah" target="_blank" class="join-channel" rel="noopener">VISHAL😁RAVAN</a> <a href="https://youtube.com/@Vlogsbyvishalravan" target="_blank" rel="noopener" style="font-size:12px;opacity:.85;margin-left:6px;">(YouTube backup)</a>
    </div>
 </div>

    <!-- Main Test Interface (hidden initially) -->
    <div style="display:none" id="mainTestInterface">
        <div class="hdr">
            <div class="hdr-l">
                <div class="q-info" id="qInfo">Q1/20</div>
                <div class="timer" id="timer">15:00</div>
            </div>
            <div class="hdr-c">Mocks Wallah</div>
            <div class="hdr-r">
                <button class="theme-toggle" id="themeToggle"><i class="fas fa-moon"></i></button>
                <button class="btn btn-o btn-sm" id="menuBtn"><i class="fas fa-th"></i></button>
                <button class="btn btn-p btn-sm" id="subBtn">Submit</button>
            </div>
        </div>

        <div class="cont">
            
            <div class="q-card">
                <div class="lang">
                    <button class="lang-btn active" id="engBtn">English</button>
                    <button class="lang-btn" id="hinBtn">हिंदी</button>
                </div>

                <div id="compSec" class="comp" style="display:none">
                    <h4><i class="fas fa-book"></i> Comprehension</h4>
                    <div id="compCont"></div>
                </div>

                <div class="q-txt" id="qTxt"></div>
                <div class="opts" id="opts"></div>

                <div class="sol" id="sol">
                    <div class="sol-info" id="solInfo"></div>
                    <h4><i class="fas fa-lightbulb"></i> Solution</h4>
                    <div id="solCont"></div>
                </div>
            </div>
        </div>

        <div class="nav">
            <button class="btn btn-o nav-btn" id="prevBtn"><i class="fas fa-chevron-left"></i> Prev</button>
            <button class="btn btn-w nav-btn" id="reviewBtn"><i class="fas fa-flag"></i> Review</button>
            <div class="prog">
                <div id="progTxt">1 of 20</div>
                <div style="font-size:11px">Answered: <span id="ansCnt">0</span> | <a href="https://t.me/mocks_wallah" target="_blank" rel="noopener">VISHAL😁RAVAN</a> <a href="https://youtube.com/@Vlogsbyvishalravan" target="_blank" rel="noopener" style="font-size:12px;opacity:.85;margin-left:6px;">(YouTube backup)</a></div>
            </div>
            <button class="btn btn-p nav-btn" id="nextBtn">Next <i class="fas fa-chevron-right"></i></button>
        </div>

        <div class="desktop-sidebar" id="desktopSidebar">
            <h3>Questions Navigator</h3>
            <div class="q-grid" id="desktopQGrid"></div>
            <div style="margin-top:20px;font-size:12px;color:var(--txtL)">
                <div style="display:flex;align-items:center;gap:8px;margin-bottom:8px">
                    <div class="q-num ans" style="width:24px;height:24px">✓</div><span>Answered</span>
                </div>
                <div style="display:flex;align-items:center;gap:8px;margin-bottom:8px">
                    <div class="q-num review" style="width:24px;height:24px">!</div><span>Marked for Review</span>
                </div>
                <div style="display:flex;align-items:center;gap:8px;margin-bottom:8px">
                    <div class="q-num wrong" style="width:24px;height:24px">✗</div><span>Incorrect</span>
                </div>
                <div style="display:flex;align-items:center;gap:8px">
                    <div class="q-num unattempted" style="width:24px;height:24px">?</div><span>Unattempted</span>
                </div>
            </div>
        </div>

        <div class="panel" id="panel">
            <div class="panel-hdr">
                <h3>All Questions</h3>
                <button class="panel-close" id="panelClose"><i class="fas fa-times"></i></button>
            </div>
            <div class="q-grid" id="qGrid"></div>
            <div style="padding:20px;font-size:12px;color:var(--txtL)">
                <div style="display:flex;align-items:center;gap:8px;margin-bottom:8px">
                    <div class="q-num ans" style="width:24px;height:24px">✓</div><span>Answered</span>
                </div>
                <div style="display:flex;align-items:center;gap:8px;margin-bottom:8px">
                    <div class="q-num review" style="width:24px;height:24px">!</div><span>Marked for Review</span>
                </div>
                <div style="display:flex;align-items:center;gap:8px;margin-bottom:8px">
                    <div class="q-num wrong" style="width:24px;height:24px">✗</div><span>Incorrect</span>
                </div>
                <div style="display:flex;align-items:center;gap:8px">
                    <div class="q-num unattempted" style="width:24px;height:24px">?</div><span>Unattempted</span>
                </div>
            </div>
        </div>

        <button class="print-btn" id="printBtn" style="display:none">
            <i class="fas fa-print"></i>
        </button>

        <div class="modal" id="modalOver">
            <div class="result">
                <h2>Test Complete!</h2>
                <div class="score" id="scoreDisp">0/40</div>
                <div class="stats">
                    <div class="stat c"><div class="stat-val" id="corrStat">0</div><div class="stat-lbl">Correct</div></div>
                    <div class="stat w"><div class="stat-val" id="incStat">0</div><div class="stat-lbl">Incorrect</div></div>
                    <div class="stat"><div class="stat-val" id="unaStat">0</div><div class="stat-lbl">Unattempted</div></div>
                    <div class="stat"><div class="stat-val" id="timeStat">0</div><div class="stat-lbl">Minutes</div></div>
                </div>
                <div class="modal-acts">
                    <button class="btn btn-o modal-btn" id="closeModal">Close</button>
                    <button class="btn btn-p modal-btn" id="revBtn">Review</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        class TestApp {
            constructor() {
            this.qs = [
  {
    "question": "<style> img {max-width:100% !important} </style><p>__________ generally found in the hard disk&rsquo;s root directory, but it keeps on changing location.</p>",
    "options": [
      "<style> img {max-width:100% !important} </style><p>Rootkit</p>",
      "<style> img {max-width:100% !important} </style><p>Vienna virus</p>",
      "<style> img {max-width:100% !important} </style><p>Macro virus</p>",
      "<style> img {max-width:100% !important} </style><p>Parasitic virus</p>"
    ],
    "correct_option_id": 1,
    "solution": "<style> img {max-width:100% !important} </style><p><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\">The correct answer is option B</span></span></p>\r\n\r\n<p><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\">The <strong>Vienna virus </strong>is a type of boot sector virus that infects the master boot record (MBR) of a computer&#39;s hard drive. It often resides in the root directory of the disk and can sometimes change its location to avoid detection. This virus infects the MBR, which plays a crucial role in the system&#39;s boot process, allowing the virus to execute its code every time the computer starts up.</span></span></p>\r\n\r\n<p><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\">A <strong>rootkit</strong> is a type of malicious software that is designed to gain unauthorized access and control over a computer system while remaining hidden from detection. It often resides deep within the system and can manipulate various parts of the operating system to maintain its presence.</span></span></p>\r\n\r\n<p><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\">A <strong>macro virus</strong> is a type of virus that infects documents and spreadsheets that use macro programming languages, like Microsoft Office documents. These viruses attach themselves to the macros within these documents and can spread when the infected document is opened. </span></span></p>\r\n\r\n<p><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\">A <strong>parasitic virus</strong> is a type of virus that attaches itself to executable files and spreads by infecting other executable files. While they attach to files, they generally do not change their location within the root directory specifically. They spread by infecting other files wherever those files are located on the system.</span></span></p>",
    "question_index": 0
  },
  {
    "question": "<style> img {max-width:100% !important} </style><p>Convert (723)8 to binary number.</p>",
    "options": [
      "<style> img {max-width:100% !important} </style><p>111010011</p>",
      "<style> img {max-width:100% !important} </style><p>110110011</p>",
      "<style> img {max-width:100% !important} </style><p>111010101</p>",
      "<style> img {max-width:100% !important} </style><p>101110101</p>"
    ],
    "correct_option_id": 0,
    "solution": "<style> img {max-width:100% !important} </style><p><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\">The correct answer is option A</span></span></p>\r\n\r\n<p><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\">7 in binary system is written as 111</span></span></p>\r\n\r\n<p><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\">2 in binary system is written as 010</span></span></p>\r\n\r\n<p><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\">3 in binary system is written as 011</span></span></p>\r\n\r\n<p><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\">Thus, (723)<sub>8</sub> = (111010011)<sub>2</sub></span></span></p>",
    "question_index": 1
  },
  {
    "question": "<style> img {max-width:100% !important} </style><p>What does JPEG stands for?</p>",
    "options": [
      "<style> img {max-width:100% !important} </style><p>Joint Photographic Experts Group</p>",
      "<style> img {max-width:100% !important} </style><p>Java Programming Extension Graphics</p>",
      "<style> img {max-width:100% !important} </style><p>Jumbled Pixel Encoding Generator</p>",
      "<style> img {max-width:100% !important} </style><p>Jargon for Photo Enhancement Graphic</p>"
    ],
    "correct_option_id": 0,
    "solution": "<style> img {max-width:100% !important} </style><p><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\">The correct answer is option A</span></span></p>\r\n\r\n<p><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\"><strong>JPEG</strong> stands for &quot;<strong>Joint Photographic Experts Group</strong>.&quot; It is a widely used image compression standard that was developed by a committee of experts from the Joint Photographic Experts Group, hence the acronym. This group was established in 1986 with the goal of creating a standardized method for compressing digital images while maintaining acceptable image quality.</span></span></p>",
    "question_index": 2
  },
  {
    "question": "<style> img {max-width:100% !important} </style><p>Which of the following is a low-level language?</p>",
    "options": [
      "<style> img {max-width:100% !important} </style><p>JAVA</p>",
      "<style> img {max-width:100% !important} </style><p>FORTRAN</p>",
      "<style> img {max-width:100% !important} </style><p>Assembly language</p>",
      "<style> img {max-width:100% !important} </style><p>C#</p>"
    ],
    "correct_option_id": 2,
    "solution": "<style> img {max-width:100% !important} </style><p><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\">The correct answer is option C</span></span></p>\r\n\r\n<p><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\">A <strong>low-level language</strong> is a programming language that is closer to machine code and hardware. <strong>Assembly language</strong> is a type of <strong>low-level language</strong> that uses mnemonic codes to represent machine instructions. Programmers write code in assembly language to interact directly with the computer&#39;s hardware and perform specific tasks. It is more human-readable than machine code but still closely tied to the architecture of the computer&#39;s CPU.</span></span></p>",
    "question_index": 3
  },
  {
    "question": "<style> img {max-width:100% !important} </style><p>Which of the following is not a feature of computer?</p>",
    "options": [
      "<style> img {max-width:100% !important} </style><p>Speed</p>",
      "<style> img {max-width:100% !important} </style><p>Reliability</p>",
      "<style> img {max-width:100% !important} </style><p>Storage</p>",
      "<style> img {max-width:100% !important} </style><p>Economy</p>"
    ],
    "correct_option_id": 3,
    "solution": "<style> img {max-width:100% !important} </style><p><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\">The correct answer is option D</span></span></p>\r\n\r\n<p><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\">The economy is not typically considered a feature of a computer. Speed, Reliability, and Storage are all commonly recognized features of computers.</span></span></p>",
    "question_index": 4
  },
  {
    "question": "<style> img {max-width:100% !important} </style><p>Which of the following is known as the nerve centre of the computer?</p>",
    "options": [
      "<style> img {max-width:100% !important} </style><p>ALU</p>",
      "<style> img {max-width:100% !important} </style><p>Control Units</p>",
      "<style> img {max-width:100% !important} </style><p>Clock Speed</p>",
      "<style> img {max-width:100% !important} </style><p>BUS</p>"
    ],
    "correct_option_id": 1,
    "solution": "<style> img {max-width:100% !important} </style><p><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\">The correct answer is option B</span></span></p>\r\n\r\n<p><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\">The <strong>control unit</strong> is often referred to as the &quot;<strong>nerve centre</strong>&quot; of a computer. It plays a crucial role in managing and coordinating the various components of a computer&#39;s central processing unit (CPU). The control unit is responsible for fetching instructions from memory, decoding them, executing them by sending control signals to other parts of the CPU, and managing the overall operation of the computer&#39;s hardware components. It acts as the central coordinator, much like the nervous system&#39;s role in the human body.</span></span></p>",
    "question_index": 5
  },
  {
    "question": "<style> img {max-width:100% !important} </style><p>The arrow keys, End key, Page up key and Page down key in a computer keyboard are collectively known as:</p>",
    "options": [
      "<style> img {max-width:100% !important} </style><p>Navigation keys</p>",
      "<style> img {max-width:100% !important} </style><p>Adjustment keys</p>",
      "<style> img {max-width:100% !important} </style><p>Function keys</p>",
      "<style> img {max-width:100% !important} </style><p>Special purpose keys</p>"
    ],
    "correct_option_id": 0,
    "solution": "<style> img {max-width:100% !important} </style><p><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\">The correct answer is option A</span></span></p>\r\n\r\n<p><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\">The <strong>arrow keys</strong> (up, down, left, right), <strong>End key</strong>, <strong>Page Up key</strong>, and <strong>Page Down key</strong> on a computer keyboard are collectively known as navigation keys. These keys are used to move the cursor or scroll through documents, web pages, and other content. They <strong>assist in navigating and controlling the position of the cursor</strong> within different applications and interfaces.</span></span></p>",
    "question_index": 6
  },
  {
    "question": "<style> img {max-width:100% !important} </style><p>What is the name given to the technique of connecting computers?</p>",
    "options": [
      "<style> img {max-width:100% !important} </style><p>Node</p>",
      "<style> img {max-width:100% !important} </style><p>Topology</p>",
      "<style> img {max-width:100% !important} </style><p>Architecture</p>",
      "<style> img {max-width:100% !important} </style><p>Ring</p>"
    ],
    "correct_option_id": 1,
    "solution": "<style> img {max-width:100% !important} </style><p><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\">The correct answer is option B</span></span></p>\r\n\r\n<p><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\">Topology refers to the arrangement or layout of the elements in a computer network, including how computers and other devices are connected and how data flows between them. Different types of network topologies, such as star, bus, ring, mesh, and more, define how the nodes (computers or devices) are interconnected. Each topology has its own characteristics and advantages.</span></span></p>",
    "question_index": 7
  },
  {
    "question": "<style> img {max-width:100% !important} </style><p>The blinking symbol on the computer is called:</p>",
    "options": [
      "<style> img {max-width:100% !important} </style><p>Mouse</p>",
      "<style> img {max-width:100% !important} </style><p>Hand</p>",
      "<style> img {max-width:100% !important} </style><p>Cursor</p>",
      "<style> img {max-width:100% !important} </style><p>Logo</p>"
    ],
    "correct_option_id": 2,
    "solution": "<style> img {max-width:100% !important} </style><p><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\">The correct answer is option C</span></span></p>\r\n\r\n<p><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\">The blinking symbol on a computer screen that indicates the current position where text or other content will be entered is called a cursor. It can take various shapes, such as a vertical line, an underscore, or a block, depending on the context and the application being used. The cursor is controlled using input devices like the mouse or keyboard arrows, allowing users to interact with and manipulate the content on the screen.</span></span></p>",
    "question_index": 8
  },
  {
    "question": "<style> img {max-width:100% !important} </style><p>Which of the following printers is generally very noisy?</p>",
    "options": [
      "<style> img {max-width:100% !important} </style><p>Dot-Matrix printer</p>",
      "<style> img {max-width:100% !important} </style><p>Laser printer</p>",
      "<style> img {max-width:100% !important} </style><p>Inkjet printer</p>",
      "<style> img {max-width:100% !important} </style><p>Non-Impact printer</p>"
    ],
    "correct_option_id": 0,
    "solution": "<style> img {max-width:100% !important} </style><p><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\">The correct answer is option A</span></span></p>\r\n\r\n<p><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\"><strong>Dot-matrix printers are known for their characteristic noise due to their printing mechanism</strong>. These printers use a series of small pins to strike an ink ribbon, creating dots on the paper to form characters and images. The mechanical nature of the printing process, involving the impact of pins on the ribbon, generates noticeable noise, which is why dot-matrix printers are considered to be relatively noisy compared to other types of printers like laser and inkjet printers.</span></span></p>",
    "question_index": 9
  },
  {
    "question": "<style> img {max-width:100% !important} </style><p>Identify whether the given statements are true or false.<br />\r\n(i) SDRAM is known as Synchronous DRAM, and it is faster than the general DRAM.<br />\r\n(ii) SRAM is faster than DRAM, but it requires continuous refreshing.</p>",
    "options": [
      "<style> img {max-width:100% !important} </style><p>(i) true, (ii) false</p>",
      "<style> img {max-width:100% !important} </style><p>(i) true, (ii) true</p>",
      "<style> img {max-width:100% !important} </style><p>(i) false, (ii) true</p>",
      "<style> img {max-width:100% !important} </style><p>(i) false, (ii) true</p>"
    ],
    "correct_option_id": 0,
    "solution": "<style> img {max-width:100% !important} </style><p><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\">The correct answer is option A</span></span></p>\r\n\r\n<p><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\">SDRAM stands for Synchronous Dynamic Random-Access Memory, and it is indeed faster than the general DRAM. The &quot;synchronous&quot; aspect of SDRAM refers to its synchronization with the system clock, which allows for more efficient and faster data transfers compared to asynchronous DRAM.</span></span></p>\r\n\r\n<p><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\">SRAM (Static Random-Access Memory) is faster than DRAM, and unlike DRAM, it does not require continuous refreshing to maintain data. SRAM is relatively faster and more energy-efficient, making it suitable for cache memory and high-performance applications.</span></span></p>",
    "question_index": 10
  },
  {
    "question": "<style> img {max-width:100% !important} </style><p>Which of the following is the oldest web browser still in general use?</p>",
    "options": [
      "<style> img {max-width:100% !important} </style><p>Lynx</p>",
      "<style> img {max-width:100% !important} </style><p>Safari</p>",
      "<style> img {max-width:100% !important} </style><p>Internet Explorer</p>",
      "<style> img {max-width:100% !important} </style><p>Navigator</p>"
    ],
    "correct_option_id": 0,
    "solution": "<style> img {max-width:100% !important} </style><p><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\">The correct answer is option A</span></span></p>\r\n\r\n<p><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\">Among the options provided, the oldest web browser still in general use is Lynx. Lynx is a text-based web browser that was first developed in 1992. It is primarily used to access websites and navigate the web in a text-only format. Unlike graphical browsers, Lynx doesn&#39;t display images or multimedia content but is still used today, especially in situations where graphical browsers are not practical or accessible, such as command-line environments or for users with visual impairments.</span></span></p>",
    "question_index": 11
  },
  {
    "question": "<style> img {max-width:100% !important} </style><p>A computer which provides its services to another computer on a network is termed as?</p>",
    "options": [
      "<style> img {max-width:100% !important} </style><p>Backend system</p>",
      "<style> img {max-width:100% !important} </style><p>Client</p>",
      "<style> img {max-width:100% !important} </style><p>Server</p>",
      "<style> img {max-width:100% !important} </style><p>Gateway</p>"
    ],
    "correct_option_id": 2,
    "solution": "<style> img {max-width:100% !important} </style><p><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\">The correct answer is option C </span></span></p>\r\n\r\n<p><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\">A computer that provides services, resources, or information to other computers on a network is referred to as a server. Servers are designed to handle various tasks such as hosting websites, managing emails, storing files, providing databases, and more. Clients, on the other hand, are the computers or devices that request and use the services provided by servers. Servers and clients work together to enable communication and data exchange in a networked environment.</span></span></p>",
    "question_index": 12
  },
  {
    "question": "<style> img {max-width:100% !important} </style><p>In MS-Word 2010, the Page Down key is used to:</p>",
    "options": [
      "<style> img {max-width:100% !important} </style><p>move the cursor to the last page when the document contains multiple pages</p>",
      "<style> img {max-width:100% !important} </style><p>move the cursor one paragraph down</p>",
      "<style> img {max-width:100% !important} </style><p>move the cursor one line down</p>",
      "<style> img {max-width:100% !important} </style><p>move the cursor one screen down</p>"
    ],
    "correct_option_id": 3,
    "solution": "<style> img {max-width:100% !important} </style><p><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\">The correct answer is option D</span></span></p>\r\n\r\n<p><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\">In MS-Word 2010, pressing the Page Down key moves the cursor down by one screen, which typically corresponds to the visible portion of the document on the screen. This allows you to quickly navigate through the content without moving just one line or one paragraph at a time.</span></span></p>",
    "question_index": 13
  },
  {
    "question": "<style> img {max-width:100% !important} </style><p>What is the formula used in MS-Excel to join two strings?</p>",
    "options": [
      "<style> img {max-width:100% !important} </style><p>ADD</p>",
      "<style> img {max-width:100% !important} </style><p>JOIN</p>",
      "<style> img {max-width:100% !important} </style><p>CONCATENATE</p>",
      "<style> img {max-width:100% !important} </style><p>SUM</p>"
    ],
    "correct_option_id": 2,
    "solution": "<style> img {max-width:100% !important} </style><p><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\">The correct answer is option C</span></span></p>\r\n\r\n<p><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\">CONCATENATE function is used to join two or more string into one string.</span></span></p>\r\n\r\n<p><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\">Syntax: CONCATENATE(text1, [text2], ...)</span></span></p>",
    "question_index": 14
  },
  {
    "question": "<style> img {max-width:100% !important} </style><p>Which one of the following keyboard shortcut is used to open the &ldquo;save as&rdquo; dialog box in Microsoft PowerPoint 2007?</p>",
    "options": [
      "<style> img {max-width:100% !important} </style><p>Ctrl + F2</p>",
      "<style> img {max-width:100% !important} </style><p>Alt + F2</p>",
      "<style> img {max-width:100% !important} </style><p>Alt + F5</p>",
      "<style> img {max-width:100% !important} </style><p>Ctrl + S</p>"
    ],
    "correct_option_id": 1,
    "solution": "<style> img {max-width:100% !important} </style><p><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\">The correct answer is option B</span></span></p>\r\n\r\n<ul>\r\n\t<li><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\">Alt + F5: start the presentation in presenter view</span></span></li>\r\n\t<li><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\">Ctrl + F2: Print preview mode</span></span></li>\r\n\t<li><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\">Ctrl + S: save an existing file after update</span></span></li>\r\n\t<li><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\">Alt + F2: open the save as window </span></span></li>\r\n</ul>",
    "question_index": 15
  },
  {
    "question": "<style> img {max-width:100% !important} </style><p>Which of the following options specify how many instances of an entity relate to one instance of another entity?</p>",
    "options": [
      "<style> img {max-width:100% !important} </style><p>Redundancy</p>",
      "<style> img {max-width:100% !important} </style><p>Ordinality</p>",
      "<style> img {max-width:100% !important} </style><p>Atomicity</p>",
      "<style> img {max-width:100% !important} </style><p>Cardinality</p>"
    ],
    "correct_option_id": 3,
    "solution": "<style> img {max-width:100% !important} </style><p><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\">The correct answer is option D</span></span></p>\r\n\r\n<p><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\">Cardinality in the context of database design refers to how many instances of one entity can be related to instances of another entity. It describes the relationship between entities in terms of numbers. For example, one-to-one, one-to-many, and many-to-many relationships have different cardinalities that define how instances of one entity are associated with instances of another entity in a database schema.</span></span></p>\r\n\r\n<p>&nbsp;</p>",
    "question_index": 16
  },
  {
    "question": "<style> img {max-width:100% !important} </style><p>Consider the following statements and choose the correct option that follows:<br />\r\nStatements:<br />\r\n(i) Operating System is the main part of Application software<br />\r\n(ii) Assembly language is made up of only 0s and 1s.<br />\r\n(iii) Software provides easy to use interface to work with the hardware components.</p>",
    "options": [
      "<style> img {max-width:100% !important} </style><p>Only (i) and (ii) are true</p>",
      "<style> img {max-width:100% !important} </style><p>Only (ii) and (iii) are true</p>",
      "<style> img {max-width:100% !important} </style><p>Only (iii) is true</p>",
      "<style> img {max-width:100% !important} </style><p>Only (ii) is true</p>"
    ],
    "correct_option_id": 2,
    "solution": "<style> img {max-width:100% !important} </style><p><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\">The correct option is C</span></span></p>\r\n\r\n<p><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\">(i) The operating system and application software are <strong>two distinct categories</strong> of software.</span></span></p>\r\n\r\n<p><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\">(ii) Assembly language is a low-level programming language that <strong>uses mnemonic</strong> codes to represent machine instructions.</span></span></p>\r\n\r\n<p><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\">(iii) Software acts as an intermediary between users and hardware components, providing an interface that is more user-friendly and easier to understand than direct interaction with hardware.</span></span></p>",
    "question_index": 17
  },
  {
    "question": "<style> img {max-width:100% !important} </style><p>Which of the following keyboard shortcut is used in a Windows 10 system to switch between open application?</p>",
    "options": [
      "<style> img {max-width:100% !important} </style><p>Alt + Tab</p>",
      "<style> img {max-width:100% !important} </style><p>Alt + S</p>",
      "<style> img {max-width:100% !important} </style><p>Ctrl + S</p>",
      "<style> img {max-width:100% !important} </style><p>Ctrl + Tab</p>"
    ],
    "correct_option_id": 0,
    "solution": "<style> img {max-width:100% !important} </style><p><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\">The correct answer is option A</span></span></p>\r\n\r\n<table border=\"1\" style=\"width:430px\">\r\n\t<thead>\r\n\t\t<tr>\r\n\t\t\t<td style=\"background-color:#f7f7f8; border-bottom:1px solid #d9d9e3; border-left:1px solid #d9d9e3; border-right:1px solid #d9d9e3; border-top:1px solid #d9d9e3; height:2px; vertical-align:bottom\">\r\n\t\t\t<p><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\"><strong>Keyboard Shortcut</strong></span></span></p>\r\n\t\t\t</td>\r\n\t\t\t<td style=\"background-color:#f7f7f8; border-bottom:1px solid #d9d9e3; border-left:1px solid #d9d9e3; border-right:1px solid #d9d9e3; border-top:1px solid #d9d9e3; height:2px; vertical-align:bottom\">\r\n\t\t\t<p><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\"><strong>Function</strong></span></span></p>\r\n\t\t\t</td>\r\n\t\t</tr>\r\n\t</thead>\r\n\t<tbody>\r\n\t\t<tr>\r\n\t\t\t<td style=\"background-color:#f7f7f8; border-bottom:1px solid #d9d9e3; border-left:1px solid #d9d9e3; border-right:1px solid #d9d9e3; border-top:1px solid #d9d9e3; height:2px; vertical-align:bottom\">\r\n\t\t\t<p><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\"><strong>Alt + Tab</strong></span></span></p>\r\n\t\t\t</td>\r\n\t\t\t<td style=\"background-color:#f7f7f8; border-bottom:1px solid #d9d9e3; border-left:1px solid #d9d9e3; border-right:1px solid #d9d9e3; border-top:1px solid #d9d9e3; height:2px; vertical-align:bottom\">\r\n\t\t\t<p><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\"><strong>Switch between open applications.</strong></span></span></p>\r\n\t\t\t</td>\r\n\t\t</tr>\r\n\t\t<tr>\r\n\t\t\t<td style=\"background-color:#f7f7f8; border-bottom:1px solid #d9d9e3; border-left:1px solid #d9d9e3; border-right:1px solid #d9d9e3; border-top:1px solid #d9d9e3; height:2px; vertical-align:bottom\">\r\n\t\t\t<p><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\"><strong>Ctrl + S</strong></span></span></p>\r\n\t\t\t</td>\r\n\t\t\t<td style=\"background-color:#f7f7f8; border-bottom:1px solid #d9d9e3; border-left:1px solid #d9d9e3; border-right:1px solid #d9d9e3; border-top:1px solid #d9d9e3; height:2px; vertical-align:bottom\">\r\n\t\t\t<p><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\"><strong>Save the currently active file/document.</strong></span></span></p>\r\n\t\t\t</td>\r\n\t\t</tr>\r\n\t\t<tr>\r\n\t\t\t<td style=\"background-color:#f7f7f8; border-bottom:1px solid #d9d9e3; border-left:1px solid #d9d9e3; border-right:1px solid #d9d9e3; border-top:1px solid #d9d9e3; height:2px; vertical-align:bottom\">\r\n\t\t\t<p><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\"><strong>Ctrl + Tab</strong></span></span></p>\r\n\t\t\t</td>\r\n\t\t\t<td style=\"background-color:#f7f7f8; border-bottom:1px solid #d9d9e3; border-left:1px solid #d9d9e3; border-right:1px solid #d9d9e3; border-top:1px solid #d9d9e3; height:2px; vertical-align:bottom\">\r\n\t\t\t<p><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\"><strong>Navigate between tabs in certain applications.</strong></span></span></p>\r\n\t\t\t</td>\r\n\t\t</tr>\r\n\t</tbody>\r\n</table>",
    "question_index": 18
  },
  {
    "question": "<style> img {max-width:100% !important} </style><p>What is Distributed Denial of Service (DDoS) attack?</p>",
    "options": [
      "<style> img {max-width:100% !important} </style><p>A computer game</p>",
      "<style> img {max-width:100% !important} </style><p>A cyber attack</p>",
      "<style> img {max-width:100% !important} </style><p>A military attack system</p>",
      "<style> img {max-width:100% !important} </style><p>Seizure of a service</p>"
    ],
    "correct_option_id": 1,
    "solution": "<style> img {max-width:100% !important} </style><p><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\">The correct answer is option B</span></span></p>\r\n\r\n<p><span style=\"font-size:11pt\"><span style=\"font-family:Calibri,sans-serif\">A <strong>Distributed Denial of Service (DDoS) attack</strong> is a type of <strong>cyber attack</strong> where multiple compromised computers are used to flood a target system or network with a massive amount of traffic, overwhelming its resources and causing it to become unavailable to legitimate users. The goal of a DDoS attack is to disrupt the normal functioning of a website, server, or network by making it unreachable or significantly slow down its performance.</span></span></p>",
    "question_index": 19
  }
];
            this.sections = null;
            this.curQ = 0;
            this.ans = new Array(this.qs.length).fill(null);
            this.reviewed = new Array(this.qs.length).fill(false);
            this.startT = Date.now();
            this.timeLeft = 15 * 60;
            this.timeSpent = new Array(this.qs.length).fill(0);
            this.lastQTime = this.startT;
            this.sub = false;
            this.eng = true;
            this.darkMode = false;
            this.timer = null;
            this.sectionTimer = null;
            this.currentSection = this.sections ? 0 : null;
            this.initEls();
            this.setupWelcomeScreen();
            this.validateData();
            this.setupBeforeUnload();
        }
            
            setupWelcomeScreen() {
                document.getElementById('startTestBtn').addEventListener('click', () => {
                    // Hide welcome screen
                    document.getElementById('welcomeScreen').classList.add('hidden');
                    
                    // Show main test interface
                    document.getElementById('mainTestInterface').style.display = '';
                    
                    // Initialize the test
                    setTimeout(() => {
                        this.init();
                    }, 300);
                });
            }
            
            setupBeforeUnload() {
                window.addEventListener('beforeunload', (e) => {
                    if (!this.sub) {
                        e.preventDefault();
                        e.returnValue = 'Are you sure you want to leave? Your test progress will be lost.';
                        return e.returnValue;
                    }
                });
            }
            
            validateData() {
                console.log('Validating question data...');
                this.qs.forEach((q, idx) => {
                    if (q.correct_option_id !== undefined) {
                        console.log(`Q${idx + 1}: correct_option_id = ${q.correct_option_id}, options count = ${q.options ? q.options.length : 0}`);
                        
                        if (q.options && (q.correct_option_id < 0 || q.correct_option_id >= q.options.length)) {
                            console.warn(`Q${idx + 1}: Invalid correct_option_id ${q.correct_option_id} for ${q.options.length} options`);
                        }
                    }
                });
            }
            
            initEls() {
                this.els = {
                    qInfo: document.getElementById('qInfo'),
                    progTxt: document.getElementById('progTxt'),
                    ansCnt: document.getElementById('ansCnt'),
                    timer: document.getElementById('timer'),
                    qTxt: document.getElementById('qTxt'),
                    compSec: document.getElementById('compSec'),
                    compCont: document.getElementById('compCont'),
                    opts: document.getElementById('opts'),
                    sol: document.getElementById('sol'),
                    solCont: document.getElementById('solCont'),
                    solInfo: document.getElementById('solInfo'),
                    qGrid: document.getElementById('qGrid'),
                    desktopQGrid: document.getElementById('desktopQGrid'),
                    panel: document.getElementById('panel'),
                    modalOver: document.getElementById('modalOver'),
                    scoreDisp: document.getElementById('scoreDisp'),
                    corrStat: document.getElementById('corrStat'),
                    incStat: document.getElementById('incStat'),
                    unaStat: document.getElementById('unaStat'),
                    timeStat: document.getElementById('timeStat'),
                    printBtn: document.getElementById('printBtn'),
                    desktopSidebar: document.getElementById('desktopSidebar'),
                    reviewBtn: document.getElementById('reviewBtn'),
                    themeToggle: document.getElementById('themeToggle'),
                    sectionHeader: this.sections ? document.getElementById('sectionHeader') : null,
                    sectionTitle: this.sections ? document.getElementById('sectionTitle') : null,
                    sectionTimer: this.sections ? document.getElementById('sectionTimer') : null
                };
            }
            
            init() {
                this.createGrid();
                this.startTimer();
                if (this.sections) {
                    this.startSectionTimer();
                    this.updateSectionHeader();
                }
                this.loadQ(0);
                this.setupEvents();
                this.updatePrintButton();
                this.updateThemeToggleIcon();
            }
            
            setupEvents() {
                document.getElementById('menuBtn').onclick = () => this.togglePanel();
                document.getElementById('subBtn').onclick = () => this.confirmSub();
                document.getElementById('prevBtn').onclick = () => this.nav(-1);
                document.getElementById('nextBtn').onclick = () => this.nav(1);
                document.getElementById('reviewBtn').onclick = () => this.toggleReview();
                document.getElementById('engBtn').onclick = () => this.setLang(true);
                document.getElementById('hinBtn').onclick = () => this.setLang(false);
                document.getElementById('panelClose').onclick = () => this.closePanel();
                document.getElementById('closeModal').onclick = () => this.closeModal();
                document.getElementById('revBtn').onclick = () => this.review();
                document.getElementById('printBtn').onclick = () => this.printTest();
                document.getElementById('themeToggle').onclick = () => this.toggleTheme();
            }
            
            // IMPROVED: Better handling of complex HTML content including math expressions
            extractTxt(html, isEng) {
                if (!html) return '';
                
                // Create a temporary div to parse the HTML
                const tempDiv = document.createElement('div');
                tempDiv.innerHTML = html;
                
                // Process math expressions - convert them to proper HTML structure
                const mathExps = tempDiv.querySelectorAll('div[style*="inline-block"][style*="vertical-align: middle"]');
                mathExps.forEach(mathExp => {
                    // Create a new math expression container
                    const newMathExp = document.createElement('div');
                    newMathExp.className = 'math-exp';
                    
                    // Get numerator and denominator
                    const spans = mathExp.querySelectorAll('span');
                    if (spans.length >= 3) {
                        const numerator = spans[0].cloneNode(true);
                        const line = spans[1].cloneNode(true);
                        const denominator = spans[2].cloneNode(true);
                        
                        // Clean up the numerator
                        const numDiv = document.createElement('div');
                        numDiv.className = 'math-num';
                        numDiv.innerHTML = numerator.innerHTML;
                        
                        // Create the dividing line
                        const lineDiv = document.createElement('div');
                        lineDiv.className = 'math-line';
                        
                        // Clean up the denominator
                        const denDiv = document.createElement('div');
                        denDiv.className = 'math-num';
                        denDiv.innerHTML = denominator.innerHTML;
                        
                        // Build the new math expression
                        newMathExp.appendChild(numDiv);
                        newMathExp.appendChild(lineDiv);
                        newMathExp.appendChild(denDiv);
                        
                        // Replace the original with our new structure
                        mathExp.parentNode.replaceChild(newMathExp, mathExp);
                    }
                });
                
                // Handle language selection - show/hide appropriate spans
                const langSpans = tempDiv.querySelectorAll('span.eqt, span.hqt');
                langSpans.forEach(span => {
                    if ((isEng && span.classList.contains('hqt')) || 
                        (!isEng && span.classList.contains('eqt'))) {
                        span.style.display = 'none';
                    } else {
                        span.style.display = '';
                        // Remove the class to prevent future hiding
                        span.classList.remove('eqt', 'hqt');
                    }
                });
                
                // Clean up any remaining display:none styles
                const hiddenElements = tempDiv.querySelectorAll('[style*="display:none"]');
                hiddenElements.forEach(el => {
                    if (el.style.display === 'none' && 
                        !el.classList.contains('hqt') && 
                        !el.classList.contains('eqt')) {
                        el.style.display = '';
                    }
                });
                
                // Handle tables - wrap them in a scrollable container
                const tables = tempDiv.querySelectorAll('table');
                tables.forEach(table => {
                    const container = document.createElement('div');
                    container.className = 'table-container';
                    table.parentNode.insertBefore(container, table);
                    container.appendChild(table);
                });
                
                return tempDiv.innerHTML;
            }
            
            createGrid() {
                this.els.qGrid.innerHTML = '';
                this.els.desktopQGrid.innerHTML = '';
                
                this.qs.forEach((_, i) => {
                    // Create mobile grid element
                    const mobileDiv = document.createElement('div');
                    mobileDiv.className = 'q-num';
                    mobileDiv.textContent = i + 1;
                    mobileDiv.onclick = () => this.goToQ(i);
                    this.els.qGrid.appendChild(mobileDiv);
                    
                    // Create desktop grid element
                    const desktopDiv = document.createElement('div');
                    desktopDiv.className = 'q-num';
                    desktopDiv.textContent = i + 1;
                    desktopDiv.onclick = () => this.goToQ(i);
                    this.els.desktopQGrid.appendChild(desktopDiv);
                });
            }
            
            loadQ(idx) {
                // Update time spent on previous question
                if (this.curQ !== idx) {
                    const now = Date.now();
                    this.timeSpent[this.curQ] += (now - this.lastQTime) / 1000;
                    this.lastQTime = now;
                }
                
                this.curQ = idx;
                const q = this.qs[idx];
                
                // Check if question is in current section (if sections exist)
                if (this.sections) {
                    const inCurrentSection = this.isInCurrentSection(idx);
                    if (!inCurrentSection) {
                        // Find the section this question belongs to
                        const sectionIdx = this.findSectionForQuestion(idx);
                        if (sectionIdx !== null && !this.sections[sectionIdx].submitted) {
                            this.currentSection = sectionIdx;
                            this.startSectionTimer();
                            this.updateSectionHeader();
                        }
                    }
                }
                
                this.els.qInfo.textContent = `Q${idx + 1}/${this.qs.length}`;
                this.els.progTxt.textContent = `${idx + 1} of ${this.qs.length}`;
                this.updateAnsCnt();
                this.updateNav();
                this.updateGrid();
                this.updateReviewButton();
                
                if (q.comp) {
                    this.els.compSec.style.display = 'block';
                    this.els.compCont.innerHTML = this.extractTxt(q.comp, this.eng);
                } else {
                    this.els.compSec.style.display = 'none';
                }
                
                this.els.qTxt.innerHTML = this.extractTxt(q.question, this.eng);
                this.loadOpts(q, idx);
                
                if (this.sub && q.solution) {
                    // Show time spent on question in solution
                    const timeSpent = Math.round(this.timeSpent[idx]);
                    const minutes = Math.floor(timeSpent / 60);
                    const seconds = timeSpent % 60;
                    const timeStr = minutes > 0 
                        ? `${minutes}m ${seconds}s` 
                        : `${seconds}s`;
                    
                    this.els.solInfo.innerHTML = `
                        <span><i class="fas fa-clock"></i> Time spent: ${timeStr}</span>
                        <span><i class="fas fa-check-circle"></i> Correct answer: ${String.fromCharCode(65 + q.correct_option_id)}</span>
                    `;
                    
                    this.els.solCont.innerHTML = this.extractTxt(q.solution, this.eng);
                    this.els.sol.classList.add('show');
                } else {
                    this.els.sol.classList.remove('show');
                }
            }
            
            loadOpts(q, qIdx) {
                this.els.opts.innerHTML = '';
                const userAnswer = this.ans[qIdx];
                const correctAnswer = q.correct_option_id;
                
                console.log(`Loading Q${qIdx + 1} options:`, {
                    userAnswer: userAnswer,
                    correctAnswer: correctAnswer,
                    submitted: this.sub,
                    optionsCount: q.options ? q.options.length : 0
                });
                
                if (!q.options || !Array.isArray(q.options)) {
                    console.error(`Q${qIdx + 1}: No valid options array`);
                    return;
                }
                
                q.options.forEach((opt, i) => {
                    const div = document.createElement('div');
                    let cls = 'opt';
                    
                    if (this.sub) {
                        cls += ' submitted';
                    }
                    
                    if (userAnswer === i) {
                        cls += ' sel';
                        console.log(`Q${qIdx + 1}: User selected option ${i}`);
                    }
                    
                    if (this.sub && correctAnswer !== undefined && correctAnswer !== null) {
                        if (i === correctAnswer) {
                            cls += ' correct';
                            console.log(`Q${qIdx + 1}: Option ${i} marked as correct (is correct answer)`);
                        } else if (userAnswer === i && userAnswer !== correctAnswer) {
                            cls += ' wrong';
                            console.log(`Q${qIdx + 1}: Option ${i} marked as wrong (user selected but incorrect)`);
                        }
                    }
                    
                    div.className = cls;
                    div.innerHTML = `
                        <div class="opt-radio"></div>
                        <div class="opt-txt">${this.extractTxt(opt, this.eng)}</div>
                    `;
                    
                    if (!this.sub) {
                        div.onclick = () => this.selOpt(i, qIdx);
                    }
                    
                    this.els.opts.appendChild(div);
                });
            }
            
            selOpt(optIdx, qIdx) {
                if (this.sub) return;
                this.ans[qIdx] = this.ans[qIdx] === optIdx ? null : optIdx;
                console.log(`Q${qIdx + 1}: Selected option ${optIdx}, answer array:`, this.ans[qIdx]);
                this.loadOpts(this.qs[qIdx], qIdx);
                this.updateAnsCnt();
                this.updateGrid();
            }
            
            toggleReview() {
                if (this.sub) return;
                this.reviewed[this.curQ] = !this.reviewed[this.curQ];
                this.updateGrid();
                this.updateReviewButton();
            }
            
            updateReviewButton() {
                const btn = this.els.reviewBtn;
                if (this.reviewed[this.curQ]) {
                    btn.classList.add('active');
                    btn.innerHTML = '<i class="fas fa-flag"></i>';
                } else {
                    btn.classList.remove('active');
                    btn.innerHTML = '<i class="fas fa-flag"></i>';
                }
            }
            
           nav(dir) {
            const newIdx = this.curQ + dir;
            
            // If test is submitted, allow free navigation for review
            if (this.sub) {
                if (newIdx >= 0 && newIdx < this.qs.length) {
                    this.loadQ(newIdx);
                }
                return;
            }
            
            // During test, enforce section boundaries
            if (this.sections) {
                const currentSection = this.sections[this.currentSection];
                if (newIdx < currentSection.start || newIdx > currentSection.end) {
                    return; // Don't allow navigation outside current section
                }
            }
            
            if (newIdx >= 0 && newIdx < this.qs.length) {
                this.loadQ(newIdx);
            }
        }
        
        goToQ(idx) {
            // Always allow navigation when reviewing after submission
            if (this.sub) {
                this.loadQ(idx);
                this.closePanel();
                return;
            }
            
            // During test, only allow navigation within current section
            if (this.sections) {
                const currentSection = this.sections[this.currentSection];
                if (idx < currentSection.start || idx > currentSection.end) {
                    return; // Block navigation outside current section
                }
            }
            
            this.loadQ(idx);
            this.closePanel();
        }
        
        updateGrid() {
            const nums = this.els.qGrid.querySelectorAll('.q-num');
            const desktopNums = this.els.desktopQGrid.querySelectorAll('.q-num');
            
            const updateNum = (el, i) => {
                el.className = 'q-num';
                
                // Reset all special classes
                el.classList.remove('cur', 'ans', 'wrong', 'review', 'unattempted', 'disabled');
                
                if (i === this.curQ) {
                    el.classList.add('cur');
                } else if (this.sub) {
                    // After submission - prioritize correct/wrong over review status
                    if (this.ans[i] !== null && this.qs[i].correct_option_id !== undefined) {
                        if (this.ans[i] === this.qs[i].correct_option_id) {
                            el.classList.add('ans');
                        } else {
                            el.classList.add('wrong');
                        }
                    } else if (this.ans[i] === null) {
                        el.classList.add('unattempted');
                    }
                } else {
                    // Before submission
                    if (this.reviewed[i]) {
                        el.classList.add('review');
                    } else if (this.ans[i] !== null) {
                        el.classList.add('ans');
                    }
                    
                    // Disable questions from other sections (only if sections exist)
                    if (this.sections) {
                        const currentSection = this.sections[this.currentSection];
                        if (i < currentSection.start || i > currentSection.end) {
                            el.classList.add('disabled');
                        }
                    }
                }
            };
            
            nums.forEach(updateNum);
            desktopNums.forEach(updateNum);
        }
        
        updateNav() {
            // Basic navigation limits
            document.getElementById('prevBtn').disabled = this.curQ === 0;
            document.getElementById('nextBtn').disabled = this.curQ === this.qs.length - 1;
            document.getElementById('reviewBtn').style.display = this.sub ? 'none' : 'inline-flex';
            
            // Additional navigation restrictions for sections during test
            if (this.sections && !this.sub) {
                const currentSection = this.sections[this.currentSection];
                document.getElementById('prevBtn').disabled = document.getElementById('prevBtn').disabled || 
                    (this.curQ === currentSection.start);
                document.getElementById('nextBtn').disabled = document.getElementById('nextBtn').disabled || 
                    (this.curQ === currentSection.end);
            }
        }
            
            updateAnsCnt() {
                const cnt = this.ans.filter(a => a !== null).length;
                this.els.ansCnt.textContent = cnt;
            }
            
            updatePrintButton() {
                this.els.printBtn.style.display = this.sub ? 'flex' : 'none';
            }
            
            updateThemeToggleIcon() {
                const icon = this.darkMode ? 'fa-sun' : 'fa-moon';
                this.els.themeToggle.innerHTML = `<i class="fas ${icon}"></i>`;
            }
            
            updateSectionHeader() {
                if (!this.sections || !this.els.sectionHeader) return;
                
                const section = this.sections[this.currentSection];
                this.els.sectionTitle.textContent = section.name;
                this.els.sectionTimer.textContent = this.formatTime(section.time_left);
                
                // Show the section header if we have sections
                this.els.sectionHeader.style.display = 'flex';
            }
            
            setLang(eng) {
                this.eng = eng;
                document.getElementById('engBtn').classList.toggle('active', eng);
                document.getElementById('hinBtn').classList.toggle('active', !eng);
                this.loadQ(this.curQ);
            }
            
            toggleTheme() {
                this.darkMode = !this.darkMode;
                document.body.classList.toggle('dark-mode', this.darkMode);
                this.updateThemeToggleIcon();
                this.loadQ(this.curQ); // Refresh to apply dark mode styles
            }
            
            startTimer() {
                this.timer = setInterval(() => {
                    this.timeLeft--;
                    if (this.timeLeft <= 0) {
                        clearInterval(this.timer);
                        this.subTest();
                        return;
                    }
                    const mins = Math.floor(this.timeLeft / 60);
                    const secs = this.timeLeft % 60;
                    this.els.timer.textContent = `${mins}:${secs.toString().padStart(2, '0')}`;
                }, 1000);
            }
            
            startSectionTimer() {
                if (!this.sections) return;
                
                // Clear any existing section timer
                if (this.sectionTimer) clearInterval(this.sectionTimer);
                
                const section = this.sections[this.currentSection];
                section.time_left = section.timer; // Reset to initial time
                
                this.sectionTimer = setInterval(() => {
                    section.time_left--;
                    this.els.sectionTimer.textContent = this.formatTime(section.time_left);
                    
                    if (section.time_left <= 0) {
                        clearInterval(this.sectionTimer);
                        this.submitCurrentSection();
                    }
                }, 1000);
            }
            
            formatTime(seconds) {
                const mins = Math.floor(seconds / 60);
                const secs = seconds % 60;
                return `${mins}:${secs.toString().padStart(2, '0')}`;
            }
            
            stopTimers() {
                if (this.timer) clearInterval(this.timer);
                if (this.sectionTimer) clearInterval(this.sectionTimer);
            }
            
            togglePanel() {
                this.els.panel.classList.toggle('open');
            }
            
            closePanel() {
                this.els.panel.classList.remove('open');
            }
            
            confirmSub() {
                if (this.sections) {
                    const section = this.sections[this.currentSection];
                    const unanswered = this.ans.slice(section.start, section.end + 1)
                        .filter(a => a === null).length;
                    const reviewed = this.reviewed.slice(section.start, section.end + 1)
                        .filter(r => r).length;
                    
                    let msg = '';
                    
                    if (unanswered > 0 && reviewed > 0) {
                        msg = `You have ${unanswered} unanswered questions and ${reviewed} marked for review in this section. Submit anyway?`;
                    } else if (unanswered > 0) {
                        msg = `You have ${unanswered} unanswered questions in this section. Submit anyway?`;
                    } else if (reviewed > 0) {
                        msg = `You have ${reviewed} questions marked for review in this section. Submit anyway?`;
                    } else {
                        msg = 'Submit this section?';
                    }
                    
                    if (confirm(msg)) this.submitCurrentSection();
                } else {
                    const unanswered = this.ans.filter(a => a === null).length;
                    const reviewed = this.reviewed.filter(r => r).length;
                    let msg = '';
                    
                    if (unanswered > 0 && reviewed > 0) {
                        msg = `You have ${unanswered} unanswered questions and ${reviewed} marked for review. Submit anyway?`;
                    } else if (unanswered > 0) {
                        msg = `You have ${unanswered} unanswered questions. Submit anyway?`;
                    } else if (reviewed > 0) {
                        msg = `You have ${reviewed} questions marked for review. Submit anyway?`;
                    } else {
                        msg = 'Submit test?';
                    }
                    
                    if (confirm(msg)) this.subTest();
                }
            }
            
            submitCurrentSection() {
                if (!this.sections) return;
                
                const section = this.sections[this.currentSection];
                section.submitted = true;
                clearInterval(this.sectionTimer);
                
                // Move to the next section if available
                const nextSectionIdx = this.currentSection + 1;
                if (nextSectionIdx < this.sections.length) {
                    this.currentSection = nextSectionIdx;
                    this.startSectionTimer();
                    this.updateSectionHeader();
                    this.loadQ(this.sections[nextSectionIdx].start);
                } else {
                    // All sections completed
                    this.subTest();
                }
                
                this.updateGrid();
            }
            
            subTest() {
                if (this.sub) return;
                
                // Record time spent on current question
                const now = Date.now();
                this.timeSpent[this.curQ] += (now - this.lastQTime) / 1000;
                
                console.log('Submitting test. Final answers:', this.ans);
                this.sub = true;
                this.stopTimers();
                document.getElementById('subBtn').style.display = 'none';
                document.getElementById('reviewBtn').style.display = 'none';
                const results = this.calcResults();
                this.showResults(results);
                this.loadQ(this.curQ);
                this.updateGrid();
                this.updatePrintButton();
                
                // Hide section header if it exists
                if (this.els.sectionHeader) {
                    this.els.sectionHeader.style.display = 'none';
                }
            }
            
            calcResults() {
                const timeTaken = Math.round((Date.now() - this.startT) / 60000);
                let correct = 0, incorrect = 0, unattempted = 0, score = 0;
                
                console.log('Calculating results...');
                this.qs.forEach((q, i) => {
                    const userAns = this.ans[i];
                    const correctAns = q.correct_option_id;
                    
                    console.log(`Q${i + 1}: user=${userAns}, correct=${correctAns}`);
                    
                    if (userAns === null || userAns === undefined) {
                        unattempted++;
                    } else if (correctAns !== undefined && correctAns !== null && userAns === correctAns) {
                        correct++;
                        score += 2;
                        console.log(`Q${i + 1}: CORRECT (+2 marks)`);
                    } else {
                        incorrect++;
                        score -= 0.50;
                        console.log(`Q${i + 1}: INCORRECT (-0.50 marks)`);
                    }
                });
                
                const results = { 
                    score: Math.max(0, score), 
                    correct, 
                    incorrect, 
                    unattempted, 
                    timeTaken,
                    timePerQ: this.timeSpent.map(t => Math.round(t))
                };
                console.log('Final results:', results);
                return results;
            }
            
            showResults(results) {
                this.els.scoreDisp.textContent = `${results.score}/40`;
                this.els.corrStat.textContent = results.correct;
                this.els.incStat.textContent = results.incorrect;
                this.els.unaStat.textContent = results.unattempted;
                this.els.timeStat.textContent = results.timeTaken;
                this.els.modalOver.classList.add('show');
            }
            
            closeModal() {
                this.els.modalOver.classList.remove('show');
            }
            
            review() {
                this.closeModal();
                this.loadQ(0);
            }
            
            isNavigationAllowed(idx) {
            // Always allow navigation after submission
            if (this.sub) return true;
            
            // During test, only allow within current section
            if (this.sections) {
                const currentSection = this.sections[this.currentSection];
                return idx >= currentSection.start && idx <= currentSection.end;
            }
            
            // If no sections, allow all navigation
            return true;
            }
            
            printTest() {
                const printWindow = window.open('', '_blank');
                const testTitle = document.title;
                const questionsHtml = this.qs.map((q, i) => {
                    const userAns = this.ans[i];
                    const correctAns = q.correct_option_id;
                    const isCorrect = userAns !== null && correctAns !== undefined && userAns === correctAns;
                    const timeSpent = Math.round(this.timeSpent[i]);
                    const wasReviewed = this.reviewed[i];
                    const sectionName = this.sections ? this.getSectionNameForQuestion(i) : '';
                    
                    return `
                        <div style="page-break-inside:avoid;margin-bottom:30px;border-bottom:1px solid #eee;padding-bottom:20px">
                            <h3 style="color:#4F46E5">Question ${i + 1} ${wasReviewed ? '<span style="color:#F59E0B">(Marked for Review)</span>' : ''}</h3>
                            ${sectionName ? `<div style="font-size:14px;color:#6B7280;margin-bottom:8px">Section: ${sectionName}</div>` : ''}
                            ${q.comp ? `<div>${q.comp}</div>` : ''}
                            <div>${q.question}</div>
                            <div style="margin-top:15px">
                                ${q.options.map((opt, j) => `
                                    <div style="margin:5px 0;padding:5px;border-left:3px solid ${ 
                                        j === correctAns ? '#10B981' : 
                                        j === userAns ? '#EF4444' : '#E5E7EB' 
                                    }">
                                        ${opt}
                                    </div>
                                `).join('')}
                            </div>
                            <div style="margin-top:15px;font-size:14px;color:#666">
                                <strong>Your answer:</strong> ${userAns !== null ? String.fromCharCode(65 + userAns) : 'Not attempted'}
                                ${userAns !== null && correctAns !== undefined ? 
                                    `(<span style="color:${isCorrect ? '#10B981' : '#EF4444'}">${isCorrect ? 'Correct' : 'Incorrect'}</span>)` : ''}
                                <br>
                                <strong>Time spent:</strong> ${timeSpent} seconds
                            </div>
                            ${q.solution ? `
                                <div style="margin-top:15px;background:#f0fdf4;padding:15px;border-radius:8px">
                                    <h4 style="color:#10B981;margin-top:0">Solution</h4>
                                    ${q.solution}
                                </div>
                            ` : ''}
                        </div>
                    `;
                }).join('');
                
                printWindow.document.write(`
                    <!DOCTYPE html>
                    <html>
                    <head>
                        <title>${testTitle} - Results</title>
                        <style>
                            body { font-family: Arial, sans-serif; line-height: 1.6; padding: 20px; }
                            h2 { color: #4F46E5; border-bottom: 1px solid #E5E7EB; padding-bottom: 10px; }
                            .math-exp { display: inline-block; vertical-align: middle; position: relative; margin: 0 2px; }
                            .math-num { text-align: center; display: block; padding: 0; }
                            .math-line { display: block; border-top: 1px solid; padding: 0; text-align: center; }
                            .table-container { width: 100%; overflow-x: auto; margin: 12px 0; }
                            table { width: 100%; border-collapse: collapse; margin: 8px 0; }
                            table, th, td { border: 1px solid #E5E7EB; }
                            th, td { padding: 8px 12px; text-align: left; }
                            @media print {
                                body { padding: 0; }
                                .page-break { page-break-after: always; }
                            }
                        </style>
                    </head>
                    <body>
                        <h2>Mocks Wallah - Analysis</h2>
                        <div style="margin-bottom:30px">
                            <div><strong>Score:</strong> ${this.els.scoreDisp.textContent}</div>
                            <div><strong>Correct:</strong> ${this.els.corrStat.textContent}</div>
                            <div><strong>Incorrect:</strong> ${this.els.incStat.textContent}</div>
                            <div><strong>Unattempted:</strong> ${this.els.unaStat.textContent}</div>
                            <div><strong>Time taken:</strong> ${this.els.timeStat.textContent} minutes</div>
                        </div>
                        ${questionsHtml}
                        <script>
                            setTimeout(() => { window.print(); }, 500);
                        <\/script>
                    </body>
                    </html>
                `);
                printWindow.document.close();
            }
            
            // Section-related helper methods
            isInCurrentSection(qIdx) {
                if (!this.sections) return true;
                const section = this.sections[this.currentSection];
                return qIdx >= section.start && qIdx <= section.end;
            }
            
            findSectionForQuestion(qIdx) {
                if (!this.sections) return null;
                for (let i = 0; i < this.sections.length; i++) {
                    const section = this.sections[i];
                    if (qIdx >= section.start && qIdx <= section.end) {
                        return i;
                    }
                }
                return null;
            }
            
            getSectionNameForQuestion(qIdx) {
                if (!this.sections) return '';
                const sectionIdx = this.findSectionForQuestion(qIdx);
                return sectionIdx !== null ? this.sections[sectionIdx].name : '';
            }
        }
        
        document.addEventListener('DOMContentLoaded', () => new TestApp());
    </script>
</body>
</html>