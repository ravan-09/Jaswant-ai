<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>devgagan</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <style>
        *{margin:0;padding:0;box-sizing:border-box}
        :root{
            --p:#4F46E5;
            --s:#10B981;
            --d:#EF4444;
            --w:#F59E0B;
            --y:#FCD34D;
            --bg:#F8FAFC;
            --card:#FFF;
            --txt:#1F2937;
            --txtL:#6B7280;
            --brd:#E5E7EB;
            --shadow:0 4px 6px -1px rgba(0,0,0,0.1),0 2px 4px -1px rgba(0,0,0,0.06);
            --radius:12px;
            --transition:all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
            
            /* Dark mode variables */
            --dark-bg:#1a1a2e;
            --dark-card:#16213e;
            --dark-txt:#e6e6e6;
            --dark-txtL:#b8b8b8;
            --dark-brd:#2a2a3a;
        }
        body{
            font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',system-ui,sans-serif;
            background:var(--bg);
            color:var(--txt);
            line-height:1.5;
            padding-bottom:80px;
            transition:var(--transition);
        }
        
        body.dark-mode {
            background:var(--dark-bg);
            color:var(--dark-txt);
        }
        
        /* Improved math expression and table styling */
        .math-exp {
            display: inline-block;
            vertical-align: middle;
            position: relative;
            margin: 0 2px;
        }
        
        .math-num {
            text-align: center;
            display: block;
            padding: 0;
        }
        
        .math-line {
            display: block;
            border-top: 1px solid;
            padding: 0;
            text-align: center;
        }
        
        /* Table overflow container */
        .table-container {
            width: 100%;
            overflow-x: auto;
            margin: 12px 0;
            -webkit-overflow-scrolling: touch;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 8px 0;
        }
        
        table, th, td {
            border: 1px solid var(--brd);
        }
        
        th, td {
            padding: 8px 12px;
            text-align: left;
        }
        
        .dark-mode table, 
        .dark-mode th, 
        .dark-mode td {
            border-color: var(--dark-brd);
        }
        
        /* Image containment styles */
        img {
            max-width: 100%;
            height: auto;
            display: block;
            margin: 8px 0;
            border-radius: 4px;
        }
        
        /* Ensure images don't overflow in any container */
        .q-txt img, .opt-txt img, .sol img, .comp img {
            max-width: 100%;
            width: auto;
            height: auto;
            object-fit: contain;
        }
        
        /* Specific image containers */
        .img-container {
            width: 100%;
            overflow: hidden;
            border-radius: 4px;
            margin: 8px 0;
        }
        
        /* Welcome screen styles */
        .welcome-screen {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: var(--card);
            z-index: 1000;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 20px;
            text-align: center;
            transition: var(--transition);
        }
        
        .dark-mode .welcome-screen {
            background: var(--dark-card);
        }
        
        .welcome-screen.hidden {
            opacity: 0;
            pointer-events: none;
        }
        
        .welcome-icon {
            font-size: 4rem;
            color: var(--p);
            margin-bottom: 20px;
        }
        
        .welcome-title {
            font-size: 1.8rem;
            font-weight: 700;
            margin-bottom: 16px;
            color: var(--p);
        }
        
        .welcome-details {
            background: rgba(79, 70, 229, 0.1);
            border-radius: var(--radius);
            padding: 20px;
            width: 100%;
            max-width: 500px;
            margin-bottom: 24px;
        }
        
        .dark-mode .welcome-details {
            background: rgba(79, 70, 229, 0.2);
        }
        
        .welcome-detail {
            display: flex;
            justify-content: space-between;
            margin-bottom: 12px;
            font-size: 1rem;
        }
        
        .welcome-detail:last-child {
            margin-bottom: 0;
        }
        
        .welcome-detail-label {
            font-weight: 600;
            color: var(--txtL);
        }
        
        .dark-mode .welcome-detail-label {
            color: var(--dark-txtL);
        }
        
        .welcome-detail-value {
            font-weight: 500;
        }
        
        .section-info {
            background: rgba(16, 185, 129, 0.1);
            border-radius: var(--radius);
            padding: 20px;
            width: 100%;
            max-width: 500px;
            margin-bottom: 24px;
            text-align: left;
        }
        
        .dark-mode .section-info {
            background: rgba(16, 185, 129, 0.2);
        }
        
        .section-info h3 {
            margin-bottom: 12px;
            color: var(--s);
        }
        
        .section-list {
            width: 100%;
            border-collapse: collapse;
            margin-top: 12px;
        }
        
        .section-list th, .section-list td {
            padding: 8px 12px;
            text-align: left;
            border-bottom: 1px solid var(--brd);
        }
        
        .dark-mode .section-list th, 
        .dark-mode .section-list td {
            border-bottom-color: var(--dark-brd);
        }
        
        .section-list th {
            font-weight: 600;
            color: var(--txtL);
        }
        
        .dark-mode .section-list th {
            color: var(--dark-txtL);
        }
        
        .welcome-button {
            background: var(--p);
            color: white;
            border: none;
            border-radius: var(--radius);
            padding: 14px 28px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            margin-bottom: 20px;
        }
        
        .welcome-button:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow);
        }
        
        .join-channel {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            color: var(--p);
            font-weight: 600;
            text-decoration: none;
            margin-top: 16px;
            padding: 10px 16px;
            border-radius: var(--radius);
            background: rgba(79, 70, 229, 0.1);
            transition: var(--transition);
        }
        
        .dark-mode .join-channel {
            background: rgba(79, 70, 229, 0.2);
        }
        
        .join-channel:hover {
            background: rgba(79, 70, 229, 0.2);
            transform: translateY(-2px);
        }
        
        .dark-mode .join-channel:hover {
            background: rgba(79, 70, 229, 0.3);
        }
        
        /* Section header styles */
        .section-header {
            background: var(--p);
            color: white;
            padding: 12px 16px;
            margin-bottom: 16px;
            border-radius: var(--radius);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .section-title {
            font-weight: 600;
            font-size: 15px;
        }
        
        .section-timer {
            background: rgba(255, 255, 255, 0.2);
            padding: 6px 12px;
            border-radius: 16px;
            font-weight: 600;
            font-size: 13px;
        }
        
        .hdr{
            background:var(--card);
            border-bottom:1px solid var(--brd);
            padding:12px 16px;
            display:grid;
            grid-template-columns:1fr auto 1fr;
            align-items:center;
            position:sticky;
            top:0;
            z-index:100;
            box-shadow:var(--shadow);
            transition:var(--transition);
        }
        
        .dark-mode .hdr {
            background:var(--dark-card);
            border-bottom-color:var(--dark-brd);
            color:var(--dark-txt);
        }
        
        .hdr-l{
            display:flex;
            align-items:center;
            gap:12px;
            justify-self:start
        }
        .hdr-c{
            text-align:center;
            font-weight:600;
            font-size:15px
        }
        .hdr-r{
            display:flex;
            justify-self:end;
            align-items:center;
            gap:8px
        }
        .q-info{
            font-size:14px;
            font-weight:600
        }
        .timer{
            background:#FEF3C7;
            color:#92400E;
            padding:6px 12px;
            border-radius:16px;
            font-size:13px;
            font-weight:600
        }
        .btn{
            border:none;
            border-radius:8px;
            font-weight:500;
            cursor:pointer;
            transition:var(--transition);
            font-size:13px;
            display:inline-flex;
            align-items:center;
            justify-content:center;
            gap:6px;
        }
        .btn-sm{
            padding:8px 12px
        }
        .btn-p{
            background:var(--p);
            color:white
        }
        .btn-o{
            background:transparent;
            border:1px solid var(--brd);
            color:var(--txt)
        }
        .dark-mode .btn-o {
            border-color:var(--dark-brd);
            color:var(--dark-txt);
        }
        .btn-w{
            background:var(--y);
            color:#78350F;
            font-weight:600;
        }
        .btn-w.active{
            background:var(--w);
            color:white;
        }
        .btn:active{
            transform:scale(.98)
        }
        .cont{
            padding:16px;
            max-width:100%;
            overflow-x:hidden;
        }
        .dark-mode .cont {
            background:var(--dark-bg);
        }
        .q-card{
            background:var(--card);
            border-radius:var(--radius);
            padding:20px;
            margin-bottom:16px;
            border:1px solid var(--brd);
            overflow:hidden;
            box-shadow:var(--shadow);
            transition:var(--transition);
        }
        .dark-mode .q-card {
            background:var(--dark-card);
            border-color:var(--dark-brd);
            color:var(--dark-txt);
        }
        .lang{
            display:flex;
            background:#F3F4F6;
            border-radius:8px;
            padding:2px;
            margin-bottom:16px
        }
        .dark-mode .lang {
            background:#2a2a3a;
        }
        .lang-btn{
            flex:1;
            padding:8px;
            border:none;
            background:transparent;
            border-radius:6px;
            font-size:13px;
            cursor:pointer;
            transition:var(--transition)
        }
        .lang-btn.active{
            background:white;
            color:var(--p);
            box-shadow:0 1px 3px rgba(0,0,0,.1)
        }
        .dark-mode .lang-btn.active {
            background:var(--dark-card);
            color:var(--p);
        }
        .comp{
            background:#F0F9FF;
            border:1px solid #BAE6FD;
            border-radius:8px;
            padding:16px;
            margin-bottom:20px;
            overflow:hidden
        }
        .dark-mode .comp {
            background:#1e3a8a;
            border-color:#1e40af;
        }
        .comp h4{
            color:#0369A1;
            font-size:14px;
            margin-bottom:8px
        }
        .dark-mode .comp h4 {
            color:#93c5fd;
        }
        .q-txt{
            font-size:16px;
            line-height:1.6;
            margin-bottom:20px;
            color:var(--txt);
            overflow:hidden;
            word-wrap:break-word
        }
        .dark-mode .q-txt {
            color:var(--dark-txt);
        }
        .opts{
            display:flex;
            flex-direction:column;
            gap:12px
        }
        .opt{
            display:flex;
            align-items:center;
            padding:16px;
            background:var(--card);
            border:2px solid var(--brd);
            border-radius:12px;
            cursor:pointer;
            transition:var(--transition);
            gap:12px;
            overflow:hidden
        }
        .dark-mode .opt {
            background:var(--dark-card);
            border-color:var(--dark-brd);
        }
        .opt:hover:not(.submitted){
            border-color:var(--p);
            transform:translateY(-2px);
            box-shadow:var(--shadow);
        }
        .opt.sel{
            border-color:var(--p);
            background:#F0F9FF
        }
        .dark-mode .opt.sel {
            background:#1e3a8a;
        }
        .opt.correct{
            border-color:var(--s);
            background:#F0FDF4 !important
        }
        .dark-mode .opt.correct {
            background:#064e3b !important;
            border-color:#047857;
        }
        .opt.wrong{
            border-color:var(--d);
            background:#FEF2F2 !important
        }
        .dark-mode .opt.wrong {
            background:#7f1d1d !important;
            border-color:#b91c1c;
        }
        .opt.submitted{
            cursor:default
        }
        .opt-radio{
            width:20px;
            height:20px;
            border:2px solid var(--brd);
            border-radius:50%;
            display:flex;
            align-items:center;
            justify-content:center;
            flex-shrink:0
        }
        .dark-mode .opt-radio {
            border-color:var(--dark-brd);
        }
        .opt.sel .opt-radio{
            border-color:var(--p);
            background:var(--p)
        }
        .opt.sel .opt-radio::after{
            content:'✓';
            color:white;
            font-size:12px;
            font-weight:bold
        }
        .opt.correct .opt-radio{
            border-color:var(--s) !important;
            background:var(--s) !important
        }
        .opt.correct .opt-radio::after{
            content:'✓';
            color:white;
            font-size:12px;
            font-weight:bold
        }
        .opt.wrong .opt-radio{
            border-color:var(--d) !important;
            background:var(--d) !important
        }
        .opt.wrong .opt-radio::after{
            content:'✗';
            color:white;
            font-size:12px;
            font-weight:bold
        }
        .opt-txt{
            flex:1;
            font-size:15px;
            overflow:hidden;
            word-wrap:break-word
        }
        .dark-mode .opt-txt {
            color:var(--dark-txt);
        }
        .sol{
            background:#F0FDF4;
            border:1px solid #BBF7D0;
            border-radius:8px;
            padding:16px;
            margin-top:20px;
            display:none;
            overflow:hidden
        }
        .dark-mode .sol {
            background:#064e3b;
            border-color:#047857;
        }
        .sol.show{
            display:block
        }
        .sol h4{
            color:var(--s);
            font-size:14px;
            margin-bottom:8px;
            display:flex;
            align-items:center;
            gap:6px
        }
        .dark-mode .sol h4 {
            color:#34d399;
        }
        .sol-info{
            display:flex;
            gap:12px;
            margin-bottom:12px;
            font-size:13px;
            color:var(--txtL);
        }
        .dark-mode .sol-info {
            color:var(--dark-txtL);
        }
        .sol-info span{
            display:flex;
            align-items:center;
            gap:4px;
        }
        .nav{
            position:fixed;
            bottom:0;
            left:0;
            right:0;
            background:var(--card);
            border-top:1px solid var(--brd);
            padding:12px 16px;
            display:flex;
            justify-content:space-between;
            align-items:center;
            z-index:100;
            box-shadow:0 -2px 10px rgba(0,0,0,0.05);
            transition:var(--transition);
        }
        .dark-mode .nav {
            background:var(--dark-card);
            border-top-color:var(--dark-brd);
        }
        .nav-btn{
            padding:12px 20px;
            border-radius:8px;
            font-weight:600;
            min-width:80px
        }
        .nav-btn:disabled{
            opacity:.5;
            cursor:not-allowed
        }
        .prog{
            text-align:center;
            font-size:13px;
            color:var(--txtL)
        }
        .dark-mode .prog {
            color:var(--dark-txtL);
        }
        .panel{
            position:fixed;
            top:0;
            left:0;
            right:0;
            bottom:0;
            background:var(--card);
            z-index:200;
            transform:translateY(100%);
            transition:transform .3s ease;
            overflow-y:auto;
            display:none;
        }
        .dark-mode .panel {
            background:var(--dark-card);
        }
        .panel.open{
            transform:translateY(0);
            display:block;
        }
        .panel-hdr{
            background:var(--p);
            color:white;
            padding:16px;
            display:flex;
            justify-content:space-between;
            align-items:center;
            position:sticky;
            top:0;
            z-index:1;
        }
        .panel-close{
            background:none;
            border:none;
            color:white;
            font-size:18px;
            cursor:pointer
        }
        .q-grid{
            display:grid;
            grid-template-columns:repeat(5,1fr);
            gap:12px;
            padding:20px
        }
        .q-num{
            aspect-ratio:1;
            display:flex;
            align-items:center;
            justify-content:center;
            background:#F3F4F6;
            border-radius:8px;
            font-weight:600;
            cursor:pointer;
            transition:var(--transition);
            font-size:14px
        }
        .dark-mode .q-num {
            background:#2a2a3a;
            color:var(--dark-txt);
        }
        .q-num.cur{
            background:var(--p);
            color:white
        }
        .q-num.ans{
            background:var(--s);
            color:white
        }
        .q-num.wrong{
            background:var(--d);
            color:white
        }
        .q-num.review{
            background:var(--y);
            color:#78350F;
            font-weight:bold;
        }
        .q-num.unattempted {
            background:#E5E7EB;
            color:#6B7280;
        }
        .dark-mode .q-num.unattempted {
            background:#4B5563;
            color:#D1D5DB;
        }
        .q-num.disabled {
            opacity: 0.5;
            cursor: not-allowed;
            pointer-events: none;
        }
        .q-num:hover{
            transform:scale(1.05)
        }
        .modal{
            position:fixed;
            top:0;
            left:0;
            right:0;
            bottom:0;
            background:rgba(0,0,0,.5);
            z-index:300;
            display:none;
            align-items:center;
            justify-content:center;
            padding:20px
        }
        .modal.show{
            display:flex
        }
        .result{
            background:var(--card);
            border-radius:16px;
            padding:24px;
            width:100%;
            max-width:400px;
            text-align:center
        }
        .dark-mode .result {
            background:var(--dark-card);
        }
        .score{
            font-size:2rem;
            font-weight:bold;
            color:var(--p);
            margin:16px 0
        }
        .stats{
            display:grid;
            grid-template-columns:repeat(2,1fr);
            gap:12px;
            margin:20px 0
        }
        .stat{
            text-align:center;
            padding:12px;
            border-radius:8px;
            border:1px solid var(--brd)
        }
        .dark-mode .stat {
            border-color:var(--dark-brd);
        }
        .stat-val{
            font-size:1.5rem;
            font-weight:bold;
            margin-bottom:4px
        }
        .stat-lbl{
            font-size:12px;
            color:var(--txtL)
        }
        .dark-mode .stat-lbl {
            color:var(--dark-txtL);
        }
        .stat.c{
            border-color:var(--s);
            background:#F0FDF4
        }
        .dark-mode .stat.c {
            background:#064e3b;
            border-color:#047857;
        }
        .stat.w{
            border-color:var(--d);
            background:#FEF2F2
        }
        .dark-mode .stat.w {
            background:#7f1d1d;
            border-color:#b91c1c;
        }
        .stat.c .stat-val{
            color:var(--s)
        }
        .dark-mode .stat.c .stat-val {
            color:#34d399;
        }
        .stat.w .stat-val{
            color:var(--d)
        }
        .dark-mode .stat.w .stat-val {
            color:#f87171;
        }
        .modal-acts{
            display:flex;
            gap:12px;
            margin-top:20px
        }
        .modal-btn{
            flex:1;
            padding:12px;
            border-radius:8px;
            font-weight:600
        }
        .print-btn{
            position:fixed;
            bottom:100px;
            right:20px;
            width:50px;
            height:50px;
            border-radius:50%;
            background:var(--p);
            color:white;
            display:flex;
            align-items:center;
            justify-content:center;
            box-shadow:0 4px 10px rgba(0,0,0,0.2);
            z-index:50;
            cursor:pointer;
            transition:var(--transition);
            border:none;
        }
        .print-btn:hover{
            transform:scale(1.1);
        }
        .dark-mode .print-btn {
            background:var(--p);
        }
        .desktop-sidebar{
            display:none;
            position:fixed;
            right:0;
            top:0;
            bottom:0;
            width:300px;
            background:var(--card);
            border-left:1px solid var(--brd);
            padding:20px;
            overflow-y:auto;
            z-index:90;
            transition:var(--transition);
        }
        .dark-mode .desktop-sidebar {
            background:var(--dark-card);
            border-left-color:var(--dark-brd);
        }
        .desktop-sidebar h3{
            margin-bottom:16px;
            padding-bottom:12px;
            border-bottom:1px solid var(--brd);
            color:var(--txt);
        }
        .dark-mode .desktop-sidebar h3 {
            border-bottom-color:var(--dark-brd);
            color:var(--dark-txt);
        }
        .theme-toggle{
            background:none;
            border:none;
            color:var(--txt);
            font-size:18px;
            cursor:pointer;
            margin-left:8px;
        }
        .dark-mode .theme-toggle {
            color:var(--dark-txt);
        }
        @media (min-width: 1024px) {
            .cont{
                padding-right:320px;
            }
            .desktop-sidebar{
                display:block;
            }
            .panel{
                display:none !important;
            }
        }
        @media (max-width:375px){
            .hdr{padding:10px 12px}
            .cont{padding:12px}
            .q-card{padding:16px}
            .q-grid{grid-template-columns:repeat(4,1fr)}
        }
        
    </style>
</head>
<body>

<!-- Welcome Screen -->
<div class="welcome-screen" id="welcomeScreen">
    <h1 class="welcome-title">Exam ID : TEST</h1>
    
    <div class="welcome-details">
        <div class="welcome-detail">
            <span class="welcome-detail-label">Test ID</span>
            <span class="welcome-detail-value">0 </span>
        </div>
        <div class="welcome-detail">
            <span class="welcome-detail-label">Total Questions:</span>
            <span class="welcome-detail-value">30</span>
        </div>
        <div class="welcome-detail">
            <span class="welcome-detail-label">Total Marks:</span>
            <span class="welcome-detail-value">60</span>
        </div>
        <div class="welcome-detail">
            <span class="welcome-detail-label">Duration:</span>
            <span class="welcome-detail-value">30 minutes</span>
        </div>
        <div class="welcome-detail">
            <span class="welcome-detail-label">Marking:</span>
            <span class="welcome-detail-value">+2 / -0.50</span>
        </div>
    </div>
    
    <div class="welcome-instructions">
        <h3>Instructions</h3>
        <ul>
            <li>Read each question carefully before answering</li>
            <li>You can mark questions for review and come back later</li>
            <li>The timer will automatically submit the test when time is up</li>
            <li>Negative marking applies for wrong answers</li>
        </ul>
    </div>
    
    <div class="welcome-buttons">
        <button class="welcome-button" id="startTestBtn">
            <i class="fas fa-play"></i> Start Test
        </button>
        
        <a href="https://t.me/mocks_wallah" target="_blank" class="join-channel" rel="noopener">VISHAL😁RAVAN</a> <a href="https://youtube.com/@Vlogsbyvishalravan" target="_blank" rel="noopener" style="font-size:12px;opacity:.85;margin-left:6px;">(YouTube backup)</a>
    </div>
 </div>

    <!-- Main Test Interface (hidden initially) -->
    <div style="display:none" id="mainTestInterface">
        <div class="hdr">
            <div class="hdr-l">
                <div class="q-info" id="qInfo">Q1/30</div>
                <div class="timer" id="timer">30:00</div>
            </div>
            <div class="hdr-c">Mocks Wallah</div>
            <div class="hdr-r">
                <button class="theme-toggle" id="themeToggle"><i class="fas fa-moon"></i></button>
                <button class="btn btn-o btn-sm" id="menuBtn"><i class="fas fa-th"></i></button>
                <button class="btn btn-p btn-sm" id="subBtn">Submit</button>
            </div>
        </div>

        <div class="cont">
            
            <div class="q-card">
                <div class="lang">
                    <button class="lang-btn active" id="engBtn">English</button>
                    <button class="lang-btn" id="hinBtn">हिंदी</button>
                </div>

                <div id="compSec" class="comp" style="display:none">
                    <h4><i class="fas fa-book"></i> Comprehension</h4>
                    <div id="compCont"></div>
                </div>

                <div class="q-txt" id="qTxt"></div>
                <div class="opts" id="opts"></div>

                <div class="sol" id="sol">
                    <div class="sol-info" id="solInfo"></div>
                    <h4><i class="fas fa-lightbulb"></i> Solution</h4>
                    <div id="solCont"></div>
                </div>
            </div>
        </div>

        <div class="nav">
            <button class="btn btn-o nav-btn" id="prevBtn"><i class="fas fa-chevron-left"></i> Prev</button>
            <button class="btn btn-w nav-btn" id="reviewBtn"><i class="fas fa-flag"></i> Review</button>
            <div class="prog">
                <div id="progTxt">1 of 30</div>
                <div style="font-size:11px">Answered: <span id="ansCnt">0</span> | <a href="https://t.me/mocks_wallah" target="_blank" rel="noopener">VISHAL😁RAVAN</a> <a href="https://youtube.com/@Vlogsbyvishalravan" target="_blank" rel="noopener" style="font-size:12px;opacity:.85;margin-left:6px;">(YouTube backup)</a></div>
            </div>
            <button class="btn btn-p nav-btn" id="nextBtn">Next <i class="fas fa-chevron-right"></i></button>
        </div>

        <div class="desktop-sidebar" id="desktopSidebar">
            <h3>Questions Navigator</h3>
            <div class="q-grid" id="desktopQGrid"></div>
            <div style="margin-top:20px;font-size:12px;color:var(--txtL)">
                <div style="display:flex;align-items:center;gap:8px;margin-bottom:8px">
                    <div class="q-num ans" style="width:24px;height:24px">✓</div><span>Answered</span>
                </div>
                <div style="display:flex;align-items:center;gap:8px;margin-bottom:8px">
                    <div class="q-num review" style="width:24px;height:24px">!</div><span>Marked for Review</span>
                </div>
                <div style="display:flex;align-items:center;gap:8px;margin-bottom:8px">
                    <div class="q-num wrong" style="width:24px;height:24px">✗</div><span>Incorrect</span>
                </div>
                <div style="display:flex;align-items:center;gap:8px">
                    <div class="q-num unattempted" style="width:24px;height:24px">?</div><span>Unattempted</span>
                </div>
            </div>
        </div>

        <div class="panel" id="panel">
            <div class="panel-hdr">
                <h3>All Questions</h3>
                <button class="panel-close" id="panelClose"><i class="fas fa-times"></i></button>
            </div>
            <div class="q-grid" id="qGrid"></div>
            <div style="padding:20px;font-size:12px;color:var(--txtL)">
                <div style="display:flex;align-items:center;gap:8px;margin-bottom:8px">
                    <div class="q-num ans" style="width:24px;height:24px">✓</div><span>Answered</span>
                </div>
                <div style="display:flex;align-items:center;gap:8px;margin-bottom:8px">
                    <div class="q-num review" style="width:24px;height:24px">!</div><span>Marked for Review</span>
                </div>
                <div style="display:flex;align-items:center;gap:8px;margin-bottom:8px">
                    <div class="q-num wrong" style="width:24px;height:24px">✗</div><span>Incorrect</span>
                </div>
                <div style="display:flex;align-items:center;gap:8px">
                    <div class="q-num unattempted" style="width:24px;height:24px">?</div><span>Unattempted</span>
                </div>
            </div>
        </div>

        <button class="print-btn" id="printBtn" style="display:none">
            <i class="fas fa-print"></i>
        </button>

        <div class="modal" id="modalOver">
            <div class="result">
                <h2>Test Complete!</h2>
                <div class="score" id="scoreDisp">0/60</div>
                <div class="stats">
                    <div class="stat c"><div class="stat-val" id="corrStat">0</div><div class="stat-lbl">Correct</div></div>
                    <div class="stat w"><div class="stat-val" id="incStat">0</div><div class="stat-lbl">Incorrect</div></div>
                    <div class="stat"><div class="stat-val" id="unaStat">0</div><div class="stat-lbl">Unattempted</div></div>
                    <div class="stat"><div class="stat-val" id="timeStat">0</div><div class="stat-lbl">Minutes</div></div>
                </div>
                <div class="modal-acts">
                    <button class="btn btn-o modal-btn" id="closeModal">Close</button>
                    <button class="btn btn-p modal-btn" id="revBtn">Review</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        class TestApp {
            constructor() {
            this.qs = [
  {
    "question": "<style> img, svg {vertical-align: middle; max-width:100%; } *{overflow-wrap: break-word;}  </style> <span style=\"line-height:115%;font-family:Cambria;font-size:11pt\"></span><span style=\"font-family:Cambria\"> A merchant bought two watches for ₹12,000 each. He sold one watch at a loss of 10%. At what price (in ₹) should he sell the other watch to earn a profit of 18% overall?</span>",
    "options": [
      "<span style=\"font-family:Cambria\"> ₹17,640</span>",
      "<span style=\"font-family:Cambria\"> ₹17,520</span>",
      "<span style=\"font-family:Cambria\"> ₹18,120</span>",
      "<span style=\"font-family:Cambria\"> ₹18,440</span>"
    ],
    "correct_option_id": 1,
    "solution": "<span style=\"font-family:Cambria\"> </span><img src=\"https://appx-content-v2.classx.co.in/website/bulk_uploader_images/1734084312540_image001.png\" width=\"602\" height=\"769\" alt=\"\"><p></p>",
    "question_index": 0
  },
  {
    "question": "<style> img, svg {vertical-align: middle; max-width:100%; } *{overflow-wrap: break-word;}  </style> <span style=\"line-height:115%;font-family:Cambria;font-size:11pt\"> </span><span style=\"font-family:Cambria\">A person borrowed ₹ 1550 at 8% per annum and ₹ 3375 at 12% per annum at simple interest for the same period. He had to pay ₹ 2116 in all as interest. Find the time (in years).</span>",
    "options": [
      "<span style=\"font-family:Cambria\"> 2</span>",
      "<span style=\"font-family:Cambria\"> 4</span>",
      "<span style=\"font-family:Cambria\"> 3</span>",
      "<span style=\"font-family:Cambria\"> 5</span>"
    ],
    "correct_option_id": 1,
    "solution": "<span style=\"font-family:Cambria\"></span><p><img src=\"https://appx-content-v2.classx.co.in/website/bulk_uploader_images/1734084312540_image002.png\" width=\"602\" height=\"208\" alt=\"\"></p><p></p>",
    "question_index": 1
  },
  {
    "question": "<style> img, svg {vertical-align: middle; max-width:100%; } *{overflow-wrap: break-word;}  </style> <span style=\"font-family:Cambria\"> A sum of money after a period of 2 years becomes Rs.44,620, and it becomes Rs.55,775 after a period of three years, being compounded at ‘R’ rate of interest. What is the value of R?</span>",
    "options": [
      "<span style=\"font-family:Cambria\"> 15%</span>",
      "<span style=\"font-family:Cambria\"> 20%</span>",
      "<span style=\"font-family:Cambria\"> 18%</span>",
      "<span style=\"font-family:Cambria\"></span><span style=\"font-family:Cambria\">  </span><span style=\"font-family:Cambria\">25%</span>"
    ],
    "correct_option_id": 3,
    "solution": "<span style=\"font-family:Cambria\"></span><p><img src=\"https://appx-content-v2.classx.co.in/website/bulk_uploader_images/1734084312540_image003.png\" width=\"602\" height=\"300\" alt=\"\"></p><p></p>",
    "question_index": 2
  },
  {
    "question": "<style> img, svg {vertical-align: middle; max-width:100%; } *{overflow-wrap: break-word;}  </style> <span style=\"line-height:115%;font-family:Cambria;font-size:11pt\"> </span><span style=\"font-family:Cambria\">If x = 2y + 6, then what is the value of (x</span><span style=\"line-height:115%;font-family:Cambria;font-size:8pt;vertical-align:super\">3</span><span style=\"font-family:Cambria\"> - 8y</span><span style=\"line-height:115%;font-family:Cambria;font-size:8pt;vertical-align:super\">3</span><span style=\"font-family:Cambria\"> – 36 xy)?</span>",
    "options": [
      "<span style=\"font-family:Cambria\"> 64</span>",
      "<span style=\"font-family:Cambria\"> 128</span>",
      "<span style=\"font-family:Cambria\"> 216</span>",
      "<span style=\"font-family:Cambria\"> 192</span>"
    ],
    "correct_option_id": 2,
    "solution": "<span style=\"font-family:Cambria\"> </span><img src=\"https://appx-content-v2.classx.co.in/website/bulk_uploader_images/1734084312540_image004.png\" width=\"602\" height=\"293\" alt=\"\"><p></p>",
    "question_index": 3
  },
  {
    "question": "<style> img, svg {vertical-align: middle; max-width:100%; } *{overflow-wrap: break-word;}  </style> <span style=\"font-family:Cambria\"> A’s marks in Mathematics are directly proportional to practice time. In 8 hours of practice, A gets 70 marks. What should be the practice time (approximately) to get 110 marks?</span>",
    "options": [
      "<span style=\"font-family:Cambria\"> 11 hrs</span>",
      "<span style=\"font-family:Cambria\"> 11.5 hrs</span>",
      "<span style=\"font-family:Cambria\"> 12 hrs</span>",
      "<span style=\"font-family:Cambria\"> 12.5 hrs</span>"
    ],
    "correct_option_id": 3,
    "solution": "<span style=\"font-family:Cambria\"> </span><img src=\"https://appx-content-v2.classx.co.in/website/bulk_uploader_images/1734084312540_image005.png\" width=\"602\" height=\"351\" alt=\"\"><p></p>",
    "question_index": 4
  },
  {
    "question": "<style> img, svg {vertical-align: middle; max-width:100%; } *{overflow-wrap: break-word;}  </style> <span style=\"font-family:Cambria\"> The population of a town is 25000. If the population increases by 15% in the first year, by 25% in the second year and due to pollution it decreases by 6% in the third year, what will be its population after 3 years?</span>",
    "options": [
      "<span style=\"font-family:Cambria\"> 33781</span>",
      "<span style=\"font-family:Cambria\"> 31520</span>",
      "<span style=\"font-family:Cambria\"> 36529</span>",
      "<span style=\"font-family:Cambria\"> 30921</span>"
    ],
    "correct_option_id": 0,
    "solution": "<span style=\"font-family:Cambria\"> Population of the town after 3 years = </span><img src=\"https://appx-content-v2.classx.co.in/website/bulk_uploader_images/1734084312540_image006.png\" width=\"218\" height=\"19\" alt=\"\" style=\"vertical-align:middle\"><span style=\"font-family:Cambria\">33781</span><p></p>",
    "question_index": 5
  },
  {
    "question": "<style> img, svg {vertical-align: middle; max-width:100%; } *{overflow-wrap: break-word;}  </style> <span style=\"font-family:Cambria\"> A certain quantity of a 36% sugar solution is mixed with 9 litres of a 54% sugar solution to obtain a 42% sugar solution. How many litres of the 36% sugar solution was there in the mixture?</span>",
    "options": [
      "<span style=\"font-family:Cambria\"> 9</span>",
      "<span style=\"font-family:Cambria\"> 12</span>",
      "<span style=\"font-family:Cambria\"> 15</span>",
      "<span style=\"font-family:Cambria\"> 18</span>"
    ],
    "correct_option_id": 3,
    "solution": "<span style=\"font-family:Cambria\"></span><img src=\"https://appx-content-v2.classx.co.in/website/bulk_uploader_images/1734084312540_image007.png\" width=\"602\" height=\"641\" alt=\"\"><p></p>",
    "question_index": 6
  },
  {
    "question": "<style> img, svg {vertical-align: middle; max-width:100%; } *{overflow-wrap: break-word;}  </style> <span style=\"font-family:Cambria\"> Which is the smallest natural number that is exactly divisible by each of 72, 144 and 162?</span>",
    "options": [
      "<span style=\"font-family:Cambria\"> 648</span>",
      "<span style=\"font-family:Cambria\"> 972</span>",
      "<span style=\"font-family:Cambria\"> 1296</span>",
      "<span style=\"font-family:Cambria\"> 1944</span>"
    ],
    "correct_option_id": 2,
    "solution": "<span style=\"font-family:Cambria\"></span><p><img src=\"https://appx-content-v2.classx.co.in/website/bulk_uploader_images/1734084312540_image008.png\" width=\"602\" height=\"489\" alt=\"\"></p><p></p>",
    "question_index": 7
  },
  {
    "question": "<style> img, svg {vertical-align: middle; max-width:100%; } *{overflow-wrap: break-word;}  </style> <span style=\"font-family:Cambria\"> If an observation 71 is removed from the data 63, 65, 68, 71,74, 76, 79, 83, then the median is increased by:</span>",
    "options": [
      "<span style=\"font-family:Cambria\"> 0.5 </span>",
      "<span style=\"font-family:Cambria\"> 1 </span>",
      "<span style=\"font-family:Cambria\"> 1.5 </span>",
      "<span style=\"font-family:Cambria\"> 2</span>"
    ],
    "correct_option_id": 2,
    "solution": "<span style=\"font-family:Cambria\"></span><p><img src=\"https://appx-content-v2.classx.co.in/website/bulk_uploader_images/1734084312540_image009.png\" width=\"602\" height=\"496\" alt=\"\"></p><p></p>",
    "question_index": 8
  },
  {
    "question": "<style> img, svg {vertical-align: middle; max-width:100%; } *{overflow-wrap: break-word;}  </style> <span style=\"font-family:Cambria\"> The simple interest on the sum for 10 years is four-fifth of the sum. The rate of interest per annum is:</span>",
    "options": [
      "<span style=\"font-family:Cambria\"> 4%</span>",
      "<span style=\"font-family:Cambria\"> 6%</span>",
      "<span style=\"font-family:Cambria\"> 8%</span>",
      "<span style=\"font-family:Cambria\"> 10%</span>"
    ],
    "correct_option_id": 2,
    "solution": "<span style=\"font-family:Cambria\"> </span><p><img src=\"https://appx-content-v2.classx.co.in/website/bulk_uploader_images/1734084312540_image010.png\" width=\"388\" height=\"236\" alt=\"\"></p><p></p>",
    "question_index": 9
  },
  {
    "question": "<style> img, svg {vertical-align: middle; max-width:100%; } *{overflow-wrap: break-word;}  </style> <span style=\"font-family:Cambria\"> A vertical pillar 48cm long casts a 36 cm long shadow. At the same time, a tower casts a shadow 24 m long. Find the height of the tower.</span>",
    "options": [
      "<span style=\"font-family:Cambria\"> 28 m</span>",
      "<span style=\"font-family:Cambria\"> 32 m</span>",
      "<span style=\"font-family:Cambria\"> 35 m</span>",
      "<span style=\"font-family:Cambria\"> 30 m</span>"
    ],
    "correct_option_id": 1,
    "solution": "<span style=\"font-family:Cambria\"> </span><p><span style=\"font-family:Cambria\"> </span></p><p><img src=\"https://appx-content-v2.classx.co.in/website/bulk_uploader_images/1734084312540_image011.png\" width=\"602\" height=\"493\" alt=\"\"></p><p><span style=\"font-family:Cambria\"> </span></p><p></p>",
    "question_index": 10
  },
  {
    "question": "<style> img, svg {vertical-align: middle; max-width:100%; } *{overflow-wrap: break-word;}  </style> <span style=\"font-family:Cambria\"> The height of a cone is 40 cm. A small cone is cut off at the top by a plane parallel to the base. If its volume be 8/125th of the volume of the given cone, at what height above the base is the section made? </span>",
    "options": [
      "<span style=\"font-family:Cambria\"> 16 cm</span>",
      "<span style=\"font-family:Cambria\"> 20 cm</span>",
      "<span style=\"font-family:Cambria\"> 24 cm</span>",
      "<span style=\"font-family:Cambria\"> 28 cm</span>"
    ],
    "correct_option_id": 2,
    "solution": "<span style=\"font-family:Cambria\"> </span><p><img src=\"https://appx-content-v2.classx.co.in/website/bulk_uploader_images/1734084312540_image012.png\" width=\"602\" height=\"664\" alt=\"\"></p><p></p>",
    "question_index": 11
  },
  {
    "question": "<style> img, svg {vertical-align: middle; max-width:100%; } *{overflow-wrap: break-word;}  </style> <span style=\"font-family:Cambria\"> Logan has ₹13,000 and starts saving ₹3,800 each week towards buying a new laptop. At the same time, Ryan has ₹75,000 and begins spending ₹2,400 per week on supplies for his art class. Will there be a week when they have the same amount of money?</span>",
    "options": [
      "<span style=\"font-family:Cambria\"> Yes, after 10 months</span>",
      "<span style=\"font-family:Cambria\"> No, they won’t have same amount of money</span>",
      "<span style=\"font-family:Cambria\"> Yes, after 8 months</span>",
      "<span style=\"font-family:Cambria\"> Yes, after 9 months</span>"
    ],
    "correct_option_id": 0,
    "solution": "<span style=\"font-family:Cambria\"> </span><p><span style=\"font-family:Cambria\"> </span></p><p><img src=\"https://appx-content-v2.classx.co.in/website/bulk_uploader_images/1734084312540_image013.png\" width=\"602\" height=\"160\" alt=\"\"></p><p></p>",
    "question_index": 12
  },
  {
    "question": "<style> img, svg {vertical-align: middle; max-width:100%; } *{overflow-wrap: break-word;}  </style> <span style=\"font-family:Cambria\"> In an engineering college, there are four branches namely Computer Science (CS), Electronics (EC), Civil (CE), and Mechanical (ME). The respective ratio of the number of students in these branches is 13 : 6 : 7 : 9. What is the percentage of students belonging to CS and ME branches in the college (correct up to two decimal places)?</span>",
    "options": [
      "<span style=\"font-family:Cambria\"> 61.35%</span>",
      "<span style=\"font-family:Cambria\"> 62.15%</span>",
      "<span style=\"font-family:Cambria\"> 62.85%</span>",
      "<span style=\"font-family:Cambria\"> 61.05%</span>"
    ],
    "correct_option_id": 2,
    "solution": "<span style=\"font-family:Cambria\"> Percentage of students belonging to CS and ME branches in the college = </span><img src=\"https://appx-content-v2.classx.co.in/website/bulk_uploader_images/1734084312540_image014.png\" width=\"152\" height=\"27\" alt=\"\" style=\"vertical-align:middle\"><span style=\"font-family:Cambria\">%</span><p></p>",
    "question_index": 13
  },
  {
    "question": "<style> img, svg {vertical-align: middle; max-width:100%; } *{overflow-wrap: break-word;}  </style> <span style=\"font-family:Cambria\"> A cylinder has a radius of 14 cm and the area of its curved surface is 792 cm</span><span style=\"line-height:115%;font-family:Cambria;font-size:7.33pt;vertical-align:super\">2</span><span style=\"font-family:Cambria\">. The volume of the cylinder is:</span>",
    "options": [
      "<span style=\"font-family:Cambria\"> 5236 cm</span><span style=\"line-height:115%;font-family:Cambria;font-size:7.33pt;vertical-align:super\">3</span>",
      "<span style=\"font-family:Cambria\"> 5544 cm</span><span style=\"line-height:115%;font-family:Cambria;font-size:7.33pt;vertical-align:super\">3</span>",
      "<span style=\"font-family:Cambria\"> 5445 cm</span><span style=\"line-height:115%;font-family:Cambria;font-size:7.33pt;vertical-align:super\">3</span>",
      "<span style=\"font-family:Cambria\"> 5964 cm</span><span style=\"line-height:115%;font-family:Cambria;font-size:7.33pt;vertical-align:super\">3</span>"
    ],
    "correct_option_id": 1,
    "solution": "<span style=\"font-family:Cambria\"> </span><img src=\"https://appx-content-v2.classx.co.in/website/bulk_uploader_images/1734084312540_image015.png\" width=\"602\" height=\"505\" alt=\"\"><p></p>",
    "question_index": 14
  },
  {
    "question": "<style> img, svg {vertical-align: middle; max-width:100%; } *{overflow-wrap: break-word;}  </style> <span style=\"font-family:Cambria\"> </span><span style=\"font-family:Cambria\"> If the 8-digit number 7653603xy is divisible by 8, then the total possible pairs of (x, y) are: </span>",
    "options": [
      "<span style=\"font-family:Cambria\"> 12</span>",
      "<span style=\"font-family:Cambria\"> 13</span>",
      "<span style=\"font-family:Cambria\"> 11</span>",
      "<span style=\"font-family:Cambria\"> 14</span>"
    ],
    "correct_option_id": 0,
    "solution": "<span style=\"font-family:Cambria\"> </span><p><span style=\"font-family:Cambria\">3xy must be divisible by 8.</span></p><p><span style=\"font-family:Cambria\">The possible pairs are 304, 312, 320, 328, 336, 344, 352, 360, 368, 376, 384, 392 = Total 12</span></p><p></p>",
    "question_index": 15
  },
  {
    "question": "<style> img, svg {vertical-align: middle; max-width:100%; } *{overflow-wrap: break-word;}  </style> <span style=\"font-family:Cambria\"> If the average of 50 number N</span><span style=\"line-height:115%;font-family:Cambria;font-size:7.33pt;vertical-align:sub\">1</span><span style=\"font-family:Cambria\">, N</span><span style=\"line-height:115%;font-family:Cambria;font-size:7.33pt;vertical-align:sub\">2</span><span style=\"font-family:Cambria\">, ..................N</span><span style=\"line-height:115%;font-family:Cambria;font-size:7.33pt;vertical-align:sub\">50</span><span style=\"font-family:Cambria\"> is M. Then the average of the numbers N</span><span style=\"line-height:115%;font-family:Cambria;font-size:7.33pt;vertical-align:sub\">1</span><span style=\"font-family:Cambria\">-100, N</span><span style=\"line-height:115%;font-family:Cambria;font-size:7.33pt;vertical-align:sub\">2</span><span style=\"font-family:Cambria\">-100, ..................N</span><span style=\"line-height:115%;font-family:Cambria;font-size:7.33pt;vertical-align:sub\">50</span><span style=\"font-family:Cambria\">-100 will be:</span>",
    "options": [
      "<span style=\"font-family:Cambria\"> 50M</span>",
      "<span style=\"font-family:Cambria\"> M − 50</span>",
      "<span style=\"font-family:Cambria\"> 100M</span>",
      "<span style=\"font-family:Cambria\"> M − 100</span>"
    ],
    "correct_option_id": 3,
    "solution": "<span style=\"font-family:Cambria\"> If each observation is increased/decreased/multiplied/divided by a non-zero number a; then mean is also increased/decreased/multiplied/divided by a.</span><p><img src=\"https://appx-content-v2.classx.co.in/website/bulk_uploader_images/1734084312540_image016.png\" width=\"19\" height=\"19\" alt=\"\" style=\"vertical-align:middle\"><span style=\"font-family:Cambria\">Average of the numbers N</span><span style=\"line-height:115%;font-family:Cambria;font-size:7.33pt;vertical-align:sub\">1-</span><span style=\"font-family:Cambria\">100, N</span><span style=\"line-height:115%;font-family:Cambria;font-size:7.33pt;vertical-align:sub\">2-</span><span style=\"font-family:Cambria\">100, ..................N</span><span style=\"line-height:115%;font-family:Cambria;font-size:7.33pt;vertical-align:sub\">50-</span><span style=\"font-family:Cambria\">100 = M - 100 </span></p><p></p>",
    "question_index": 16
  },
  {
    "question": "<style> img, svg {vertical-align: middle; max-width:100%; } *{overflow-wrap: break-word;}  </style> <span style=\"font-family:Cambria\"> What is the remainder when (</span><img src=\"https://appx-content-v2.classx.co.in/website/bulk_uploader_images/1734084312540_image017.png\" width=\"106\" height=\"19\" alt=\"\" style=\"vertical-align:middle\"><span style=\"font-family:Cambria\">) is divisible by 87?</span>",
    "options": [
      "<span style=\"font-family:Cambria\"> 87</span>",
      "<span style=\"font-family:Cambria\"> 1</span>",
      "<span style=\"font-family:Cambria\"> 3</span>",
      "<span style=\"font-family:Cambria\"> 0</span>"
    ],
    "correct_option_id": 3,
    "solution": "<span style=\"font-family:Cambria\"> </span><span style=\"font-family:Cambria\"> </span><p><span style=\"font-family:Cambria\">a^n – b^n is always divisible by (a-b) if n is an integer.</span></p><p><img src=\"https://appx-content-v2.classx.co.in/website/bulk_uploader_images/1734084312540_image018.png\" width=\"602\" height=\"396\" alt=\"\"></p><p></p>",
    "question_index": 17
  },
  {
    "question": "<style> img, svg {vertical-align: middle; max-width:100%; } *{overflow-wrap: break-word;}  </style> <span style=\"font-family:Cambria\"> The area (in sq. units) of the triangle formed by the graphs of 8x+3y=24, 2x+8=y and the x-axis is:</span>",
    "options": [
      "<span style=\"font-family:Cambria\"> 24</span>",
      "<span style=\"font-family:Cambria\"> 15</span>",
      "<span style=\"font-family:Cambria\"> 28</span>",
      "<span style=\"font-family:Cambria\"> 14</span>"
    ],
    "correct_option_id": 2,
    "solution": "<span style=\"font-family:Cambria\"> </span><p><span style=\"font-family:Cambria\">8x+3y=24</span></p><p><span style=\"font-family:Cambria\">2x+8=y</span></p><p><span style=\"font-family:Cambria\">On solving these equations, we get y = 8. </span></p><p><span style=\"font-family:Cambria\">8x+3y=24, We put x = 0; then y = 3</span></p><p><span style=\"font-family:Cambria\">2x+8=y, We put x = 0; then y = -4</span></p><p><span style=\"font-family:Cambria\">Area of triangle, ½ * base * height = ½ * (3-(-4)) * 8 = 28</span></p><p><img src=\"https://appx-content-v2.classx.co.in/website/bulk_uploader_images/1734084312540_image019.png\" width=\"436\" height=\"422\" alt=\"\"></p><p><span style=\"font-family:Cambria\"> </span></p><p></p>",
    "question_index": 18
  },
  {
    "question": "<style> img, svg {vertical-align: middle; max-width:100%; } *{overflow-wrap: break-word;}  </style> <span style=\"line-height:115%;font-family:Cambria;font-size:11pt\"> </span><span style=\"font-family:Cambria\">Simplify the following expression:</span><p><span style=\"font-family:Cambria\">81</span><span style=\"line-height:115%;font-family:Cambria;font-size:8pt;vertical-align:super\">16</span><span style=\"line-height:115%;font-family:Cambria;font-size:8pt;vertical-align:super\">  </span><span style=\"font-family:Cambria\">÷ 27</span><span style=\"line-height:115%;font-family:Cambria;font-size:8pt;vertical-align:super\">12</span><span style=\"font-family:Cambria\">  </span><span style=\"font-family:Cambria\">of 81</span><span style=\"line-height:115%;font-family:Cambria;font-size:8pt;vertical-align:super\">3</span><span style=\"font-family:Cambria\"> × </span><img src=\"https://appx-content-v2.classx.co.in/website/bulk_uploader_images/1734084312540_image020.png\" width=\"46\" height=\"22\" alt=\"\" style=\"vertical-align:middle\"></p>",
    "options": [
      "<style> img, svg {vertical-align: middle; max-width:100%;} *{overflow-wrap: break-word;}  </style> <span style=\"font-family:Cambria\"> </span><img src=\"https://appx-content-v2.classx.co.in/website/bulk_uploader_images/1734084312540_image021.png\" width=\"24\" height=\"21\" alt=\"\" style=\"vertical-align:middle\">",
      "<style> img, svg {vertical-align: middle; max-width:100%;} *{overflow-wrap: break-word;}  </style> <span style=\"font-family:Cambria\"> </span><img src=\"https://appx-content-v2.classx.co.in/website/bulk_uploader_images/1734084312540_image022.png\" width=\"24\" height=\"21\" alt=\"\" style=\"vertical-align:middle\">",
      "<style> img, svg {vertical-align: middle; max-width:100%;} *{overflow-wrap: break-word;}  </style> <span style=\"font-family:Cambria\"> </span><img src=\"https://appx-content-v2.classx.co.in/website/bulk_uploader_images/1734084312540_image023.png\" width=\"24\" height=\"21\" alt=\"\" style=\"vertical-align:middle\">",
      "<style> img, svg {vertical-align: middle; max-width:100%;} *{overflow-wrap: break-word;}  </style> <span style=\"font-family:Cambria\"> </span><img src=\"https://appx-content-v2.classx.co.in/website/bulk_uploader_images/1734084312540_image024.png\" width=\"24\" height=\"21\" alt=\"\" style=\"vertical-align:middle\">"
    ],
    "correct_option_id": 1,
    "solution": "<span style=\"font-family:Cambria\"></span><p><img src=\"https://appx-content-v2.classx.co.in/website/bulk_uploader_images/1734084312540_image025.png\" width=\"602\" height=\"375\" alt=\"\"></p><p><span style=\"font-family:Cambria\"> </span></p><p></p>",
    "question_index": 19
  },
  {
    "question": "<style> img, svg {vertical-align: middle; max-width:100%; } *{overflow-wrap: break-word;}  </style> <span style=\"font-family:Cambria\"></span><span style=\"font-family:Cambria\">  </span><span style=\"font-family:Cambria\">A bag contains 5 red and 7 pink balls. One ball is removed and replaced with pink ball and then second ball is chosen. What is the probability of getting 2 red balls or 2 pink colour balls?</span>",
    "options": [
      "<style> img, svg {vertical-align: middle; max-width:100%;} *{overflow-wrap: break-word;}  </style> <span style=\"font-family:Cambria\"> </span><img src=\"https://appx-content-v2.classx.co.in/website/bulk_uploader_images/1734084312540_image026.png\" width=\"19\" height=\"27\" alt=\"\" style=\"vertical-align:middle\">",
      "<style> img, svg {vertical-align: middle; max-width:100%;} *{overflow-wrap: break-word;}  </style> <span style=\"font-family:Cambria\"> </span><img src=\"https://appx-content-v2.classx.co.in/website/bulk_uploader_images/1734084312540_image027.png\" width=\"19\" height=\"27\" alt=\"\" style=\"vertical-align:middle\">",
      "<style> img, svg {vertical-align: middle; max-width:100%;} *{overflow-wrap: break-word;}  </style> <span style=\"font-family:Cambria\"> </span><img src=\"https://appx-content-v2.classx.co.in/website/bulk_uploader_images/1734084312540_image028.png\" width=\"19\" height=\"27\" alt=\"\" style=\"vertical-align:middle\"><span style=\"font-family:Cambria\">     </span>",
      "<style> img, svg {vertical-align: middle; max-width:100%;} *{overflow-wrap: break-word;}  </style> <span style=\"font-family:Cambria\"> </span><img src=\"https://appx-content-v2.classx.co.in/website/bulk_uploader_images/1734084312540_image029.png\" width=\"19\" height=\"27\" alt=\"\" style=\"vertical-align:middle\">"
    ],
    "correct_option_id": 1,
    "solution": "<span style=\"font-family:Cambria\"> </span><p><img src=\"https://appx-content-v2.classx.co.in/website/bulk_uploader_images/1734084312540_image030.png\" width=\"602\" height=\"467\" alt=\"\"></p><p></p>",
    "question_index": 20
  },
  {
    "question": "<style> img, svg {vertical-align: middle; max-width:100%; } *{overflow-wrap: break-word;}  </style> <span style=\"font-family:Cambria\"> A can complete a piece of work in 20 days and B can complete the same work in 10 days. With the help of C, working together the completed the work in 5 days. The number of days in which C alone can complete the work is:</span>",
    "options": [
      "<span style=\"font-family:Cambria\"> 25</span>",
      "<span style=\"font-family:Cambria\"> 10</span>",
      "<span style=\"font-family:Cambria\"> 20</span>",
      "<span style=\"font-family:Cambria\"> 15</span>"
    ],
    "correct_option_id": 2,
    "solution": "<span style=\"font-family:Cambria\"> </span><p><span style=\"font-family:Cambria\">Work done by C in 5 days = 1 - (5/20 + 5/10] = ¼</span></p><p><span style=\"font-family:Cambria\">Total work will be completed by c in 5*4 = 20 days.</span></p><p></p>",
    "question_index": 21
  },
  {
    "question": "<style> img, svg {vertical-align: middle; max-width:100%; } *{overflow-wrap: break-word;}  </style> <span style=\"font-family:Cambria\"> A contractor undertakes to complete a work in 360 days. He employs 420 workers for 90 days and they complete </span><img src=\"https://appx-content-v2.classx.co.in/website/bulk_uploader_images/1734084312540_image031.png\" width=\"7\" height=\"27\" alt=\"\" style=\"vertical-align:middle\"><span style=\"font-family:Cambria\"> of the work. He then reduces the number of workers to 170, who work for 180 days, after which there are 30 days of holidays. How many workers must be employed after holidays for the remaining period to complete the work on time?</span>",
    "options": [
      "<span style=\"font-family:Cambria\"> 80</span>",
      "<span style=\"font-family:Cambria\"> 90</span>",
      "<span style=\"font-family:Cambria\"> 120</span>",
      "<span style=\"font-family:Cambria\"> 150</span>"
    ],
    "correct_option_id": 2,
    "solution": "<span style=\"font-family:Cambria\"></span><p><img src=\"https://appx-content-v2.classx.co.in/website/bulk_uploader_images/1734084312540_image032.png\" width=\"602\" height=\"312\" alt=\"\"></p><p></p>",
    "question_index": 22
  },
  {
    "question": "<style> img, svg {vertical-align: middle; max-width:100%; } *{overflow-wrap: break-word;}  </style> <span style=\"font-family:Cambria\"> In an obtuse - angled triangle ABC, the length of its longest side AB is 58 cm and one of the other two sides is 33 cm. If the area of the triangle is 660 cm</span><span style=\"line-height:115%;font-family:Cambria;font-size:7.33pt;vertical-align:super\">2</span><span style=\"font-family:Cambria\">, what is the length (in cm) of its third side? </span>",
    "options": [
      "<span style=\"font-family:Cambria\"> 33</span>",
      "<span style=\"font-family:Cambria\"> 41</span>",
      "<span style=\"font-family:Cambria\"> 37</span>",
      "<span style=\"font-family:Cambria\"> 47</span>"
    ],
    "correct_option_id": 1,
    "solution": "<span style=\"font-family:Cambria\"> </span><p><img src=\"https://appx-content-v2.classx.co.in/website/bulk_uploader_images/1734084312540_image033.png\" width=\"602\" height=\"724\" alt=\"\"></p><p></p>",
    "question_index": 23
  },
  {
    "question": "<style> img, svg {vertical-align: middle; max-width:100%; } *{overflow-wrap: break-word;}  </style> <span style=\"font-family:Cambria\"> </span><img src=\"https://appx-content-v2.classx.co.in/website/bulk_uploader_images/1734084312540_image034.png\" width=\"270\" height=\"55\" alt=\"\" style=\"vertical-align:middle\">",
    "options": [
      "<span style=\"font-family:Cambria\"> 5</span>",
      "<span style=\"font-family:Cambria\"> 7</span>",
      "<span style=\"font-family:Cambria\"> 9</span>",
      "<span style=\"font-family:Cambria\"> 11</span>"
    ],
    "correct_option_id": 2,
    "solution": "<span style=\"font-family:Cambria\"></span><p><img src=\"https://appx-content-v2.classx.co.in/website/bulk_uploader_images/1734084312540_image035.png\" width=\"602\" height=\"574\" alt=\"\"></p><p></p>",
    "question_index": 24
  },
  {
    "question": "<style> img, svg {vertical-align: middle; max-width:100%; } *{overflow-wrap: break-word;}  </style> <span style=\"font-family:Cambria\"> O is the centre of a circle and A is a point on a major arc BC of the circle. ∠BOC and ∠BAC are the angles made by the minor arc BC on the centre and circumference, respectively. If ∠ABO = 44° and ∠ACO = 36°, then find ∠BOC?</span>",
    "options": [
      "<style> img, svg {vertical-align: middle; max-width:100%;} *{overflow-wrap: break-word;}  </style> <span style=\"font-family:Cambria\"> 150</span><img src=\"https://appx-content-v2.classx.co.in/website/bulk_uploader_images/1734084312540_image036.png\" width=\"6\" height=\"19\" alt=\"\" style=\"vertical-align:middle\">",
      "<style> img, svg {vertical-align: middle; max-width:100%;} *{overflow-wrap: break-word;}  </style> <span style=\"font-family:Cambria\"> 160</span><img src=\"https://appx-content-v2.classx.co.in/website/bulk_uploader_images/1734084312540_image036.png\" width=\"6\" height=\"19\" alt=\"\" style=\"vertical-align:middle\">",
      "<style> img, svg {vertical-align: middle; max-width:100%;} *{overflow-wrap: break-word;}  </style> <span style=\"font-family:Cambria\"> 120</span><img src=\"https://appx-content-v2.classx.co.in/website/bulk_uploader_images/1734084312540_image036.png\" width=\"6\" height=\"19\" alt=\"\" style=\"vertical-align:middle\">",
      "<style> img, svg {vertical-align: middle; max-width:100%;} *{overflow-wrap: break-word;}  </style> <span style=\"font-family:Cambria\"> 130</span><img src=\"https://appx-content-v2.classx.co.in/website/bulk_uploader_images/1734084312540_image036.png\" width=\"6\" height=\"19\" alt=\"\" style=\"vertical-align:middle\">"
    ],
    "correct_option_id": 1,
    "solution": "<span style=\"font-family:Cambria\"></span><p><img src=\"https://appx-content-v2.classx.co.in/website/bulk_uploader_images/1734084312540_image037.png\" width=\"602\" height=\"550\" alt=\"\"></p><p><span style=\"font-family:Cambria\"> </span></p><p></p>",
    "question_index": 25
  },
  {
    "question": "<style> img, svg {vertical-align: middle; max-width:100%; } *{overflow-wrap: break-word;}  </style> <span style=\"font-family:Cambria\"> What is the mean deviation about median of the following data: </span><p><span style=\"font-family:Cambria\">2,7,9,4,10,21,3,12,11,19,13,21,3</span></p>",
    "options": [
      "<span style=\"font-family:Cambria\"> 4.2</span>",
      "<span style=\"font-family:Cambria\"> 5.3</span>",
      "<span style=\"font-family:Cambria\"> 6.3</span>",
      "<span style=\"font-family:Cambria\"> 7.2</span>"
    ],
    "correct_option_id": 1,
    "solution": "<span style=\"font-family:Cambria\"></span><p><img src=\"https://appx-content-v2.classx.co.in/website/bulk_uploader_images/1734084312540_image038.png\" width=\"602\" height=\"279\" alt=\"\"></p><p></p>",
    "question_index": 26
  },
  {
    "question": "<style> img, svg {vertical-align: middle; max-width:100%; } *{overflow-wrap: break-word;}  </style> <span style=\"font-family:Cambria\"> Pipes A and B can fill a tank in 32 hours and 48 hours, respectively while pipe C alone can empty the full tank in 24 hours. When the tank is full, C alone is opened for 17 hours and then closed and pipes A and B are opened together at the same time. Now, how much time will pipes A and B together take to fill the tank completely?</span>",
    "options": [
      "<span style=\"font-family:Cambria\"> 5.6 hours</span>",
      "<span style=\"font-family:Cambria\"> 8.8 hours</span>",
      "<span style=\"font-family:Cambria\"> 10.6 hours</span>",
      "<span style=\"font-family:Cambria\"> 13.6 hours</span>"
    ],
    "correct_option_id": 3,
    "solution": "<span style=\"font-family:Cambria\"></span><p><img src=\"https://appx-content-v2.classx.co.in/website/bulk_uploader_images/1734084312540_image039.png\" width=\"602\" height=\"667\" alt=\"\"></p><p></p>",
    "question_index": 27
  },
  {
    "question": "<style> img, svg {vertical-align: middle; max-width:100%; } *{overflow-wrap: break-word;}  </style> <span style=\"font-family:Cambria\"> A cylindrical pillar is 126 cm in diameter and 19 m in height. Find the cost of painting the curved surface of the pillar at the rate of ₹37 per m² (use </span><img src=\"https://appx-content-v2.classx.co.in/website/bulk_uploader_images/1734084312540_image040.png\" width=\"51\" height=\"27\" alt=\"\" style=\"vertical-align:middle\"><span style=\"font-family:Cambria\">.</span>",
    "options": [
      "<span style=\"font-family:Cambria\"> ₹2783.88</span>",
      "<span style=\"font-family:Cambria\"> ₹2861.21</span>",
      "<span style=\"font-family:Cambria\"> ₹3015.87</span>",
      "<span style=\"font-family:Cambria\"> ₹3256.36</span>"
    ],
    "correct_option_id": 0,
    "solution": "<span style=\"font-family:Cambria\"> </span><p><img src=\"https://appx-content-v2.classx.co.in/website/bulk_uploader_images/1734084312540_image041.png\" width=\"602\" height=\"860\" alt=\"\"></p><p></p>",
    "question_index": 28
  },
  {
    "question": "<style> img, svg {vertical-align: middle; max-width:100%; } *{overflow-wrap: break-word;}  </style> <span style=\"font-family:Cambria\"> A seller marks an item for ₹630 and sells it at a discount of 20%. He also gives a gift worth ₹63. If he still makes 5% profit, then the cost price of the item (in ₹) is:</span>",
    "options": [
      "<span style=\"font-family:Cambria\"> 350</span>",
      "<span style=\"font-family:Cambria\"> 360</span>",
      "<span style=\"font-family:Cambria\"> 420</span>",
      "<span style=\"font-family:Cambria\"> 480</span>"
    ],
    "correct_option_id": 2,
    "solution": "<span style=\"font-family:Cambria\"> </span><p><img src=\"https://appx-content-v2.classx.co.in/website/bulk_uploader_images/1734084312540_image042.png\" width=\"602\" height=\"680\" alt=\"\"></p><p><span style=\"font-family:Cambria\"> </span></p><p><span style=\"font-family:Cambria\"> </span></p><p></p>",
    "question_index": 29
  }
];
            this.sections = null;
            this.curQ = 0;
            this.ans = new Array(this.qs.length).fill(null);
            this.reviewed = new Array(this.qs.length).fill(false);
            this.startT = Date.now();
            this.timeLeft = 30 * 60;
            this.timeSpent = new Array(this.qs.length).fill(0);
            this.lastQTime = this.startT;
            this.sub = false;
            this.eng = true;
            this.darkMode = false;
            this.timer = null;
            this.sectionTimer = null;
            this.currentSection = this.sections ? 0 : null;
            this.initEls();
            this.setupWelcomeScreen();
            this.validateData();
            this.setupBeforeUnload();
        }
            
            setupWelcomeScreen() {
                document.getElementById('startTestBtn').addEventListener('click', () => {
                    // Hide welcome screen
                    document.getElementById('welcomeScreen').classList.add('hidden');
                    
                    // Show main test interface
                    document.getElementById('mainTestInterface').style.display = '';
                    
                    // Initialize the test
                    setTimeout(() => {
                        this.init();
                    }, 300);
                });
            }
            
            setupBeforeUnload() {
                window.addEventListener('beforeunload', (e) => {
                    if (!this.sub) {
                        e.preventDefault();
                        e.returnValue = 'Are you sure you want to leave? Your test progress will be lost.';
                        return e.returnValue;
                    }
                });
            }
            
            validateData() {
                console.log('Validating question data...');
                this.qs.forEach((q, idx) => {
                    if (q.correct_option_id !== undefined) {
                        console.log(`Q${idx + 1}: correct_option_id = ${q.correct_option_id}, options count = ${q.options ? q.options.length : 0}`);
                        
                        if (q.options && (q.correct_option_id < 0 || q.correct_option_id >= q.options.length)) {
                            console.warn(`Q${idx + 1}: Invalid correct_option_id ${q.correct_option_id} for ${q.options.length} options`);
                        }
                    }
                });
            }
            
            initEls() {
                this.els = {
                    qInfo: document.getElementById('qInfo'),
                    progTxt: document.getElementById('progTxt'),
                    ansCnt: document.getElementById('ansCnt'),
                    timer: document.getElementById('timer'),
                    qTxt: document.getElementById('qTxt'),
                    compSec: document.getElementById('compSec'),
                    compCont: document.getElementById('compCont'),
                    opts: document.getElementById('opts'),
                    sol: document.getElementById('sol'),
                    solCont: document.getElementById('solCont'),
                    solInfo: document.getElementById('solInfo'),
                    qGrid: document.getElementById('qGrid'),
                    desktopQGrid: document.getElementById('desktopQGrid'),
                    panel: document.getElementById('panel'),
                    modalOver: document.getElementById('modalOver'),
                    scoreDisp: document.getElementById('scoreDisp'),
                    corrStat: document.getElementById('corrStat'),
                    incStat: document.getElementById('incStat'),
                    unaStat: document.getElementById('unaStat'),
                    timeStat: document.getElementById('timeStat'),
                    printBtn: document.getElementById('printBtn'),
                    desktopSidebar: document.getElementById('desktopSidebar'),
                    reviewBtn: document.getElementById('reviewBtn'),
                    themeToggle: document.getElementById('themeToggle'),
                    sectionHeader: this.sections ? document.getElementById('sectionHeader') : null,
                    sectionTitle: this.sections ? document.getElementById('sectionTitle') : null,
                    sectionTimer: this.sections ? document.getElementById('sectionTimer') : null
                };
            }
            
            init() {
                this.createGrid();
                this.startTimer();
                if (this.sections) {
                    this.startSectionTimer();
                    this.updateSectionHeader();
                }
                this.loadQ(0);
                this.setupEvents();
                this.updatePrintButton();
                this.updateThemeToggleIcon();
            }
            
            setupEvents() {
                document.getElementById('menuBtn').onclick = () => this.togglePanel();
                document.getElementById('subBtn').onclick = () => this.confirmSub();
                document.getElementById('prevBtn').onclick = () => this.nav(-1);
                document.getElementById('nextBtn').onclick = () => this.nav(1);
                document.getElementById('reviewBtn').onclick = () => this.toggleReview();
                document.getElementById('engBtn').onclick = () => this.setLang(true);
                document.getElementById('hinBtn').onclick = () => this.setLang(false);
                document.getElementById('panelClose').onclick = () => this.closePanel();
                document.getElementById('closeModal').onclick = () => this.closeModal();
                document.getElementById('revBtn').onclick = () => this.review();
                document.getElementById('printBtn').onclick = () => this.printTest();
                document.getElementById('themeToggle').onclick = () => this.toggleTheme();
            }
            
            // IMPROVED: Better handling of complex HTML content including math expressions
            extractTxt(html, isEng) {
                if (!html) return '';
                
                // Create a temporary div to parse the HTML
                const tempDiv = document.createElement('div');
                tempDiv.innerHTML = html;
                
                // Process math expressions - convert them to proper HTML structure
                const mathExps = tempDiv.querySelectorAll('div[style*="inline-block"][style*="vertical-align: middle"]');
                mathExps.forEach(mathExp => {
                    // Create a new math expression container
                    const newMathExp = document.createElement('div');
                    newMathExp.className = 'math-exp';
                    
                    // Get numerator and denominator
                    const spans = mathExp.querySelectorAll('span');
                    if (spans.length >= 3) {
                        const numerator = spans[0].cloneNode(true);
                        const line = spans[1].cloneNode(true);
                        const denominator = spans[2].cloneNode(true);
                        
                        // Clean up the numerator
                        const numDiv = document.createElement('div');
                        numDiv.className = 'math-num';
                        numDiv.innerHTML = numerator.innerHTML;
                        
                        // Create the dividing line
                        const lineDiv = document.createElement('div');
                        lineDiv.className = 'math-line';
                        
                        // Clean up the denominator
                        const denDiv = document.createElement('div');
                        denDiv.className = 'math-num';
                        denDiv.innerHTML = denominator.innerHTML;
                        
                        // Build the new math expression
                        newMathExp.appendChild(numDiv);
                        newMathExp.appendChild(lineDiv);
                        newMathExp.appendChild(denDiv);
                        
                        // Replace the original with our new structure
                        mathExp.parentNode.replaceChild(newMathExp, mathExp);
                    }
                });
                
                // Handle language selection - show/hide appropriate spans
                const langSpans = tempDiv.querySelectorAll('span.eqt, span.hqt');
                langSpans.forEach(span => {
                    if ((isEng && span.classList.contains('hqt')) || 
                        (!isEng && span.classList.contains('eqt'))) {
                        span.style.display = 'none';
                    } else {
                        span.style.display = '';
                        // Remove the class to prevent future hiding
                        span.classList.remove('eqt', 'hqt');
                    }
                });
                
                // Clean up any remaining display:none styles
                const hiddenElements = tempDiv.querySelectorAll('[style*="display:none"]');
                hiddenElements.forEach(el => {
                    if (el.style.display === 'none' && 
                        !el.classList.contains('hqt') && 
                        !el.classList.contains('eqt')) {
                        el.style.display = '';
                    }
                });
                
                // Handle tables - wrap them in a scrollable container
                const tables = tempDiv.querySelectorAll('table');
                tables.forEach(table => {
                    const container = document.createElement('div');
                    container.className = 'table-container';
                    table.parentNode.insertBefore(container, table);
                    container.appendChild(table);
                });
                
                return tempDiv.innerHTML;
            }
            
            createGrid() {
                this.els.qGrid.innerHTML = '';
                this.els.desktopQGrid.innerHTML = '';
                
                this.qs.forEach((_, i) => {
                    // Create mobile grid element
                    const mobileDiv = document.createElement('div');
                    mobileDiv.className = 'q-num';
                    mobileDiv.textContent = i + 1;
                    mobileDiv.onclick = () => this.goToQ(i);
                    this.els.qGrid.appendChild(mobileDiv);
                    
                    // Create desktop grid element
                    const desktopDiv = document.createElement('div');
                    desktopDiv.className = 'q-num';
                    desktopDiv.textContent = i + 1;
                    desktopDiv.onclick = () => this.goToQ(i);
                    this.els.desktopQGrid.appendChild(desktopDiv);
                });
            }
            
            loadQ(idx) {
                // Update time spent on previous question
                if (this.curQ !== idx) {
                    const now = Date.now();
                    this.timeSpent[this.curQ] += (now - this.lastQTime) / 1000;
                    this.lastQTime = now;
                }
                
                this.curQ = idx;
                const q = this.qs[idx];
                
                // Check if question is in current section (if sections exist)
                if (this.sections) {
                    const inCurrentSection = this.isInCurrentSection(idx);
                    if (!inCurrentSection) {
                        // Find the section this question belongs to
                        const sectionIdx = this.findSectionForQuestion(idx);
                        if (sectionIdx !== null && !this.sections[sectionIdx].submitted) {
                            this.currentSection = sectionIdx;
                            this.startSectionTimer();
                            this.updateSectionHeader();
                        }
                    }
                }
                
                this.els.qInfo.textContent = `Q${idx + 1}/${this.qs.length}`;
                this.els.progTxt.textContent = `${idx + 1} of ${this.qs.length}`;
                this.updateAnsCnt();
                this.updateNav();
                this.updateGrid();
                this.updateReviewButton();
                
                if (q.comp) {
                    this.els.compSec.style.display = 'block';
                    this.els.compCont.innerHTML = this.extractTxt(q.comp, this.eng);
                } else {
                    this.els.compSec.style.display = 'none';
                }
                
                this.els.qTxt.innerHTML = this.extractTxt(q.question, this.eng);
                this.loadOpts(q, idx);
                
                if (this.sub && q.solution) {
                    // Show time spent on question in solution
                    const timeSpent = Math.round(this.timeSpent[idx]);
                    const minutes = Math.floor(timeSpent / 60);
                    const seconds = timeSpent % 60;
                    const timeStr = minutes > 0 
                        ? `${minutes}m ${seconds}s` 
                        : `${seconds}s`;
                    
                    this.els.solInfo.innerHTML = `
                        <span><i class="fas fa-clock"></i> Time spent: ${timeStr}</span>
                        <span><i class="fas fa-check-circle"></i> Correct answer: ${String.fromCharCode(65 + q.correct_option_id)}</span>
                    `;
                    
                    this.els.solCont.innerHTML = this.extractTxt(q.solution, this.eng);
                    this.els.sol.classList.add('show');
                } else {
                    this.els.sol.classList.remove('show');
                }
            }
            
            loadOpts(q, qIdx) {
                this.els.opts.innerHTML = '';
                const userAnswer = this.ans[qIdx];
                const correctAnswer = q.correct_option_id;
                
                console.log(`Loading Q${qIdx + 1} options:`, {
                    userAnswer: userAnswer,
                    correctAnswer: correctAnswer,
                    submitted: this.sub,
                    optionsCount: q.options ? q.options.length : 0
                });
                
                if (!q.options || !Array.isArray(q.options)) {
                    console.error(`Q${qIdx + 1}: No valid options array`);
                    return;
                }
                
                q.options.forEach((opt, i) => {
                    const div = document.createElement('div');
                    let cls = 'opt';
                    
                    if (this.sub) {
                        cls += ' submitted';
                    }
                    
                    if (userAnswer === i) {
                        cls += ' sel';
                        console.log(`Q${qIdx + 1}: User selected option ${i}`);
                    }
                    
                    if (this.sub && correctAnswer !== undefined && correctAnswer !== null) {
                        if (i === correctAnswer) {
                            cls += ' correct';
                            console.log(`Q${qIdx + 1}: Option ${i} marked as correct (is correct answer)`);
                        } else if (userAnswer === i && userAnswer !== correctAnswer) {
                            cls += ' wrong';
                            console.log(`Q${qIdx + 1}: Option ${i} marked as wrong (user selected but incorrect)`);
                        }
                    }
                    
                    div.className = cls;
                    div.innerHTML = `
                        <div class="opt-radio"></div>
                        <div class="opt-txt">${this.extractTxt(opt, this.eng)}</div>
                    `;
                    
                    if (!this.sub) {
                        div.onclick = () => this.selOpt(i, qIdx);
                    }
                    
                    this.els.opts.appendChild(div);
                });
            }
            
            selOpt(optIdx, qIdx) {
                if (this.sub) return;
                this.ans[qIdx] = this.ans[qIdx] === optIdx ? null : optIdx;
                console.log(`Q${qIdx + 1}: Selected option ${optIdx}, answer array:`, this.ans[qIdx]);
                this.loadOpts(this.qs[qIdx], qIdx);
                this.updateAnsCnt();
                this.updateGrid();
            }
            
            toggleReview() {
                if (this.sub) return;
                this.reviewed[this.curQ] = !this.reviewed[this.curQ];
                this.updateGrid();
                this.updateReviewButton();
            }
            
            updateReviewButton() {
                const btn = this.els.reviewBtn;
                if (this.reviewed[this.curQ]) {
                    btn.classList.add('active');
                    btn.innerHTML = '<i class="fas fa-flag"></i>';
                } else {
                    btn.classList.remove('active');
                    btn.innerHTML = '<i class="fas fa-flag"></i>';
                }
            }
            
           nav(dir) {
            const newIdx = this.curQ + dir;
            
            // If test is submitted, allow free navigation for review
            if (this.sub) {
                if (newIdx >= 0 && newIdx < this.qs.length) {
                    this.loadQ(newIdx);
                }
                return;
            }
            
            // During test, enforce section boundaries
            if (this.sections) {
                const currentSection = this.sections[this.currentSection];
                if (newIdx < currentSection.start || newIdx > currentSection.end) {
                    return; // Don't allow navigation outside current section
                }
            }
            
            if (newIdx >= 0 && newIdx < this.qs.length) {
                this.loadQ(newIdx);
            }
        }
        
        goToQ(idx) {
            // Always allow navigation when reviewing after submission
            if (this.sub) {
                this.loadQ(idx);
                this.closePanel();
                return;
            }
            
            // During test, only allow navigation within current section
            if (this.sections) {
                const currentSection = this.sections[this.currentSection];
                if (idx < currentSection.start || idx > currentSection.end) {
                    return; // Block navigation outside current section
                }
            }
            
            this.loadQ(idx);
            this.closePanel();
        }
        
        updateGrid() {
            const nums = this.els.qGrid.querySelectorAll('.q-num');
            const desktopNums = this.els.desktopQGrid.querySelectorAll('.q-num');
            
            const updateNum = (el, i) => {
                el.className = 'q-num';
                
                // Reset all special classes
                el.classList.remove('cur', 'ans', 'wrong', 'review', 'unattempted', 'disabled');
                
                if (i === this.curQ) {
                    el.classList.add('cur');
                } else if (this.sub) {
                    // After submission - prioritize correct/wrong over review status
                    if (this.ans[i] !== null && this.qs[i].correct_option_id !== undefined) {
                        if (this.ans[i] === this.qs[i].correct_option_id) {
                            el.classList.add('ans');
                        } else {
                            el.classList.add('wrong');
                        }
                    } else if (this.ans[i] === null) {
                        el.classList.add('unattempted');
                    }
                } else {
                    // Before submission
                    if (this.reviewed[i]) {
                        el.classList.add('review');
                    } else if (this.ans[i] !== null) {
                        el.classList.add('ans');
                    }
                    
                    // Disable questions from other sections (only if sections exist)
                    if (this.sections) {
                        const currentSection = this.sections[this.currentSection];
                        if (i < currentSection.start || i > currentSection.end) {
                            el.classList.add('disabled');
                        }
                    }
                }
            };
            
            nums.forEach(updateNum);
            desktopNums.forEach(updateNum);
        }
        
        updateNav() {
            // Basic navigation limits
            document.getElementById('prevBtn').disabled = this.curQ === 0;
            document.getElementById('nextBtn').disabled = this.curQ === this.qs.length - 1;
            document.getElementById('reviewBtn').style.display = this.sub ? 'none' : 'inline-flex';
            
            // Additional navigation restrictions for sections during test
            if (this.sections && !this.sub) {
                const currentSection = this.sections[this.currentSection];
                document.getElementById('prevBtn').disabled = document.getElementById('prevBtn').disabled || 
                    (this.curQ === currentSection.start);
                document.getElementById('nextBtn').disabled = document.getElementById('nextBtn').disabled || 
                    (this.curQ === currentSection.end);
            }
        }
            
            updateAnsCnt() {
                const cnt = this.ans.filter(a => a !== null).length;
                this.els.ansCnt.textContent = cnt;
            }
            
            updatePrintButton() {
                this.els.printBtn.style.display = this.sub ? 'flex' : 'none';
            }
            
            updateThemeToggleIcon() {
                const icon = this.darkMode ? 'fa-sun' : 'fa-moon';
                this.els.themeToggle.innerHTML = `<i class="fas ${icon}"></i>`;
            }
            
            updateSectionHeader() {
                if (!this.sections || !this.els.sectionHeader) return;
                
                const section = this.sections[this.currentSection];
                this.els.sectionTitle.textContent = section.name;
                this.els.sectionTimer.textContent = this.formatTime(section.time_left);
                
                // Show the section header if we have sections
                this.els.sectionHeader.style.display = 'flex';
            }
            
            setLang(eng) {
                this.eng = eng;
                document.getElementById('engBtn').classList.toggle('active', eng);
                document.getElementById('hinBtn').classList.toggle('active', !eng);
                this.loadQ(this.curQ);
            }
            
            toggleTheme() {
                this.darkMode = !this.darkMode;
                document.body.classList.toggle('dark-mode', this.darkMode);
                this.updateThemeToggleIcon();
                this.loadQ(this.curQ); // Refresh to apply dark mode styles
            }
            
            startTimer() {
                this.timer = setInterval(() => {
                    this.timeLeft--;
                    if (this.timeLeft <= 0) {
                        clearInterval(this.timer);
                        this.subTest();
                        return;
                    }
                    const mins = Math.floor(this.timeLeft / 60);
                    const secs = this.timeLeft % 60;
                    this.els.timer.textContent = `${mins}:${secs.toString().padStart(2, '0')}`;
                }, 1000);
            }
            
            startSectionTimer() {
                if (!this.sections) return;
                
                // Clear any existing section timer
                if (this.sectionTimer) clearInterval(this.sectionTimer);
                
                const section = this.sections[this.currentSection];
                section.time_left = section.timer; // Reset to initial time
                
                this.sectionTimer = setInterval(() => {
                    section.time_left--;
                    this.els.sectionTimer.textContent = this.formatTime(section.time_left);
                    
                    if (section.time_left <= 0) {
                        clearInterval(this.sectionTimer);
                        this.submitCurrentSection();
                    }
                }, 1000);
            }
            
            formatTime(seconds) {
                const mins = Math.floor(seconds / 60);
                const secs = seconds % 60;
                return `${mins}:${secs.toString().padStart(2, '0')}`;
            }
            
            stopTimers() {
                if (this.timer) clearInterval(this.timer);
                if (this.sectionTimer) clearInterval(this.sectionTimer);
            }
            
            togglePanel() {
                this.els.panel.classList.toggle('open');
            }
            
            closePanel() {
                this.els.panel.classList.remove('open');
            }
            
            confirmSub() {
                if (this.sections) {
                    const section = this.sections[this.currentSection];
                    const unanswered = this.ans.slice(section.start, section.end + 1)
                        .filter(a => a === null).length;
                    const reviewed = this.reviewed.slice(section.start, section.end + 1)
                        .filter(r => r).length;
                    
                    let msg = '';
                    
                    if (unanswered > 0 && reviewed > 0) {
                        msg = `You have ${unanswered} unanswered questions and ${reviewed} marked for review in this section. Submit anyway?`;
                    } else if (unanswered > 0) {
                        msg = `You have ${unanswered} unanswered questions in this section. Submit anyway?`;
                    } else if (reviewed > 0) {
                        msg = `You have ${reviewed} questions marked for review in this section. Submit anyway?`;
                    } else {
                        msg = 'Submit this section?';
                    }
                    
                    if (confirm(msg)) this.submitCurrentSection();
                } else {
                    const unanswered = this.ans.filter(a => a === null).length;
                    const reviewed = this.reviewed.filter(r => r).length;
                    let msg = '';
                    
                    if (unanswered > 0 && reviewed > 0) {
                        msg = `You have ${unanswered} unanswered questions and ${reviewed} marked for review. Submit anyway?`;
                    } else if (unanswered > 0) {
                        msg = `You have ${unanswered} unanswered questions. Submit anyway?`;
                    } else if (reviewed > 0) {
                        msg = `You have ${reviewed} questions marked for review. Submit anyway?`;
                    } else {
                        msg = 'Submit test?';
                    }
                    
                    if (confirm(msg)) this.subTest();
                }
            }
            
            submitCurrentSection() {
                if (!this.sections) return;
                
                const section = this.sections[this.currentSection];
                section.submitted = true;
                clearInterval(this.sectionTimer);
                
                // Move to the next section if available
                const nextSectionIdx = this.currentSection + 1;
                if (nextSectionIdx < this.sections.length) {
                    this.currentSection = nextSectionIdx;
                    this.startSectionTimer();
                    this.updateSectionHeader();
                    this.loadQ(this.sections[nextSectionIdx].start);
                } else {
                    // All sections completed
                    this.subTest();
                }
                
                this.updateGrid();
            }
            
            subTest() {
                if (this.sub) return;
                
                // Record time spent on current question
                const now = Date.now();
                this.timeSpent[this.curQ] += (now - this.lastQTime) / 1000;
                
                console.log('Submitting test. Final answers:', this.ans);
                this.sub = true;
                this.stopTimers();
                document.getElementById('subBtn').style.display = 'none';
                document.getElementById('reviewBtn').style.display = 'none';
                const results = this.calcResults();
                this.showResults(results);
                this.loadQ(this.curQ);
                this.updateGrid();
                this.updatePrintButton();
                
                // Hide section header if it exists
                if (this.els.sectionHeader) {
                    this.els.sectionHeader.style.display = 'none';
                }
            }
            
            calcResults() {
                const timeTaken = Math.round((Date.now() - this.startT) / 60000);
                let correct = 0, incorrect = 0, unattempted = 0, score = 0;
                
                console.log('Calculating results...');
                this.qs.forEach((q, i) => {
                    const userAns = this.ans[i];
                    const correctAns = q.correct_option_id;
                    
                    console.log(`Q${i + 1}: user=${userAns}, correct=${correctAns}`);
                    
                    if (userAns === null || userAns === undefined) {
                        unattempted++;
                    } else if (correctAns !== undefined && correctAns !== null && userAns === correctAns) {
                        correct++;
                        score += 2;
                        console.log(`Q${i + 1}: CORRECT (+2 marks)`);
                    } else {
                        incorrect++;
                        score -= 0.50;
                        console.log(`Q${i + 1}: INCORRECT (-0.50 marks)`);
                    }
                });
                
                const results = { 
                    score: Math.max(0, score), 
                    correct, 
                    incorrect, 
                    unattempted, 
                    timeTaken,
                    timePerQ: this.timeSpent.map(t => Math.round(t))
                };
                console.log('Final results:', results);
                return results;
            }
            
            showResults(results) {
                this.els.scoreDisp.textContent = `${results.score}/60`;
                this.els.corrStat.textContent = results.correct;
                this.els.incStat.textContent = results.incorrect;
                this.els.unaStat.textContent = results.unattempted;
                this.els.timeStat.textContent = results.timeTaken;
                this.els.modalOver.classList.add('show');
            }
            
            closeModal() {
                this.els.modalOver.classList.remove('show');
            }
            
            review() {
                this.closeModal();
                this.loadQ(0);
            }
            
            isNavigationAllowed(idx) {
            // Always allow navigation after submission
            if (this.sub) return true;
            
            // During test, only allow within current section
            if (this.sections) {
                const currentSection = this.sections[this.currentSection];
                return idx >= currentSection.start && idx <= currentSection.end;
            }
            
            // If no sections, allow all navigation
            return true;
            }
            
            printTest() {
                const printWindow = window.open('', '_blank');
                const testTitle = document.title;
                const questionsHtml = this.qs.map((q, i) => {
                    const userAns = this.ans[i];
                    const correctAns = q.correct_option_id;
                    const isCorrect = userAns !== null && correctAns !== undefined && userAns === correctAns;
                    const timeSpent = Math.round(this.timeSpent[i]);
                    const wasReviewed = this.reviewed[i];
                    const sectionName = this.sections ? this.getSectionNameForQuestion(i) : '';
                    
                    return `
                        <div style="page-break-inside:avoid;margin-bottom:30px;border-bottom:1px solid #eee;padding-bottom:20px">
                            <h3 style="color:#4F46E5">Question ${i + 1} ${wasReviewed ? '<span style="color:#F59E0B">(Marked for Review)</span>' : ''}</h3>
                            ${sectionName ? `<div style="font-size:14px;color:#6B7280;margin-bottom:8px">Section: ${sectionName}</div>` : ''}
                            ${q.comp ? `<div>${q.comp}</div>` : ''}
                            <div>${q.question}</div>
                            <div style="margin-top:15px">
                                ${q.options.map((opt, j) => `
                                    <div style="margin:5px 0;padding:5px;border-left:3px solid ${ 
                                        j === correctAns ? '#10B981' : 
                                        j === userAns ? '#EF4444' : '#E5E7EB' 
                                    }">
                                        ${opt}
                                    </div>
                                `).join('')}
                            </div>
                            <div style="margin-top:15px;font-size:14px;color:#666">
                                <strong>Your answer:</strong> ${userAns !== null ? String.fromCharCode(65 + userAns) : 'Not attempted'}
                                ${userAns !== null && correctAns !== undefined ? 
                                    `(<span style="color:${isCorrect ? '#10B981' : '#EF4444'}">${isCorrect ? 'Correct' : 'Incorrect'}</span>)` : ''}
                                <br>
                                <strong>Time spent:</strong> ${timeSpent} seconds
                            </div>
                            ${q.solution ? `
                                <div style="margin-top:15px;background:#f0fdf4;padding:15px;border-radius:8px">
                                    <h4 style="color:#10B981;margin-top:0">Solution</h4>
                                    ${q.solution}
                                </div>
                            ` : ''}
                        </div>
                    `;
                }).join('');
                
                printWindow.document.write(`
                    <!DOCTYPE html>
                    <html>
                    <head>
                        <title>${testTitle} - Results</title>
                        <style>
                            body { font-family: Arial, sans-serif; line-height: 1.6; padding: 20px; }
                            h2 { color: #4F46E5; border-bottom: 1px solid #E5E7EB; padding-bottom: 10px; }
                            .math-exp { display: inline-block; vertical-align: middle; position: relative; margin: 0 2px; }
                            .math-num { text-align: center; display: block; padding: 0; }
                            .math-line { display: block; border-top: 1px solid; padding: 0; text-align: center; }
                            .table-container { width: 100%; overflow-x: auto; margin: 12px 0; }
                            table { width: 100%; border-collapse: collapse; margin: 8px 0; }
                            table, th, td { border: 1px solid #E5E7EB; }
                            th, td { padding: 8px 12px; text-align: left; }
                            @media print {
                                body { padding: 0; }
                                .page-break { page-break-after: always; }
                            }
                        </style>
                    </head>
                    <body>
                        <h2>Mocks Wallah - Analysis</h2>
                        <div style="margin-bottom:30px">
                            <div><strong>Score:</strong> ${this.els.scoreDisp.textContent}</div>
                            <div><strong>Correct:</strong> ${this.els.corrStat.textContent}</div>
                            <div><strong>Incorrect:</strong> ${this.els.incStat.textContent}</div>
                            <div><strong>Unattempted:</strong> ${this.els.unaStat.textContent}</div>
                            <div><strong>Time taken:</strong> ${this.els.timeStat.textContent} minutes</div>
                        </div>
                        ${questionsHtml}
                        <script>
                            setTimeout(() => { window.print(); }, 500);
                        <\/script>
                    </body>
                    </html>
                `);
                printWindow.document.close();
            }
            
            // Section-related helper methods
            isInCurrentSection(qIdx) {
                if (!this.sections) return true;
                const section = this.sections[this.currentSection];
                return qIdx >= section.start && qIdx <= section.end;
            }
            
            findSectionForQuestion(qIdx) {
                if (!this.sections) return null;
                for (let i = 0; i < this.sections.length; i++) {
                    const section = this.sections[i];
                    if (qIdx >= section.start && qIdx <= section.end) {
                        return i;
                    }
                }
                return null;
            }
            
            getSectionNameForQuestion(qIdx) {
                if (!this.sections) return '';
                const sectionIdx = this.findSectionForQuestion(qIdx);
                return sectionIdx !== null ? this.sections[sectionIdx].name : '';
            }
        }
        
        document.addEventListener('DOMContentLoaded', () => new TestApp());
    </script>
</body>
</html>